ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 6
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"w25qxx.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.comm	w25qxx,40,4
  16              		.section	.text.W25qxx_Spi,"ax",%progbits
  17              		.align	1
  18              		.global	W25qxx_Spi
  19              		.arch armv7-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu softvfp
  25              	W25qxx_Spi:
  26              	.LFB65:
  27              		.file 1 "Src/w25qxx.c"
   1:Src/w25qxx.c  **** 
   2:Src/w25qxx.c  **** #include "w25qxx.h"
   3:Src/w25qxx.c  **** #include "w25qxxConf.h"
   4:Src/w25qxx.c  **** 
   5:Src/w25qxx.c  **** #if (_W25QXX_DEBUG==1)
   6:Src/w25qxx.c  **** #include <stdio.h>
   7:Src/w25qxx.c  **** #endif
   8:Src/w25qxx.c  **** 
   9:Src/w25qxx.c  **** #define W25QXX_DUMMY_BYTE         0xA5
  10:Src/w25qxx.c  **** 
  11:Src/w25qxx.c  **** w25qxx_t	w25qxx;
  12:Src/w25qxx.c  **** 
  13:Src/w25qxx.c  **** #if (_W25QXX_USE_FREERTOS==1)
  14:Src/w25qxx.c  **** #define	W25qxx_Delay(delay)		osDelay(delay)
  15:Src/w25qxx.c  **** #include "cmsis_os.h"
  16:Src/w25qxx.c  **** #else
  17:Src/w25qxx.c  **** #define	W25qxx_Delay(delay)		HAL_Delay(delay)
  18:Src/w25qxx.c  **** #endif
  19:Src/w25qxx.c  **** //#################################################################################################
  20:Src/w25qxx.c  **** uint8_t	W25qxx_Spi(uint8_t	Data)
  21:Src/w25qxx.c  **** {
  28              		.loc 1 21 1
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 16
  31              		@ frame_needed = 1, uses_anonymous_args = 0
  32 0000 80B5     		push	{r7, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 7, -8
  36              		.cfi_offset 14, -4
  37 0002 86B0     		sub	sp, sp, #24
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 2


  38              	.LCFI1:
  39              		.cfi_def_cfa_offset 32
  40 0004 02AF     		add	r7, sp, #8
  41              	.LCFI2:
  42              		.cfi_def_cfa 7, 24
  43 0006 0346     		mov	r3, r0
  44 0008 FB71     		strb	r3, [r7, #7]
  22:Src/w25qxx.c  **** 	uint8_t	ret;
  23:Src/w25qxx.c  **** 	HAL_SPI_TransmitReceive(&_W25QXX_SPI,&Data,&ret,1,100);
  45              		.loc 1 23 2
  46 000a 07F10F02 		add	r2, r7, #15
  47 000e F91D     		adds	r1, r7, #7
  48 0010 6423     		movs	r3, #100
  49 0012 0093     		str	r3, [sp]
  50 0014 0123     		movs	r3, #1
  51 0016 0448     		ldr	r0, .L3
  52 0018 FFF7FEFF 		bl	HAL_SPI_TransmitReceive
  24:Src/w25qxx.c  **** 	return ret;	
  53              		.loc 1 24 9
  54 001c FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
  25:Src/w25qxx.c  **** }
  55              		.loc 1 25 1
  56 001e 1846     		mov	r0, r3
  57 0020 1037     		adds	r7, r7, #16
  58              	.LCFI3:
  59              		.cfi_def_cfa_offset 8
  60 0022 BD46     		mov	sp, r7
  61              	.LCFI4:
  62              		.cfi_def_cfa_register 13
  63              		@ sp needed
  64 0024 80BD     		pop	{r7, pc}
  65              	.L4:
  66 0026 00BF     		.align	2
  67              	.L3:
  68 0028 00000000 		.word	hspi1
  69              		.cfi_endproc
  70              	.LFE65:
  72              		.section	.text.W25qxx_ReadID,"ax",%progbits
  73              		.align	1
  74              		.global	W25qxx_ReadID
  75              		.syntax unified
  76              		.thumb
  77              		.thumb_func
  78              		.fpu softvfp
  80              	W25qxx_ReadID:
  81              	.LFB66:
  26:Src/w25qxx.c  **** //#################################################################################################
  27:Src/w25qxx.c  **** uint32_t W25qxx_ReadID(void)
  28:Src/w25qxx.c  **** {
  82              		.loc 1 28 1
  83              		.cfi_startproc
  84              		@ args = 0, pretend = 0, frame = 16
  85              		@ frame_needed = 1, uses_anonymous_args = 0
  86 0000 80B5     		push	{r7, lr}
  87              	.LCFI5:
  88              		.cfi_def_cfa_offset 8
  89              		.cfi_offset 7, -8
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 3


  90              		.cfi_offset 14, -4
  91 0002 84B0     		sub	sp, sp, #16
  92              	.LCFI6:
  93              		.cfi_def_cfa_offset 24
  94 0004 00AF     		add	r7, sp, #0
  95              	.LCFI7:
  96              		.cfi_def_cfa_register 7
  29:Src/w25qxx.c  ****   uint32_t Temp = 0, Temp0 = 0, Temp1 = 0, Temp2 = 0;
  97              		.loc 1 29 12
  98 0006 0023     		movs	r3, #0
  99 0008 FB60     		str	r3, [r7, #12]
 100              		.loc 1 29 22
 101 000a 0023     		movs	r3, #0
 102 000c BB60     		str	r3, [r7, #8]
 103              		.loc 1 29 33
 104 000e 0023     		movs	r3, #0
 105 0010 7B60     		str	r3, [r7, #4]
 106              		.loc 1 29 44
 107 0012 0023     		movs	r3, #0
 108 0014 3B60     		str	r3, [r7]
  30:Src/w25qxx.c  ****   HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_RESET);
 109              		.loc 1 30 3
 110 0016 0022     		movs	r2, #0
 111 0018 1021     		movs	r1, #16
 112 001a 1348     		ldr	r0, .L7
 113 001c FFF7FEFF 		bl	HAL_GPIO_WritePin
  31:Src/w25qxx.c  ****   W25qxx_Spi(0x9F);
 114              		.loc 1 31 3
 115 0020 9F20     		movs	r0, #159
 116 0022 FFF7FEFF 		bl	W25qxx_Spi
  32:Src/w25qxx.c  ****   Temp0 = W25qxx_Spi(W25QXX_DUMMY_BYTE);
 117              		.loc 1 32 11
 118 0026 A520     		movs	r0, #165
 119 0028 FFF7FEFF 		bl	W25qxx_Spi
 120 002c 0346     		mov	r3, r0
 121              		.loc 1 32 9
 122 002e BB60     		str	r3, [r7, #8]
  33:Src/w25qxx.c  ****   Temp1 = W25qxx_Spi(W25QXX_DUMMY_BYTE);
 123              		.loc 1 33 11
 124 0030 A520     		movs	r0, #165
 125 0032 FFF7FEFF 		bl	W25qxx_Spi
 126 0036 0346     		mov	r3, r0
 127              		.loc 1 33 9
 128 0038 7B60     		str	r3, [r7, #4]
  34:Src/w25qxx.c  ****   Temp2 = W25qxx_Spi(W25QXX_DUMMY_BYTE);
 129              		.loc 1 34 11
 130 003a A520     		movs	r0, #165
 131 003c FFF7FEFF 		bl	W25qxx_Spi
 132 0040 0346     		mov	r3, r0
 133              		.loc 1 34 9
 134 0042 3B60     		str	r3, [r7]
  35:Src/w25qxx.c  ****   HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_SET);
 135              		.loc 1 35 3
 136 0044 0122     		movs	r2, #1
 137 0046 1021     		movs	r1, #16
 138 0048 0748     		ldr	r0, .L7
 139 004a FFF7FEFF 		bl	HAL_GPIO_WritePin
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 4


  36:Src/w25qxx.c  ****   Temp = (Temp0 << 16) | (Temp1 << 8) | Temp2;
 140              		.loc 1 36 17
 141 004e BB68     		ldr	r3, [r7, #8]
 142 0050 1A04     		lsls	r2, r3, #16
 143              		.loc 1 36 33
 144 0052 7B68     		ldr	r3, [r7, #4]
 145 0054 1B02     		lsls	r3, r3, #8
 146              		.loc 1 36 24
 147 0056 1343     		orrs	r3, r3, r2
 148              		.loc 1 36 8
 149 0058 3A68     		ldr	r2, [r7]
 150 005a 1343     		orrs	r3, r3, r2
 151 005c FB60     		str	r3, [r7, #12]
  37:Src/w25qxx.c  ****   return Temp;
 152              		.loc 1 37 10
 153 005e FB68     		ldr	r3, [r7, #12]
  38:Src/w25qxx.c  **** }
 154              		.loc 1 38 1
 155 0060 1846     		mov	r0, r3
 156 0062 1037     		adds	r7, r7, #16
 157              	.LCFI8:
 158              		.cfi_def_cfa_offset 8
 159 0064 BD46     		mov	sp, r7
 160              	.LCFI9:
 161              		.cfi_def_cfa_register 13
 162              		@ sp needed
 163 0066 80BD     		pop	{r7, pc}
 164              	.L8:
 165              		.align	2
 166              	.L7:
 167 0068 00080140 		.word	1073809408
 168              		.cfi_endproc
 169              	.LFE66:
 171              		.section	.text.W25qxx_ReadUniqID,"ax",%progbits
 172              		.align	1
 173              		.global	W25qxx_ReadUniqID
 174              		.syntax unified
 175              		.thumb
 176              		.thumb_func
 177              		.fpu softvfp
 179              	W25qxx_ReadUniqID:
 180              	.LFB67:
  39:Src/w25qxx.c  **** //#################################################################################################
  40:Src/w25qxx.c  **** void W25qxx_ReadUniqID(void)
  41:Src/w25qxx.c  **** {
 181              		.loc 1 41 1
 182              		.cfi_startproc
 183              		@ args = 0, pretend = 0, frame = 8
 184              		@ frame_needed = 1, uses_anonymous_args = 0
 185 0000 90B5     		push	{r4, r7, lr}
 186              	.LCFI10:
 187              		.cfi_def_cfa_offset 12
 188              		.cfi_offset 4, -12
 189              		.cfi_offset 7, -8
 190              		.cfi_offset 14, -4
 191 0002 83B0     		sub	sp, sp, #12
 192              	.LCFI11:
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 5


 193              		.cfi_def_cfa_offset 24
 194 0004 00AF     		add	r7, sp, #0
 195              	.LCFI12:
 196              		.cfi_def_cfa_register 7
  42:Src/w25qxx.c  ****   HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_RESET);
 197              		.loc 1 42 3
 198 0006 0022     		movs	r2, #0
 199 0008 1021     		movs	r1, #16
 200 000a 1648     		ldr	r0, .L14
 201 000c FFF7FEFF 		bl	HAL_GPIO_WritePin
  43:Src/w25qxx.c  ****   W25qxx_Spi(0x4B);
 202              		.loc 1 43 3
 203 0010 4B20     		movs	r0, #75
 204 0012 FFF7FEFF 		bl	W25qxx_Spi
 205              	.LBB2:
  44:Src/w25qxx.c  **** 	for(uint8_t	i=0;i<4;i++)
 206              		.loc 1 44 14
 207 0016 0023     		movs	r3, #0
 208 0018 FB71     		strb	r3, [r7, #7]
 209              		.loc 1 44 2
 210 001a 05E0     		b	.L10
 211              	.L11:
  45:Src/w25qxx.c  **** 		W25qxx_Spi(W25QXX_DUMMY_BYTE);
 212              		.loc 1 45 3 discriminator 3
 213 001c A520     		movs	r0, #165
 214 001e FFF7FEFF 		bl	W25qxx_Spi
  44:Src/w25qxx.c  **** 	for(uint8_t	i=0;i<4;i++)
 215              		.loc 1 44 23 discriminator 3
 216 0022 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 217 0024 0133     		adds	r3, r3, #1
 218 0026 FB71     		strb	r3, [r7, #7]
 219              	.L10:
  44:Src/w25qxx.c  **** 	for(uint8_t	i=0;i<4;i++)
 220              		.loc 1 44 2 discriminator 1
 221 0028 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 222 002a 032B     		cmp	r3, #3
 223 002c F6D9     		bls	.L11
 224              	.LBE2:
 225              	.LBB3:
  46:Src/w25qxx.c  **** 	for(uint8_t	i=0;i<8;i++)
 226              		.loc 1 46 14
 227 002e 0023     		movs	r3, #0
 228 0030 BB71     		strb	r3, [r7, #6]
 229              		.loc 1 46 2
 230 0032 0BE0     		b	.L12
 231              	.L13:
  47:Src/w25qxx.c  **** 		w25qxx.UniqID[i] = W25qxx_Spi(W25QXX_DUMMY_BYTE);
 232              		.loc 1 47 16 discriminator 3
 233 0034 BC79     		ldrb	r4, [r7, #6]	@ zero_extendqisi2
 234              		.loc 1 47 22 discriminator 3
 235 0036 A520     		movs	r0, #165
 236 0038 FFF7FEFF 		bl	W25qxx_Spi
 237 003c 0346     		mov	r3, r0
 238 003e 1A46     		mov	r2, r3
 239              		.loc 1 47 20 discriminator 3
 240 0040 094B     		ldr	r3, .L14+4
 241 0042 2344     		add	r3, r3, r4
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 6


 242 0044 5A70     		strb	r2, [r3, #1]
  46:Src/w25qxx.c  **** 	for(uint8_t	i=0;i<8;i++)
 243              		.loc 1 46 23 discriminator 3
 244 0046 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 245 0048 0133     		adds	r3, r3, #1
 246 004a BB71     		strb	r3, [r7, #6]
 247              	.L12:
  46:Src/w25qxx.c  **** 	for(uint8_t	i=0;i<8;i++)
 248              		.loc 1 46 2 discriminator 1
 249 004c BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 250 004e 072B     		cmp	r3, #7
 251 0050 F0D9     		bls	.L13
 252              	.LBE3:
  48:Src/w25qxx.c  ****   HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_SET);
 253              		.loc 1 48 3
 254 0052 0122     		movs	r2, #1
 255 0054 1021     		movs	r1, #16
 256 0056 0348     		ldr	r0, .L14
 257 0058 FFF7FEFF 		bl	HAL_GPIO_WritePin
  49:Src/w25qxx.c  **** }
 258              		.loc 1 49 1
 259 005c 00BF     		nop
 260 005e 0C37     		adds	r7, r7, #12
 261              	.LCFI13:
 262              		.cfi_def_cfa_offset 12
 263 0060 BD46     		mov	sp, r7
 264              	.LCFI14:
 265              		.cfi_def_cfa_register 13
 266              		@ sp needed
 267 0062 90BD     		pop	{r4, r7, pc}
 268              	.L15:
 269              		.align	2
 270              	.L14:
 271 0064 00080140 		.word	1073809408
 272 0068 00000000 		.word	w25qxx
 273              		.cfi_endproc
 274              	.LFE67:
 276              		.section	.text.W25qxx_WriteEnable,"ax",%progbits
 277              		.align	1
 278              		.global	W25qxx_WriteEnable
 279              		.syntax unified
 280              		.thumb
 281              		.thumb_func
 282              		.fpu softvfp
 284              	W25qxx_WriteEnable:
 285              	.LFB68:
  50:Src/w25qxx.c  **** //#################################################################################################
  51:Src/w25qxx.c  **** void W25qxx_WriteEnable(void)
  52:Src/w25qxx.c  **** {
 286              		.loc 1 52 1
 287              		.cfi_startproc
 288              		@ args = 0, pretend = 0, frame = 0
 289              		@ frame_needed = 1, uses_anonymous_args = 0
 290 0000 80B5     		push	{r7, lr}
 291              	.LCFI15:
 292              		.cfi_def_cfa_offset 8
 293              		.cfi_offset 7, -8
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 7


 294              		.cfi_offset 14, -4
 295 0002 00AF     		add	r7, sp, #0
 296              	.LCFI16:
 297              		.cfi_def_cfa_register 7
  53:Src/w25qxx.c  ****   HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_RESET);
 298              		.loc 1 53 3
 299 0004 0022     		movs	r2, #0
 300 0006 1021     		movs	r1, #16
 301 0008 0748     		ldr	r0, .L17
 302 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
  54:Src/w25qxx.c  ****   W25qxx_Spi(0x06);
 303              		.loc 1 54 3
 304 000e 0620     		movs	r0, #6
 305 0010 FFF7FEFF 		bl	W25qxx_Spi
  55:Src/w25qxx.c  ****   HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_SET);
 306              		.loc 1 55 3
 307 0014 0122     		movs	r2, #1
 308 0016 1021     		movs	r1, #16
 309 0018 0348     		ldr	r0, .L17
 310 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
  56:Src/w25qxx.c  **** 	W25qxx_Delay(1);
 311              		.loc 1 56 2
 312 001e 0120     		movs	r0, #1
 313 0020 FFF7FEFF 		bl	HAL_Delay
  57:Src/w25qxx.c  **** }
 314              		.loc 1 57 1
 315 0024 00BF     		nop
 316 0026 80BD     		pop	{r7, pc}
 317              	.L18:
 318              		.align	2
 319              	.L17:
 320 0028 00080140 		.word	1073809408
 321              		.cfi_endproc
 322              	.LFE68:
 324              		.section	.text.W25qxx_WriteDisable,"ax",%progbits
 325              		.align	1
 326              		.global	W25qxx_WriteDisable
 327              		.syntax unified
 328              		.thumb
 329              		.thumb_func
 330              		.fpu softvfp
 332              	W25qxx_WriteDisable:
 333              	.LFB69:
  58:Src/w25qxx.c  **** //#################################################################################################
  59:Src/w25qxx.c  **** void W25qxx_WriteDisable(void)
  60:Src/w25qxx.c  **** {
 334              		.loc 1 60 1
 335              		.cfi_startproc
 336              		@ args = 0, pretend = 0, frame = 0
 337              		@ frame_needed = 1, uses_anonymous_args = 0
 338 0000 80B5     		push	{r7, lr}
 339              	.LCFI17:
 340              		.cfi_def_cfa_offset 8
 341              		.cfi_offset 7, -8
 342              		.cfi_offset 14, -4
 343 0002 00AF     		add	r7, sp, #0
 344              	.LCFI18:
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 8


 345              		.cfi_def_cfa_register 7
  61:Src/w25qxx.c  ****   HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_RESET);
 346              		.loc 1 61 3
 347 0004 0022     		movs	r2, #0
 348 0006 1021     		movs	r1, #16
 349 0008 0748     		ldr	r0, .L20
 350 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
  62:Src/w25qxx.c  ****   W25qxx_Spi(0x04);
 351              		.loc 1 62 3
 352 000e 0420     		movs	r0, #4
 353 0010 FFF7FEFF 		bl	W25qxx_Spi
  63:Src/w25qxx.c  ****   HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_SET);
 354              		.loc 1 63 3
 355 0014 0122     		movs	r2, #1
 356 0016 1021     		movs	r1, #16
 357 0018 0348     		ldr	r0, .L20
 358 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
  64:Src/w25qxx.c  **** 	W25qxx_Delay(1);
 359              		.loc 1 64 2
 360 001e 0120     		movs	r0, #1
 361 0020 FFF7FEFF 		bl	HAL_Delay
  65:Src/w25qxx.c  **** }
 362              		.loc 1 65 1
 363 0024 00BF     		nop
 364 0026 80BD     		pop	{r7, pc}
 365              	.L21:
 366              		.align	2
 367              	.L20:
 368 0028 00080140 		.word	1073809408
 369              		.cfi_endproc
 370              	.LFE69:
 372              		.section	.text.W25qxx_ReadStatusRegister,"ax",%progbits
 373              		.align	1
 374              		.global	W25qxx_ReadStatusRegister
 375              		.syntax unified
 376              		.thumb
 377              		.thumb_func
 378              		.fpu softvfp
 380              	W25qxx_ReadStatusRegister:
 381              	.LFB70:
  66:Src/w25qxx.c  **** //#################################################################################################
  67:Src/w25qxx.c  **** uint8_t W25qxx_ReadStatusRegister(uint8_t	SelectStatusRegister_1_2_3)
  68:Src/w25qxx.c  **** {
 382              		.loc 1 68 1
 383              		.cfi_startproc
 384              		@ args = 0, pretend = 0, frame = 16
 385              		@ frame_needed = 1, uses_anonymous_args = 0
 386 0000 80B5     		push	{r7, lr}
 387              	.LCFI19:
 388              		.cfi_def_cfa_offset 8
 389              		.cfi_offset 7, -8
 390              		.cfi_offset 14, -4
 391 0002 84B0     		sub	sp, sp, #16
 392              	.LCFI20:
 393              		.cfi_def_cfa_offset 24
 394 0004 00AF     		add	r7, sp, #0
 395              	.LCFI21:
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 9


 396              		.cfi_def_cfa_register 7
 397 0006 0346     		mov	r3, r0
 398 0008 FB71     		strb	r3, [r7, #7]
  69:Src/w25qxx.c  **** 	uint8_t	status=0;
 399              		.loc 1 69 10
 400 000a 0023     		movs	r3, #0
 401 000c FB73     		strb	r3, [r7, #15]
  70:Src/w25qxx.c  ****   HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_RESET);
 402              		.loc 1 70 3
 403 000e 0022     		movs	r2, #0
 404 0010 1021     		movs	r1, #16
 405 0012 1C48     		ldr	r0, .L27
 406 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
  71:Src/w25qxx.c  **** 	if(SelectStatusRegister_1_2_3==1)
 407              		.loc 1 71 4
 408 0018 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 409 001a 012B     		cmp	r3, #1
 410 001c 0CD1     		bne	.L23
  72:Src/w25qxx.c  **** 	{
  73:Src/w25qxx.c  **** 		W25qxx_Spi(0x05);
 411              		.loc 1 73 3
 412 001e 0520     		movs	r0, #5
 413 0020 FFF7FEFF 		bl	W25qxx_Spi
  74:Src/w25qxx.c  **** 		status=W25qxx_Spi(W25QXX_DUMMY_BYTE);	
 414              		.loc 1 74 10
 415 0024 A520     		movs	r0, #165
 416 0026 FFF7FEFF 		bl	W25qxx_Spi
 417 002a 0346     		mov	r3, r0
 418 002c FB73     		strb	r3, [r7, #15]
  75:Src/w25qxx.c  **** 		w25qxx.StatusRegister1 = status;
 419              		.loc 1 75 26
 420 002e 164A     		ldr	r2, .L27+4
 421 0030 FB7B     		ldrb	r3, [r7, #15]
 422 0032 82F82430 		strb	r3, [r2, #36]
 423 0036 1BE0     		b	.L24
 424              	.L23:
  76:Src/w25qxx.c  **** 	}
  77:Src/w25qxx.c  **** 	else if(SelectStatusRegister_1_2_3==2)
 425              		.loc 1 77 9
 426 0038 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 427 003a 022B     		cmp	r3, #2
 428 003c 0CD1     		bne	.L25
  78:Src/w25qxx.c  **** 	{
  79:Src/w25qxx.c  **** 		W25qxx_Spi(0x35);
 429              		.loc 1 79 3
 430 003e 3520     		movs	r0, #53
 431 0040 FFF7FEFF 		bl	W25qxx_Spi
  80:Src/w25qxx.c  **** 		status=W25qxx_Spi(W25QXX_DUMMY_BYTE);	
 432              		.loc 1 80 10
 433 0044 A520     		movs	r0, #165
 434 0046 FFF7FEFF 		bl	W25qxx_Spi
 435 004a 0346     		mov	r3, r0
 436 004c FB73     		strb	r3, [r7, #15]
  81:Src/w25qxx.c  **** 		w25qxx.StatusRegister2 = status;
 437              		.loc 1 81 26
 438 004e 0E4A     		ldr	r2, .L27+4
 439 0050 FB7B     		ldrb	r3, [r7, #15]
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 10


 440 0052 82F82530 		strb	r3, [r2, #37]
 441 0056 0BE0     		b	.L24
 442              	.L25:
  82:Src/w25qxx.c  **** 	}
  83:Src/w25qxx.c  **** 	else
  84:Src/w25qxx.c  **** 	{
  85:Src/w25qxx.c  **** 		W25qxx_Spi(0x15);
 443              		.loc 1 85 3
 444 0058 1520     		movs	r0, #21
 445 005a FFF7FEFF 		bl	W25qxx_Spi
  86:Src/w25qxx.c  **** 		status=W25qxx_Spi(W25QXX_DUMMY_BYTE);	
 446              		.loc 1 86 10
 447 005e A520     		movs	r0, #165
 448 0060 FFF7FEFF 		bl	W25qxx_Spi
 449 0064 0346     		mov	r3, r0
 450 0066 FB73     		strb	r3, [r7, #15]
  87:Src/w25qxx.c  **** 		w25qxx.StatusRegister3 = status;
 451              		.loc 1 87 26
 452 0068 074A     		ldr	r2, .L27+4
 453 006a FB7B     		ldrb	r3, [r7, #15]
 454 006c 82F82630 		strb	r3, [r2, #38]
 455              	.L24:
  88:Src/w25qxx.c  **** 	}	
  89:Src/w25qxx.c  ****   HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_SET);
 456              		.loc 1 89 3
 457 0070 0122     		movs	r2, #1
 458 0072 1021     		movs	r1, #16
 459 0074 0348     		ldr	r0, .L27
 460 0076 FFF7FEFF 		bl	HAL_GPIO_WritePin
  90:Src/w25qxx.c  **** 	return status;
 461              		.loc 1 90 9
 462 007a FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
  91:Src/w25qxx.c  **** }
 463              		.loc 1 91 1
 464 007c 1846     		mov	r0, r3
 465 007e 1037     		adds	r7, r7, #16
 466              	.LCFI22:
 467              		.cfi_def_cfa_offset 8
 468 0080 BD46     		mov	sp, r7
 469              	.LCFI23:
 470              		.cfi_def_cfa_register 13
 471              		@ sp needed
 472 0082 80BD     		pop	{r7, pc}
 473              	.L28:
 474              		.align	2
 475              	.L27:
 476 0084 00080140 		.word	1073809408
 477 0088 00000000 		.word	w25qxx
 478              		.cfi_endproc
 479              	.LFE70:
 481              		.section	.text.W25qxx_WriteStatusRegister,"ax",%progbits
 482              		.align	1
 483              		.global	W25qxx_WriteStatusRegister
 484              		.syntax unified
 485              		.thumb
 486              		.thumb_func
 487              		.fpu softvfp
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 11


 489              	W25qxx_WriteStatusRegister:
 490              	.LFB71:
  92:Src/w25qxx.c  **** //#################################################################################################
  93:Src/w25qxx.c  **** void W25qxx_WriteStatusRegister(uint8_t	SelectStatusRegister_1_2_3,uint8_t Data)
  94:Src/w25qxx.c  **** {
 491              		.loc 1 94 1
 492              		.cfi_startproc
 493              		@ args = 0, pretend = 0, frame = 8
 494              		@ frame_needed = 1, uses_anonymous_args = 0
 495 0000 80B5     		push	{r7, lr}
 496              	.LCFI24:
 497              		.cfi_def_cfa_offset 8
 498              		.cfi_offset 7, -8
 499              		.cfi_offset 14, -4
 500 0002 82B0     		sub	sp, sp, #8
 501              	.LCFI25:
 502              		.cfi_def_cfa_offset 16
 503 0004 00AF     		add	r7, sp, #0
 504              	.LCFI26:
 505              		.cfi_def_cfa_register 7
 506 0006 0346     		mov	r3, r0
 507 0008 0A46     		mov	r2, r1
 508 000a FB71     		strb	r3, [r7, #7]
 509 000c 1346     		mov	r3, r2
 510 000e BB71     		strb	r3, [r7, #6]
  95:Src/w25qxx.c  ****   HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_RESET);
 511              		.loc 1 95 3
 512 0010 0022     		movs	r2, #0
 513 0012 1021     		movs	r1, #16
 514 0014 1648     		ldr	r0, .L33
 515 0016 FFF7FEFF 		bl	HAL_GPIO_WritePin
  96:Src/w25qxx.c  **** 	if(SelectStatusRegister_1_2_3==1)
 516              		.loc 1 96 4
 517 001a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 518 001c 012B     		cmp	r3, #1
 519 001e 07D1     		bne	.L30
  97:Src/w25qxx.c  **** 	{
  98:Src/w25qxx.c  **** 		W25qxx_Spi(0x01);
 520              		.loc 1 98 3
 521 0020 0120     		movs	r0, #1
 522 0022 FFF7FEFF 		bl	W25qxx_Spi
  99:Src/w25qxx.c  **** 		w25qxx.StatusRegister1 = Data;
 523              		.loc 1 99 26
 524 0026 134A     		ldr	r2, .L33+4
 525 0028 BB79     		ldrb	r3, [r7, #6]
 526 002a 82F82430 		strb	r3, [r2, #36]
 527 002e 11E0     		b	.L31
 528              	.L30:
 100:Src/w25qxx.c  **** 	}
 101:Src/w25qxx.c  **** 	else if(SelectStatusRegister_1_2_3==2)
 529              		.loc 1 101 9
 530 0030 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 531 0032 022B     		cmp	r3, #2
 532 0034 07D1     		bne	.L32
 102:Src/w25qxx.c  **** 	{
 103:Src/w25qxx.c  **** 		W25qxx_Spi(0x31);
 533              		.loc 1 103 3
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 12


 534 0036 3120     		movs	r0, #49
 535 0038 FFF7FEFF 		bl	W25qxx_Spi
 104:Src/w25qxx.c  **** 		w25qxx.StatusRegister2 = Data;
 536              		.loc 1 104 26
 537 003c 0D4A     		ldr	r2, .L33+4
 538 003e BB79     		ldrb	r3, [r7, #6]
 539 0040 82F82530 		strb	r3, [r2, #37]
 540 0044 06E0     		b	.L31
 541              	.L32:
 105:Src/w25qxx.c  **** 	}
 106:Src/w25qxx.c  **** 	else
 107:Src/w25qxx.c  **** 	{
 108:Src/w25qxx.c  **** 		W25qxx_Spi(0x11);
 542              		.loc 1 108 3
 543 0046 1120     		movs	r0, #17
 544 0048 FFF7FEFF 		bl	W25qxx_Spi
 109:Src/w25qxx.c  **** 		w25qxx.StatusRegister3 = Data;
 545              		.loc 1 109 26
 546 004c 094A     		ldr	r2, .L33+4
 547 004e BB79     		ldrb	r3, [r7, #6]
 548 0050 82F82630 		strb	r3, [r2, #38]
 549              	.L31:
 110:Src/w25qxx.c  **** 	}
 111:Src/w25qxx.c  **** 	W25qxx_Spi(Data);
 550              		.loc 1 111 2
 551 0054 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 552 0056 1846     		mov	r0, r3
 553 0058 FFF7FEFF 		bl	W25qxx_Spi
 112:Src/w25qxx.c  ****   HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_SET);
 554              		.loc 1 112 3
 555 005c 0122     		movs	r2, #1
 556 005e 1021     		movs	r1, #16
 557 0060 0348     		ldr	r0, .L33
 558 0062 FFF7FEFF 		bl	HAL_GPIO_WritePin
 113:Src/w25qxx.c  **** }
 559              		.loc 1 113 1
 560 0066 00BF     		nop
 561 0068 0837     		adds	r7, r7, #8
 562              	.LCFI27:
 563              		.cfi_def_cfa_offset 8
 564 006a BD46     		mov	sp, r7
 565              	.LCFI28:
 566              		.cfi_def_cfa_register 13
 567              		@ sp needed
 568 006c 80BD     		pop	{r7, pc}
 569              	.L34:
 570 006e 00BF     		.align	2
 571              	.L33:
 572 0070 00080140 		.word	1073809408
 573 0074 00000000 		.word	w25qxx
 574              		.cfi_endproc
 575              	.LFE71:
 577              		.section	.text.W25qxx_WaitForWriteEnd,"ax",%progbits
 578              		.align	1
 579              		.global	W25qxx_WaitForWriteEnd
 580              		.syntax unified
 581              		.thumb
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 13


 582              		.thumb_func
 583              		.fpu softvfp
 585              	W25qxx_WaitForWriteEnd:
 586              	.LFB72:
 114:Src/w25qxx.c  **** //#################################################################################################
 115:Src/w25qxx.c  **** void W25qxx_WaitForWriteEnd(void)
 116:Src/w25qxx.c  **** {
 587              		.loc 1 116 1
 588              		.cfi_startproc
 589              		@ args = 0, pretend = 0, frame = 0
 590              		@ frame_needed = 1, uses_anonymous_args = 0
 591 0000 80B5     		push	{r7, lr}
 592              	.LCFI29:
 593              		.cfi_def_cfa_offset 8
 594              		.cfi_offset 7, -8
 595              		.cfi_offset 14, -4
 596 0002 00AF     		add	r7, sp, #0
 597              	.LCFI30:
 598              		.cfi_def_cfa_register 7
 117:Src/w25qxx.c  **** 	W25qxx_Delay(1);
 599              		.loc 1 117 2
 600 0004 0120     		movs	r0, #1
 601 0006 FFF7FEFF 		bl	HAL_Delay
 118:Src/w25qxx.c  **** 	HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_RESET);
 602              		.loc 1 118 2
 603 000a 0022     		movs	r2, #0
 604 000c 1021     		movs	r1, #16
 605 000e 0F48     		ldr	r0, .L37
 606 0010 FFF7FEFF 		bl	HAL_GPIO_WritePin
 119:Src/w25qxx.c  **** 	W25qxx_Spi(0x05);
 607              		.loc 1 119 2
 608 0014 0520     		movs	r0, #5
 609 0016 FFF7FEFF 		bl	W25qxx_Spi
 610              	.L36:
 120:Src/w25qxx.c  ****   do
 121:Src/w25qxx.c  ****   {
 122:Src/w25qxx.c  ****     w25qxx.StatusRegister1 = W25qxx_Spi(W25QXX_DUMMY_BYTE);
 611              		.loc 1 122 30 discriminator 1
 612 001a A520     		movs	r0, #165
 613 001c FFF7FEFF 		bl	W25qxx_Spi
 614 0020 0346     		mov	r3, r0
 615 0022 1A46     		mov	r2, r3
 616              		.loc 1 122 28 discriminator 1
 617 0024 0A4B     		ldr	r3, .L37+4
 618 0026 83F82420 		strb	r2, [r3, #36]
 123:Src/w25qxx.c  **** 		W25qxx_Delay(1);
 619              		.loc 1 123 3 discriminator 1
 620 002a 0120     		movs	r0, #1
 621 002c FFF7FEFF 		bl	HAL_Delay
 124:Src/w25qxx.c  ****   }
 125:Src/w25qxx.c  ****   while ((w25qxx.StatusRegister1 & 0x01) == 0x01);
 622              		.loc 1 125 17 discriminator 1
 623 0030 074B     		ldr	r3, .L37+4
 624 0032 93F82430 		ldrb	r3, [r3, #36]	@ zero_extendqisi2
 625              		.loc 1 125 34 discriminator 1
 626 0036 03F00103 		and	r3, r3, #1
 627              		.loc 1 125 3 discriminator 1
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 14


 628 003a 002B     		cmp	r3, #0
 629 003c EDD1     		bne	.L36
 126:Src/w25qxx.c  ****  HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_SET);
 630              		.loc 1 126 2
 631 003e 0122     		movs	r2, #1
 632 0040 1021     		movs	r1, #16
 633 0042 0248     		ldr	r0, .L37
 634 0044 FFF7FEFF 		bl	HAL_GPIO_WritePin
 127:Src/w25qxx.c  **** }
 635              		.loc 1 127 1
 636 0048 00BF     		nop
 637 004a 80BD     		pop	{r7, pc}
 638              	.L38:
 639              		.align	2
 640              	.L37:
 641 004c 00080140 		.word	1073809408
 642 0050 00000000 		.word	w25qxx
 643              		.cfi_endproc
 644              	.LFE72:
 646              		.section	.text.W25qxx_Init,"ax",%progbits
 647              		.align	1
 648              		.global	W25qxx_Init
 649              		.syntax unified
 650              		.thumb
 651              		.thumb_func
 652              		.fpu softvfp
 654              	W25qxx_Init:
 655              	.LFB73:
 128:Src/w25qxx.c  **** //#################################################################################################
 129:Src/w25qxx.c  **** bool	W25qxx_Init(void)
 130:Src/w25qxx.c  **** {
 656              		.loc 1 130 1
 657              		.cfi_startproc
 658              		@ args = 0, pretend = 0, frame = 8
 659              		@ frame_needed = 1, uses_anonymous_args = 0
 660 0000 80B5     		push	{r7, lr}
 661              	.LCFI31:
 662              		.cfi_def_cfa_offset 8
 663              		.cfi_offset 7, -8
 664              		.cfi_offset 14, -4
 665 0002 82B0     		sub	sp, sp, #8
 666              	.LCFI32:
 667              		.cfi_def_cfa_offset 16
 668 0004 00AF     		add	r7, sp, #0
 669              	.LCFI33:
 670              		.cfi_def_cfa_register 7
 131:Src/w25qxx.c  **** 	w25qxx.Lock=1;	
 671              		.loc 1 131 13
 672 0006 5A4B     		ldr	r3, .L54
 673 0008 0122     		movs	r2, #1
 674 000a 83F82720 		strb	r2, [r3, #39]
 132:Src/w25qxx.c  **** 	// while(HAL_GetTick()<100)
 133:Src/w25qxx.c  **** 	// 	W25qxx_Delay(1);
 134:Src/w25qxx.c  ****   HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_SET);
 675              		.loc 1 134 3
 676 000e 0122     		movs	r2, #1
 677 0010 1021     		movs	r1, #16
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 15


 678 0012 5848     		ldr	r0, .L54+4
 679 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 135:Src/w25qxx.c  ****   //W25qxx_Delay(100);
 136:Src/w25qxx.c  **** 	uint32_t	id;
 137:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 138:Src/w25qxx.c  **** 	printf("w25qxx Init Begin...\r\n");
 139:Src/w25qxx.c  **** 	#endif
 140:Src/w25qxx.c  **** 	id=0x4018;
 680              		.loc 1 140 4
 681 0018 44F21803 		movw	r3, #16408
 682 001c 7B60     		str	r3, [r7, #4]
 141:Src/w25qxx.c  **** 	
 142:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 143:Src/w25qxx.c  **** 	printf("w25qxx ID:0x%X\r\n",id);
 144:Src/w25qxx.c  **** 	#endif
 145:Src/w25qxx.c  **** 	switch(id&0x0000FFFF)
 683              		.loc 1 145 11
 684 001e 7B68     		ldr	r3, [r7, #4]
 685 0020 9BB2     		uxth	r3, r3
 686              		.loc 1 145 2
 687 0022 A3F58043 		sub	r3, r3, #16384
 688 0026 113B     		subs	r3, r3, #17
 689 0028 092B     		cmp	r3, #9
 690 002a 60D8     		bhi	.L40
 691 002c 01A2     		adr	r2, .L42
 692 002e 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 693 0032 00BF     		.p2align 2
 694              	.L42:
 695 0034 E1000000 		.word	.L51+1
 696 0038 D3000000 		.word	.L50+1
 697 003c C5000000 		.word	.L49+1
 698 0040 B7000000 		.word	.L48+1
 699 0044 A9000000 		.word	.L47+1
 700 0048 9B000000 		.word	.L46+1
 701 004c 8D000000 		.word	.L45+1
 702 0050 7D000000 		.word	.L44+1
 703 0054 6D000000 		.word	.L43+1
 704 0058 5D000000 		.word	.L41+1
 705              		.p2align 1
 706              	.L41:
 146:Src/w25qxx.c  **** 	{
 147:Src/w25qxx.c  **** 		case 0x401A:	// 	w25q512
 148:Src/w25qxx.c  **** 			w25qxx.ID=W25Q512;
 707              		.loc 1 148 13
 708 005c 444B     		ldr	r3, .L54
 709 005e 0A22     		movs	r2, #10
 710 0060 1A70     		strb	r2, [r3]
 149:Src/w25qxx.c  **** 			w25qxx.BlockCount=1024;
 711              		.loc 1 149 21
 712 0062 434B     		ldr	r3, .L54
 713 0064 4FF48062 		mov	r2, #1024
 714 0068 DA61     		str	r2, [r3, #28]
 150:Src/w25qxx.c  **** 			#if (_W25QXX_DEBUG==1)
 151:Src/w25qxx.c  **** 			printf("w25qxx Chip: w25q512\r\n");
 152:Src/w25qxx.c  **** 			#endif
 153:Src/w25qxx.c  **** 		break;
 715              		.loc 1 153 3
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 16


 716 006a 46E0     		b	.L52
 717              	.L43:
 154:Src/w25qxx.c  **** 		case 0x4019:	// 	w25q256
 155:Src/w25qxx.c  **** 			w25qxx.ID=W25Q256;
 718              		.loc 1 155 13
 719 006c 404B     		ldr	r3, .L54
 720 006e 0922     		movs	r2, #9
 721 0070 1A70     		strb	r2, [r3]
 156:Src/w25qxx.c  **** 			w25qxx.BlockCount=512;
 722              		.loc 1 156 21
 723 0072 3F4B     		ldr	r3, .L54
 724 0074 4FF40072 		mov	r2, #512
 725 0078 DA61     		str	r2, [r3, #28]
 157:Src/w25qxx.c  **** 			#if (_W25QXX_DEBUG==1)
 158:Src/w25qxx.c  **** 			printf("w25qxx Chip: w25q256\r\n");
 159:Src/w25qxx.c  **** 			#endif
 160:Src/w25qxx.c  **** 		break;
 726              		.loc 1 160 3
 727 007a 3EE0     		b	.L52
 728              	.L44:
 161:Src/w25qxx.c  **** 		case 0x4018:	// 	w25q128
 162:Src/w25qxx.c  **** 			w25qxx.ID=W25Q128;
 729              		.loc 1 162 13
 730 007c 3C4B     		ldr	r3, .L54
 731 007e 0822     		movs	r2, #8
 732 0080 1A70     		strb	r2, [r3]
 163:Src/w25qxx.c  **** 			w25qxx.BlockCount=256;
 733              		.loc 1 163 21
 734 0082 3B4B     		ldr	r3, .L54
 735 0084 4FF48072 		mov	r2, #256
 736 0088 DA61     		str	r2, [r3, #28]
 164:Src/w25qxx.c  **** 			#if (_W25QXX_DEBUG==1)
 165:Src/w25qxx.c  **** 			printf("w25qxx Chip: w25q128\r\n");
 166:Src/w25qxx.c  **** 			#endif
 167:Src/w25qxx.c  **** 		break;
 737              		.loc 1 167 3
 738 008a 36E0     		b	.L52
 739              	.L45:
 168:Src/w25qxx.c  **** 		case 0x4017:	//	w25q64
 169:Src/w25qxx.c  **** 			w25qxx.ID=W25Q64;
 740              		.loc 1 169 13
 741 008c 384B     		ldr	r3, .L54
 742 008e 0722     		movs	r2, #7
 743 0090 1A70     		strb	r2, [r3]
 170:Src/w25qxx.c  **** 			w25qxx.BlockCount=128;
 744              		.loc 1 170 21
 745 0092 374B     		ldr	r3, .L54
 746 0094 8022     		movs	r2, #128
 747 0096 DA61     		str	r2, [r3, #28]
 171:Src/w25qxx.c  **** 			#if (_W25QXX_DEBUG==1)
 172:Src/w25qxx.c  **** 			printf("w25qxx Chip: w25q64\r\n");
 173:Src/w25qxx.c  **** 			#endif
 174:Src/w25qxx.c  **** 		break;
 748              		.loc 1 174 3
 749 0098 2FE0     		b	.L52
 750              	.L46:
 175:Src/w25qxx.c  **** 		case 0x4016:	//	w25q32
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 17


 176:Src/w25qxx.c  **** 			w25qxx.ID=W25Q32;
 751              		.loc 1 176 13
 752 009a 354B     		ldr	r3, .L54
 753 009c 0622     		movs	r2, #6
 754 009e 1A70     		strb	r2, [r3]
 177:Src/w25qxx.c  **** 			w25qxx.BlockCount=64;
 755              		.loc 1 177 21
 756 00a0 334B     		ldr	r3, .L54
 757 00a2 4022     		movs	r2, #64
 758 00a4 DA61     		str	r2, [r3, #28]
 178:Src/w25qxx.c  **** 			#if (_W25QXX_DEBUG==1)
 179:Src/w25qxx.c  **** 			printf("w25qxx Chip: w25q32\r\n");
 180:Src/w25qxx.c  **** 			#endif
 181:Src/w25qxx.c  **** 		break;
 759              		.loc 1 181 3
 760 00a6 28E0     		b	.L52
 761              	.L47:
 182:Src/w25qxx.c  **** 		case 0x4015:	//	w25q16
 183:Src/w25qxx.c  **** 			w25qxx.ID=W25Q16;
 762              		.loc 1 183 13
 763 00a8 314B     		ldr	r3, .L54
 764 00aa 0522     		movs	r2, #5
 765 00ac 1A70     		strb	r2, [r3]
 184:Src/w25qxx.c  **** 			w25qxx.BlockCount=32;
 766              		.loc 1 184 21
 767 00ae 304B     		ldr	r3, .L54
 768 00b0 2022     		movs	r2, #32
 769 00b2 DA61     		str	r2, [r3, #28]
 185:Src/w25qxx.c  **** 			#if (_W25QXX_DEBUG==1)
 186:Src/w25qxx.c  **** 			printf("w25qxx Chip: w25q16\r\n");
 187:Src/w25qxx.c  **** 			#endif
 188:Src/w25qxx.c  **** 		break;
 770              		.loc 1 188 3
 771 00b4 21E0     		b	.L52
 772              	.L48:
 189:Src/w25qxx.c  **** 		case 0x4014:	//	w25q80
 190:Src/w25qxx.c  **** 			w25qxx.ID=W25Q80;
 773              		.loc 1 190 13
 774 00b6 2E4B     		ldr	r3, .L54
 775 00b8 0422     		movs	r2, #4
 776 00ba 1A70     		strb	r2, [r3]
 191:Src/w25qxx.c  **** 			w25qxx.BlockCount=16;
 777              		.loc 1 191 21
 778 00bc 2C4B     		ldr	r3, .L54
 779 00be 1022     		movs	r2, #16
 780 00c0 DA61     		str	r2, [r3, #28]
 192:Src/w25qxx.c  **** 			#if (_W25QXX_DEBUG==1)
 193:Src/w25qxx.c  **** 			printf("w25qxx Chip: w25q80\r\n");
 194:Src/w25qxx.c  **** 			#endif
 195:Src/w25qxx.c  **** 		break;
 781              		.loc 1 195 3
 782 00c2 1AE0     		b	.L52
 783              	.L49:
 196:Src/w25qxx.c  **** 		case 0x4013:	//	w25q40
 197:Src/w25qxx.c  **** 			w25qxx.ID=W25Q40;
 784              		.loc 1 197 13
 785 00c4 2A4B     		ldr	r3, .L54
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 18


 786 00c6 0322     		movs	r2, #3
 787 00c8 1A70     		strb	r2, [r3]
 198:Src/w25qxx.c  **** 			w25qxx.BlockCount=8;
 788              		.loc 1 198 21
 789 00ca 294B     		ldr	r3, .L54
 790 00cc 0822     		movs	r2, #8
 791 00ce DA61     		str	r2, [r3, #28]
 199:Src/w25qxx.c  **** 			#if (_W25QXX_DEBUG==1)
 200:Src/w25qxx.c  **** 			printf("w25qxx Chip: w25q40\r\n");
 201:Src/w25qxx.c  **** 			#endif
 202:Src/w25qxx.c  **** 		break;
 792              		.loc 1 202 3
 793 00d0 13E0     		b	.L52
 794              	.L50:
 203:Src/w25qxx.c  **** 		case 0x4012:	//	w25q20
 204:Src/w25qxx.c  **** 			w25qxx.ID=W25Q20;
 795              		.loc 1 204 13
 796 00d2 274B     		ldr	r3, .L54
 797 00d4 0222     		movs	r2, #2
 798 00d6 1A70     		strb	r2, [r3]
 205:Src/w25qxx.c  **** 			w25qxx.BlockCount=4;
 799              		.loc 1 205 21
 800 00d8 254B     		ldr	r3, .L54
 801 00da 0422     		movs	r2, #4
 802 00dc DA61     		str	r2, [r3, #28]
 206:Src/w25qxx.c  **** 			#if (_W25QXX_DEBUG==1)
 207:Src/w25qxx.c  **** 			printf("w25qxx Chip: w25q20\r\n");
 208:Src/w25qxx.c  **** 			#endif
 209:Src/w25qxx.c  **** 		break;
 803              		.loc 1 209 3
 804 00de 0CE0     		b	.L52
 805              	.L51:
 210:Src/w25qxx.c  **** 		case 0x4011:	//	w25q10
 211:Src/w25qxx.c  **** 			w25qxx.ID=W25Q10;
 806              		.loc 1 211 13
 807 00e0 234B     		ldr	r3, .L54
 808 00e2 0122     		movs	r2, #1
 809 00e4 1A70     		strb	r2, [r3]
 212:Src/w25qxx.c  **** 			w25qxx.BlockCount=2;
 810              		.loc 1 212 21
 811 00e6 224B     		ldr	r3, .L54
 812 00e8 0222     		movs	r2, #2
 813 00ea DA61     		str	r2, [r3, #28]
 213:Src/w25qxx.c  **** 			#if (_W25QXX_DEBUG==1)
 214:Src/w25qxx.c  **** 			printf("w25qxx Chip: w25q10\r\n");
 215:Src/w25qxx.c  **** 			#endif
 216:Src/w25qxx.c  **** 		break;
 814              		.loc 1 216 3
 815 00ec 05E0     		b	.L52
 816              	.L40:
 217:Src/w25qxx.c  **** 		default:
 218:Src/w25qxx.c  **** 				#if (_W25QXX_DEBUG==1)
 219:Src/w25qxx.c  **** 				printf("w25qxx Unknown ID\r\n");
 220:Src/w25qxx.c  **** 				#endif
 221:Src/w25qxx.c  **** 			w25qxx.Lock=0;	
 817              		.loc 1 221 15
 818 00ee 204B     		ldr	r3, .L54
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 19


 819 00f0 0022     		movs	r2, #0
 820 00f2 83F82720 		strb	r2, [r3, #39]
 222:Src/w25qxx.c  **** 			return false;
 821              		.loc 1 222 11
 822 00f6 0023     		movs	r3, #0
 823 00f8 36E0     		b	.L53
 824              	.L52:
 223:Src/w25qxx.c  **** 				
 224:Src/w25qxx.c  **** 	}		
 225:Src/w25qxx.c  **** 	w25qxx.PageSize=256;
 825              		.loc 1 225 17
 826 00fa 1D4B     		ldr	r3, .L54
 827 00fc 4FF48072 		mov	r2, #256
 828 0100 5A81     		strh	r2, [r3, #10]	@ movhi
 226:Src/w25qxx.c  **** 	w25qxx.SectorSize=0x1000;
 829              		.loc 1 226 19
 830 0102 1B4B     		ldr	r3, .L54
 831 0104 4FF48052 		mov	r2, #4096
 832 0108 1A61     		str	r2, [r3, #16]
 227:Src/w25qxx.c  **** 	w25qxx.SectorCount=w25qxx.BlockCount*16;
 833              		.loc 1 227 27
 834 010a 194B     		ldr	r3, .L54
 835 010c DB69     		ldr	r3, [r3, #28]
 836              		.loc 1 227 38
 837 010e 1B01     		lsls	r3, r3, #4
 838              		.loc 1 227 20
 839 0110 174A     		ldr	r2, .L54
 840 0112 5361     		str	r3, [r2, #20]
 228:Src/w25qxx.c  **** 	w25qxx.PageCount=(w25qxx.SectorCount*w25qxx.SectorSize)/w25qxx.PageSize;
 841              		.loc 1 228 26
 842 0114 164B     		ldr	r3, .L54
 843 0116 5B69     		ldr	r3, [r3, #20]
 844              		.loc 1 228 45
 845 0118 154A     		ldr	r2, .L54
 846 011a 1269     		ldr	r2, [r2, #16]
 847              		.loc 1 228 38
 848 011c 02FB03F3 		mul	r3, r2, r3
 849              		.loc 1 228 64
 850 0120 134A     		ldr	r2, .L54
 851 0122 5289     		ldrh	r2, [r2, #10]
 852              		.loc 1 228 57
 853 0124 B3FBF2F3 		udiv	r3, r3, r2
 854              		.loc 1 228 18
 855 0128 114A     		ldr	r2, .L54
 856 012a D360     		str	r3, [r2, #12]
 229:Src/w25qxx.c  **** 	w25qxx.BlockSize=w25qxx.SectorSize*16;
 857              		.loc 1 229 25
 858 012c 104B     		ldr	r3, .L54
 859 012e 1B69     		ldr	r3, [r3, #16]
 860              		.loc 1 229 36
 861 0130 1B01     		lsls	r3, r3, #4
 862              		.loc 1 229 18
 863 0132 0F4A     		ldr	r2, .L54
 864 0134 9361     		str	r3, [r2, #24]
 230:Src/w25qxx.c  **** 	w25qxx.CapacityInKiloByte=(w25qxx.SectorCount*w25qxx.SectorSize)/1024;
 865              		.loc 1 230 35
 866 0136 0E4B     		ldr	r3, .L54
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 20


 867 0138 5B69     		ldr	r3, [r3, #20]
 868              		.loc 1 230 54
 869 013a 0D4A     		ldr	r2, .L54
 870 013c 1269     		ldr	r2, [r2, #16]
 871              		.loc 1 230 47
 872 013e 02FB03F3 		mul	r3, r2, r3
 873              		.loc 1 230 66
 874 0142 9B0A     		lsrs	r3, r3, #10
 875              		.loc 1 230 27
 876 0144 0A4A     		ldr	r2, .L54
 877 0146 1362     		str	r3, [r2, #32]
 231:Src/w25qxx.c  **** 	W25qxx_ReadUniqID();
 878              		.loc 1 231 2
 879 0148 FFF7FEFF 		bl	W25qxx_ReadUniqID
 232:Src/w25qxx.c  **** 	W25qxx_ReadStatusRegister(1);
 880              		.loc 1 232 2
 881 014c 0120     		movs	r0, #1
 882 014e FFF7FEFF 		bl	W25qxx_ReadStatusRegister
 233:Src/w25qxx.c  **** 	W25qxx_ReadStatusRegister(2);
 883              		.loc 1 233 2
 884 0152 0220     		movs	r0, #2
 885 0154 FFF7FEFF 		bl	W25qxx_ReadStatusRegister
 234:Src/w25qxx.c  **** 	W25qxx_ReadStatusRegister(3);
 886              		.loc 1 234 2
 887 0158 0320     		movs	r0, #3
 888 015a FFF7FEFF 		bl	W25qxx_ReadStatusRegister
 235:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 236:Src/w25qxx.c  **** 	printf("w25qxx Page Size: %d Bytes\r\n",w25qxx.PageSize);
 237:Src/w25qxx.c  **** 	printf("w25qxx Page Count: %d\r\n",w25qxx.PageCount);
 238:Src/w25qxx.c  **** 	printf("w25qxx Sector Size: %d Bytes\r\n",w25qxx.SectorSize);
 239:Src/w25qxx.c  **** 	printf("w25qxx Sector Count: %d\r\n",w25qxx.SectorCount);
 240:Src/w25qxx.c  **** 	printf("w25qxx Block Size: %d Bytes\r\n",w25qxx.BlockSize);
 241:Src/w25qxx.c  **** 	printf("w25qxx Block Count: %d\r\n",w25qxx.BlockCount);
 242:Src/w25qxx.c  **** 	printf("w25qxx Capacity: %d KiloBytes\r\n",w25qxx.CapacityInKiloByte);
 243:Src/w25qxx.c  **** 	printf("w25qxx Init Done\r\n");
 244:Src/w25qxx.c  **** 	#endif
 245:Src/w25qxx.c  **** 	w25qxx.Lock=0;	
 889              		.loc 1 245 13
 890 015e 044B     		ldr	r3, .L54
 891 0160 0022     		movs	r2, #0
 892 0162 83F82720 		strb	r2, [r3, #39]
 246:Src/w25qxx.c  **** 	return true;
 893              		.loc 1 246 9
 894 0166 0123     		movs	r3, #1
 895              	.L53:
 247:Src/w25qxx.c  **** }	
 896              		.loc 1 247 1
 897 0168 1846     		mov	r0, r3
 898 016a 0837     		adds	r7, r7, #8
 899              	.LCFI34:
 900              		.cfi_def_cfa_offset 8
 901 016c BD46     		mov	sp, r7
 902              	.LCFI35:
 903              		.cfi_def_cfa_register 13
 904              		@ sp needed
 905 016e 80BD     		pop	{r7, pc}
 906              	.L55:
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 21


 907              		.align	2
 908              	.L54:
 909 0170 00000000 		.word	w25qxx
 910 0174 00080140 		.word	1073809408
 911              		.cfi_endproc
 912              	.LFE73:
 914              		.section	.text.W25qxx_EraseChip,"ax",%progbits
 915              		.align	1
 916              		.global	W25qxx_EraseChip
 917              		.syntax unified
 918              		.thumb
 919              		.thumb_func
 920              		.fpu softvfp
 922              	W25qxx_EraseChip:
 923              	.LFB74:
 248:Src/w25qxx.c  **** //#################################################################################################
 249:Src/w25qxx.c  **** void	W25qxx_EraseChip(void)
 250:Src/w25qxx.c  **** {
 924              		.loc 1 250 1
 925              		.cfi_startproc
 926              		@ args = 0, pretend = 0, frame = 0
 927              		@ frame_needed = 1, uses_anonymous_args = 0
 928 0000 80B5     		push	{r7, lr}
 929              	.LCFI36:
 930              		.cfi_def_cfa_offset 8
 931              		.cfi_offset 7, -8
 932              		.cfi_offset 14, -4
 933 0002 00AF     		add	r7, sp, #0
 934              	.LCFI37:
 935              		.cfi_def_cfa_register 7
 251:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 936              		.loc 1 251 7
 937 0004 02E0     		b	.L57
 938              	.L58:
 252:Src/w25qxx.c  **** 		W25qxx_Delay(1);
 939              		.loc 1 252 3
 940 0006 0120     		movs	r0, #1
 941 0008 FFF7FEFF 		bl	HAL_Delay
 942              	.L57:
 251:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 943              		.loc 1 251 14
 944 000c 114B     		ldr	r3, .L59
 945 000e 93F82730 		ldrb	r3, [r3, #39]	@ zero_extendqisi2
 251:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 946              		.loc 1 251 7
 947 0012 012B     		cmp	r3, #1
 948 0014 F7D0     		beq	.L58
 253:Src/w25qxx.c  **** 	w25qxx.Lock=1;	
 949              		.loc 1 253 13
 950 0016 0F4B     		ldr	r3, .L59
 951 0018 0122     		movs	r2, #1
 952 001a 83F82720 		strb	r2, [r3, #39]
 254:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 255:Src/w25qxx.c  **** 	uint32_t	StartTime=HAL_GetTick();	
 256:Src/w25qxx.c  **** 	printf("w25qxx EraseChip Begin...\r\n");
 257:Src/w25qxx.c  **** 	#endif
 258:Src/w25qxx.c  **** 	W25qxx_WriteEnable();
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 22


 953              		.loc 1 258 2
 954 001e FFF7FEFF 		bl	W25qxx_WriteEnable
 259:Src/w25qxx.c  **** 	HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_RESET);
 955              		.loc 1 259 2
 956 0022 0022     		movs	r2, #0
 957 0024 1021     		movs	r1, #16
 958 0026 0C48     		ldr	r0, .L59+4
 959 0028 FFF7FEFF 		bl	HAL_GPIO_WritePin
 260:Src/w25qxx.c  ****   W25qxx_Spi(0xC7);
 960              		.loc 1 260 3
 961 002c C720     		movs	r0, #199
 962 002e FFF7FEFF 		bl	W25qxx_Spi
 261:Src/w25qxx.c  ****   HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_SET);
 963              		.loc 1 261 3
 964 0032 0122     		movs	r2, #1
 965 0034 1021     		movs	r1, #16
 966 0036 0848     		ldr	r0, .L59+4
 967 0038 FFF7FEFF 		bl	HAL_GPIO_WritePin
 262:Src/w25qxx.c  **** 	W25qxx_WaitForWriteEnd();
 968              		.loc 1 262 2
 969 003c FFF7FEFF 		bl	W25qxx_WaitForWriteEnd
 263:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 264:Src/w25qxx.c  **** 	printf("w25qxx EraseBlock done after %d ms!\r\n",HAL_GetTick()-StartTime);
 265:Src/w25qxx.c  **** 	#endif
 266:Src/w25qxx.c  **** 	W25qxx_Delay(10);
 970              		.loc 1 266 2
 971 0040 0A20     		movs	r0, #10
 972 0042 FFF7FEFF 		bl	HAL_Delay
 267:Src/w25qxx.c  **** 	w25qxx.Lock=0;	
 973              		.loc 1 267 13
 974 0046 034B     		ldr	r3, .L59
 975 0048 0022     		movs	r2, #0
 976 004a 83F82720 		strb	r2, [r3, #39]
 268:Src/w25qxx.c  **** }
 977              		.loc 1 268 1
 978 004e 00BF     		nop
 979 0050 80BD     		pop	{r7, pc}
 980              	.L60:
 981 0052 00BF     		.align	2
 982              	.L59:
 983 0054 00000000 		.word	w25qxx
 984 0058 00080140 		.word	1073809408
 985              		.cfi_endproc
 986              	.LFE74:
 988              		.section	.text.W25qxx_EraseSector,"ax",%progbits
 989              		.align	1
 990              		.global	W25qxx_EraseSector
 991              		.syntax unified
 992              		.thumb
 993              		.thumb_func
 994              		.fpu softvfp
 996              	W25qxx_EraseSector:
 997              	.LFB75:
 269:Src/w25qxx.c  **** //#################################################################################################
 270:Src/w25qxx.c  **** void W25qxx_EraseSector(uint32_t SectorAddr)
 271:Src/w25qxx.c  **** {
 998              		.loc 1 271 1
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 23


 999              		.cfi_startproc
 1000              		@ args = 0, pretend = 0, frame = 8
 1001              		@ frame_needed = 1, uses_anonymous_args = 0
 1002 0000 80B5     		push	{r7, lr}
 1003              	.LCFI38:
 1004              		.cfi_def_cfa_offset 8
 1005              		.cfi_offset 7, -8
 1006              		.cfi_offset 14, -4
 1007 0002 82B0     		sub	sp, sp, #8
 1008              	.LCFI39:
 1009              		.cfi_def_cfa_offset 16
 1010 0004 00AF     		add	r7, sp, #0
 1011              	.LCFI40:
 1012              		.cfi_def_cfa_register 7
 1013 0006 7860     		str	r0, [r7, #4]
 272:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 1014              		.loc 1 272 7
 1015 0008 02E0     		b	.L62
 1016              	.L63:
 273:Src/w25qxx.c  **** 		W25qxx_Delay(1);
 1017              		.loc 1 273 3
 1018 000a 0120     		movs	r0, #1
 1019 000c FFF7FEFF 		bl	HAL_Delay
 1020              	.L62:
 272:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 1021              		.loc 1 272 14
 1022 0010 234B     		ldr	r3, .L65
 1023 0012 93F82730 		ldrb	r3, [r3, #39]	@ zero_extendqisi2
 272:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 1024              		.loc 1 272 7
 1025 0016 012B     		cmp	r3, #1
 1026 0018 F7D0     		beq	.L63
 274:Src/w25qxx.c  **** 	w25qxx.Lock=1;	
 1027              		.loc 1 274 13
 1028 001a 214B     		ldr	r3, .L65
 1029 001c 0122     		movs	r2, #1
 1030 001e 83F82720 		strb	r2, [r3, #39]
 275:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 276:Src/w25qxx.c  **** 	uint32_t	StartTime=HAL_GetTick();	
 277:Src/w25qxx.c  **** 	printf("w25qxx EraseSector %d Begin...\r\n",SectorAddr);
 278:Src/w25qxx.c  **** 	#endif
 279:Src/w25qxx.c  **** 	W25qxx_WaitForWriteEnd();
 1031              		.loc 1 279 2
 1032 0022 FFF7FEFF 		bl	W25qxx_WaitForWriteEnd
 280:Src/w25qxx.c  **** 	SectorAddr = SectorAddr * w25qxx.SectorSize;
 1033              		.loc 1 280 34
 1034 0026 1E4B     		ldr	r3, .L65
 1035 0028 1A69     		ldr	r2, [r3, #16]
 1036              		.loc 1 280 13
 1037 002a 7B68     		ldr	r3, [r7, #4]
 1038 002c 02FB03F3 		mul	r3, r2, r3
 1039 0030 7B60     		str	r3, [r7, #4]
 281:Src/w25qxx.c  ****   W25qxx_WriteEnable();
 1040              		.loc 1 281 3
 1041 0032 FFF7FEFF 		bl	W25qxx_WriteEnable
 282:Src/w25qxx.c  ****   HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_RESET);
 1042              		.loc 1 282 3
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 24


 1043 0036 0022     		movs	r2, #0
 1044 0038 1021     		movs	r1, #16
 1045 003a 1A48     		ldr	r0, .L65+4
 1046 003c FFF7FEFF 		bl	HAL_GPIO_WritePin
 283:Src/w25qxx.c  ****   W25qxx_Spi(0x20);
 1047              		.loc 1 283 3
 1048 0040 2020     		movs	r0, #32
 1049 0042 FFF7FEFF 		bl	W25qxx_Spi
 284:Src/w25qxx.c  **** 	if(w25qxx.ID>=W25Q256)
 1050              		.loc 1 284 11
 1051 0046 164B     		ldr	r3, .L65
 1052 0048 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1053              		.loc 1 284 4
 1054 004a 082B     		cmp	r3, #8
 1055 004c 05D9     		bls	.L64
 285:Src/w25qxx.c  **** 		W25qxx_Spi((SectorAddr & 0xFF000000) >> 24);
 1056              		.loc 1 285 40
 1057 004e 7B68     		ldr	r3, [r7, #4]
 1058 0050 1B0E     		lsrs	r3, r3, #24
 1059              		.loc 1 285 3
 1060 0052 DBB2     		uxtb	r3, r3
 1061 0054 1846     		mov	r0, r3
 1062 0056 FFF7FEFF 		bl	W25qxx_Spi
 1063              	.L64:
 286:Src/w25qxx.c  ****   W25qxx_Spi((SectorAddr & 0xFF0000) >> 16);
 1064              		.loc 1 286 38
 1065 005a 7B68     		ldr	r3, [r7, #4]
 1066 005c 1B0C     		lsrs	r3, r3, #16
 1067              		.loc 1 286 3
 1068 005e DBB2     		uxtb	r3, r3
 1069 0060 1846     		mov	r0, r3
 1070 0062 FFF7FEFF 		bl	W25qxx_Spi
 287:Src/w25qxx.c  ****   W25qxx_Spi((SectorAddr & 0xFF00) >> 8);
 1071              		.loc 1 287 36
 1072 0066 7B68     		ldr	r3, [r7, #4]
 1073 0068 1B0A     		lsrs	r3, r3, #8
 1074              		.loc 1 287 3
 1075 006a DBB2     		uxtb	r3, r3
 1076 006c 1846     		mov	r0, r3
 1077 006e FFF7FEFF 		bl	W25qxx_Spi
 288:Src/w25qxx.c  ****   W25qxx_Spi(SectorAddr & 0xFF);
 1078              		.loc 1 288 3
 1079 0072 7B68     		ldr	r3, [r7, #4]
 1080 0074 DBB2     		uxtb	r3, r3
 1081 0076 1846     		mov	r0, r3
 1082 0078 FFF7FEFF 		bl	W25qxx_Spi
 289:Src/w25qxx.c  **** 	HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_SET);
 1083              		.loc 1 289 2
 1084 007c 0122     		movs	r2, #1
 1085 007e 1021     		movs	r1, #16
 1086 0080 0848     		ldr	r0, .L65+4
 1087 0082 FFF7FEFF 		bl	HAL_GPIO_WritePin
 290:Src/w25qxx.c  ****   W25qxx_WaitForWriteEnd();
 1088              		.loc 1 290 3
 1089 0086 FFF7FEFF 		bl	W25qxx_WaitForWriteEnd
 291:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 292:Src/w25qxx.c  **** 	printf("w25qxx EraseSector done after %d ms\r\n",HAL_GetTick()-StartTime);
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 25


 293:Src/w25qxx.c  **** 	#endif
 294:Src/w25qxx.c  **** 	W25qxx_Delay(1);
 1090              		.loc 1 294 2
 1091 008a 0120     		movs	r0, #1
 1092 008c FFF7FEFF 		bl	HAL_Delay
 295:Src/w25qxx.c  **** 	w25qxx.Lock=0;
 1093              		.loc 1 295 13
 1094 0090 034B     		ldr	r3, .L65
 1095 0092 0022     		movs	r2, #0
 1096 0094 83F82720 		strb	r2, [r3, #39]
 296:Src/w25qxx.c  **** }
 1097              		.loc 1 296 1
 1098 0098 00BF     		nop
 1099 009a 0837     		adds	r7, r7, #8
 1100              	.LCFI41:
 1101              		.cfi_def_cfa_offset 8
 1102 009c BD46     		mov	sp, r7
 1103              	.LCFI42:
 1104              		.cfi_def_cfa_register 13
 1105              		@ sp needed
 1106 009e 80BD     		pop	{r7, pc}
 1107              	.L66:
 1108              		.align	2
 1109              	.L65:
 1110 00a0 00000000 		.word	w25qxx
 1111 00a4 00080140 		.word	1073809408
 1112              		.cfi_endproc
 1113              	.LFE75:
 1115              		.section	.text.W25qxx_EraseBlock,"ax",%progbits
 1116              		.align	1
 1117              		.global	W25qxx_EraseBlock
 1118              		.syntax unified
 1119              		.thumb
 1120              		.thumb_func
 1121              		.fpu softvfp
 1123              	W25qxx_EraseBlock:
 1124              	.LFB76:
 297:Src/w25qxx.c  **** //#################################################################################################
 298:Src/w25qxx.c  **** void W25qxx_EraseBlock(uint32_t BlockAddr)
 299:Src/w25qxx.c  **** {
 1125              		.loc 1 299 1
 1126              		.cfi_startproc
 1127              		@ args = 0, pretend = 0, frame = 8
 1128              		@ frame_needed = 1, uses_anonymous_args = 0
 1129 0000 80B5     		push	{r7, lr}
 1130              	.LCFI43:
 1131              		.cfi_def_cfa_offset 8
 1132              		.cfi_offset 7, -8
 1133              		.cfi_offset 14, -4
 1134 0002 82B0     		sub	sp, sp, #8
 1135              	.LCFI44:
 1136              		.cfi_def_cfa_offset 16
 1137 0004 00AF     		add	r7, sp, #0
 1138              	.LCFI45:
 1139              		.cfi_def_cfa_register 7
 1140 0006 7860     		str	r0, [r7, #4]
 300:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 26


 1141              		.loc 1 300 7
 1142 0008 02E0     		b	.L68
 1143              	.L69:
 301:Src/w25qxx.c  **** 		W25qxx_Delay(1);
 1144              		.loc 1 301 3
 1145 000a 0120     		movs	r0, #1
 1146 000c FFF7FEFF 		bl	HAL_Delay
 1147              	.L68:
 300:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 1148              		.loc 1 300 14
 1149 0010 244B     		ldr	r3, .L71
 1150 0012 93F82730 		ldrb	r3, [r3, #39]	@ zero_extendqisi2
 300:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 1151              		.loc 1 300 7
 1152 0016 012B     		cmp	r3, #1
 1153 0018 F7D0     		beq	.L69
 302:Src/w25qxx.c  **** 	w25qxx.Lock=1;	
 1154              		.loc 1 302 13
 1155 001a 224B     		ldr	r3, .L71
 1156 001c 0122     		movs	r2, #1
 1157 001e 83F82720 		strb	r2, [r3, #39]
 303:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 304:Src/w25qxx.c  **** 	printf("w25qxx EraseBlock %d Begin...\r\n",BlockAddr);
 305:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 306:Src/w25qxx.c  **** 	uint32_t	StartTime=HAL_GetTick();	
 307:Src/w25qxx.c  **** 	#endif
 308:Src/w25qxx.c  **** 	W25qxx_WaitForWriteEnd();
 1158              		.loc 1 308 2
 1159 0022 FFF7FEFF 		bl	W25qxx_WaitForWriteEnd
 309:Src/w25qxx.c  **** 	BlockAddr = BlockAddr * w25qxx.SectorSize*16;
 1160              		.loc 1 309 32
 1161 0026 1F4B     		ldr	r3, .L71
 1162 0028 1B69     		ldr	r3, [r3, #16]
 1163              		.loc 1 309 24
 1164 002a 7A68     		ldr	r2, [r7, #4]
 1165 002c 02FB03F3 		mul	r3, r2, r3
 1166              		.loc 1 309 12
 1167 0030 1B01     		lsls	r3, r3, #4
 1168 0032 7B60     		str	r3, [r7, #4]
 310:Src/w25qxx.c  ****   W25qxx_WriteEnable();
 1169              		.loc 1 310 3
 1170 0034 FFF7FEFF 		bl	W25qxx_WriteEnable
 311:Src/w25qxx.c  ****   HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_RESET);
 1171              		.loc 1 311 3
 1172 0038 0022     		movs	r2, #0
 1173 003a 1021     		movs	r1, #16
 1174 003c 1A48     		ldr	r0, .L71+4
 1175 003e FFF7FEFF 		bl	HAL_GPIO_WritePin
 312:Src/w25qxx.c  ****   W25qxx_Spi(0xD8);
 1176              		.loc 1 312 3
 1177 0042 D820     		movs	r0, #216
 1178 0044 FFF7FEFF 		bl	W25qxx_Spi
 313:Src/w25qxx.c  **** 	if(w25qxx.ID>=W25Q256)
 1179              		.loc 1 313 11
 1180 0048 164B     		ldr	r3, .L71
 1181 004a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1182              		.loc 1 313 4
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 27


 1183 004c 082B     		cmp	r3, #8
 1184 004e 05D9     		bls	.L70
 314:Src/w25qxx.c  **** 		W25qxx_Spi((BlockAddr & 0xFF000000) >> 24);
 1185              		.loc 1 314 39
 1186 0050 7B68     		ldr	r3, [r7, #4]
 1187 0052 1B0E     		lsrs	r3, r3, #24
 1188              		.loc 1 314 3
 1189 0054 DBB2     		uxtb	r3, r3
 1190 0056 1846     		mov	r0, r3
 1191 0058 FFF7FEFF 		bl	W25qxx_Spi
 1192              	.L70:
 315:Src/w25qxx.c  ****   W25qxx_Spi((BlockAddr & 0xFF0000) >> 16);
 1193              		.loc 1 315 37
 1194 005c 7B68     		ldr	r3, [r7, #4]
 1195 005e 1B0C     		lsrs	r3, r3, #16
 1196              		.loc 1 315 3
 1197 0060 DBB2     		uxtb	r3, r3
 1198 0062 1846     		mov	r0, r3
 1199 0064 FFF7FEFF 		bl	W25qxx_Spi
 316:Src/w25qxx.c  ****   W25qxx_Spi((BlockAddr & 0xFF00) >> 8);
 1200              		.loc 1 316 35
 1201 0068 7B68     		ldr	r3, [r7, #4]
 1202 006a 1B0A     		lsrs	r3, r3, #8
 1203              		.loc 1 316 3
 1204 006c DBB2     		uxtb	r3, r3
 1205 006e 1846     		mov	r0, r3
 1206 0070 FFF7FEFF 		bl	W25qxx_Spi
 317:Src/w25qxx.c  ****   W25qxx_Spi(BlockAddr & 0xFF);
 1207              		.loc 1 317 3
 1208 0074 7B68     		ldr	r3, [r7, #4]
 1209 0076 DBB2     		uxtb	r3, r3
 1210 0078 1846     		mov	r0, r3
 1211 007a FFF7FEFF 		bl	W25qxx_Spi
 318:Src/w25qxx.c  **** 	HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_SET);
 1212              		.loc 1 318 2
 1213 007e 0122     		movs	r2, #1
 1214 0080 1021     		movs	r1, #16
 1215 0082 0948     		ldr	r0, .L71+4
 1216 0084 FFF7FEFF 		bl	HAL_GPIO_WritePin
 319:Src/w25qxx.c  ****   W25qxx_WaitForWriteEnd();
 1217              		.loc 1 319 3
 1218 0088 FFF7FEFF 		bl	W25qxx_WaitForWriteEnd
 320:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 321:Src/w25qxx.c  **** 	printf("w25qxx EraseBlock done after %d ms\r\n",HAL_GetTick()-StartTime);
 322:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 323:Src/w25qxx.c  **** 	#endif
 324:Src/w25qxx.c  **** 	W25qxx_Delay(1);
 1219              		.loc 1 324 2
 1220 008c 0120     		movs	r0, #1
 1221 008e FFF7FEFF 		bl	HAL_Delay
 325:Src/w25qxx.c  **** 	w25qxx.Lock=0;
 1222              		.loc 1 325 13
 1223 0092 044B     		ldr	r3, .L71
 1224 0094 0022     		movs	r2, #0
 1225 0096 83F82720 		strb	r2, [r3, #39]
 326:Src/w25qxx.c  **** }
 1226              		.loc 1 326 1
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 28


 1227 009a 00BF     		nop
 1228 009c 0837     		adds	r7, r7, #8
 1229              	.LCFI46:
 1230              		.cfi_def_cfa_offset 8
 1231 009e BD46     		mov	sp, r7
 1232              	.LCFI47:
 1233              		.cfi_def_cfa_register 13
 1234              		@ sp needed
 1235 00a0 80BD     		pop	{r7, pc}
 1236              	.L72:
 1237 00a2 00BF     		.align	2
 1238              	.L71:
 1239 00a4 00000000 		.word	w25qxx
 1240 00a8 00080140 		.word	1073809408
 1241              		.cfi_endproc
 1242              	.LFE76:
 1244              		.section	.text.W25qxx_PageToSector,"ax",%progbits
 1245              		.align	1
 1246              		.global	W25qxx_PageToSector
 1247              		.syntax unified
 1248              		.thumb
 1249              		.thumb_func
 1250              		.fpu softvfp
 1252              	W25qxx_PageToSector:
 1253              	.LFB77:
 327:Src/w25qxx.c  **** //#################################################################################################
 328:Src/w25qxx.c  **** uint32_t	W25qxx_PageToSector(uint32_t	PageAddress)
 329:Src/w25qxx.c  **** {
 1254              		.loc 1 329 1
 1255              		.cfi_startproc
 1256              		@ args = 0, pretend = 0, frame = 8
 1257              		@ frame_needed = 1, uses_anonymous_args = 0
 1258              		@ link register save eliminated.
 1259 0000 80B4     		push	{r7}
 1260              	.LCFI48:
 1261              		.cfi_def_cfa_offset 4
 1262              		.cfi_offset 7, -4
 1263 0002 83B0     		sub	sp, sp, #12
 1264              	.LCFI49:
 1265              		.cfi_def_cfa_offset 16
 1266 0004 00AF     		add	r7, sp, #0
 1267              	.LCFI50:
 1268              		.cfi_def_cfa_register 7
 1269 0006 7860     		str	r0, [r7, #4]
 330:Src/w25qxx.c  **** 	return ((PageAddress*w25qxx.PageSize)/w25qxx.SectorSize);
 1270              		.loc 1 330 29
 1271 0008 074B     		ldr	r3, .L75
 1272 000a 5B89     		ldrh	r3, [r3, #10]
 1273 000c 1A46     		mov	r2, r3
 1274              		.loc 1 330 22
 1275 000e 7B68     		ldr	r3, [r7, #4]
 1276 0010 03FB02F2 		mul	r2, r3, r2
 1277              		.loc 1 330 46
 1278 0014 044B     		ldr	r3, .L75
 1279 0016 1B69     		ldr	r3, [r3, #16]
 1280              		.loc 1 330 39
 1281 0018 B2FBF3F3 		udiv	r3, r2, r3
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 29


 331:Src/w25qxx.c  **** }
 1282              		.loc 1 331 1
 1283 001c 1846     		mov	r0, r3
 1284 001e 0C37     		adds	r7, r7, #12
 1285              	.LCFI51:
 1286              		.cfi_def_cfa_offset 4
 1287 0020 BD46     		mov	sp, r7
 1288              	.LCFI52:
 1289              		.cfi_def_cfa_register 13
 1290              		@ sp needed
 1291 0022 80BC     		pop	{r7}
 1292              	.LCFI53:
 1293              		.cfi_restore 7
 1294              		.cfi_def_cfa_offset 0
 1295 0024 7047     		bx	lr
 1296              	.L76:
 1297 0026 00BF     		.align	2
 1298              	.L75:
 1299 0028 00000000 		.word	w25qxx
 1300              		.cfi_endproc
 1301              	.LFE77:
 1303              		.section	.text.W25qxx_PageToBlock,"ax",%progbits
 1304              		.align	1
 1305              		.global	W25qxx_PageToBlock
 1306              		.syntax unified
 1307              		.thumb
 1308              		.thumb_func
 1309              		.fpu softvfp
 1311              	W25qxx_PageToBlock:
 1312              	.LFB78:
 332:Src/w25qxx.c  **** //#################################################################################################
 333:Src/w25qxx.c  **** uint32_t	W25qxx_PageToBlock(uint32_t	PageAddress)
 334:Src/w25qxx.c  **** {
 1313              		.loc 1 334 1
 1314              		.cfi_startproc
 1315              		@ args = 0, pretend = 0, frame = 8
 1316              		@ frame_needed = 1, uses_anonymous_args = 0
 1317              		@ link register save eliminated.
 1318 0000 80B4     		push	{r7}
 1319              	.LCFI54:
 1320              		.cfi_def_cfa_offset 4
 1321              		.cfi_offset 7, -4
 1322 0002 83B0     		sub	sp, sp, #12
 1323              	.LCFI55:
 1324              		.cfi_def_cfa_offset 16
 1325 0004 00AF     		add	r7, sp, #0
 1326              	.LCFI56:
 1327              		.cfi_def_cfa_register 7
 1328 0006 7860     		str	r0, [r7, #4]
 335:Src/w25qxx.c  **** 	return ((PageAddress*w25qxx.PageSize)/w25qxx.BlockSize);
 1329              		.loc 1 335 29
 1330 0008 074B     		ldr	r3, .L79
 1331 000a 5B89     		ldrh	r3, [r3, #10]
 1332 000c 1A46     		mov	r2, r3
 1333              		.loc 1 335 22
 1334 000e 7B68     		ldr	r3, [r7, #4]
 1335 0010 03FB02F2 		mul	r2, r3, r2
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 30


 1336              		.loc 1 335 46
 1337 0014 044B     		ldr	r3, .L79
 1338 0016 9B69     		ldr	r3, [r3, #24]
 1339              		.loc 1 335 39
 1340 0018 B2FBF3F3 		udiv	r3, r2, r3
 336:Src/w25qxx.c  **** }
 1341              		.loc 1 336 1
 1342 001c 1846     		mov	r0, r3
 1343 001e 0C37     		adds	r7, r7, #12
 1344              	.LCFI57:
 1345              		.cfi_def_cfa_offset 4
 1346 0020 BD46     		mov	sp, r7
 1347              	.LCFI58:
 1348              		.cfi_def_cfa_register 13
 1349              		@ sp needed
 1350 0022 80BC     		pop	{r7}
 1351              	.LCFI59:
 1352              		.cfi_restore 7
 1353              		.cfi_def_cfa_offset 0
 1354 0024 7047     		bx	lr
 1355              	.L80:
 1356 0026 00BF     		.align	2
 1357              	.L79:
 1358 0028 00000000 		.word	w25qxx
 1359              		.cfi_endproc
 1360              	.LFE78:
 1362              		.section	.text.W25qxx_SectorToBlock,"ax",%progbits
 1363              		.align	1
 1364              		.global	W25qxx_SectorToBlock
 1365              		.syntax unified
 1366              		.thumb
 1367              		.thumb_func
 1368              		.fpu softvfp
 1370              	W25qxx_SectorToBlock:
 1371              	.LFB79:
 337:Src/w25qxx.c  **** //#################################################################################################
 338:Src/w25qxx.c  **** uint32_t	W25qxx_SectorToBlock(uint32_t	SectorAddress)
 339:Src/w25qxx.c  **** {
 1372              		.loc 1 339 1
 1373              		.cfi_startproc
 1374              		@ args = 0, pretend = 0, frame = 8
 1375              		@ frame_needed = 1, uses_anonymous_args = 0
 1376              		@ link register save eliminated.
 1377 0000 80B4     		push	{r7}
 1378              	.LCFI60:
 1379              		.cfi_def_cfa_offset 4
 1380              		.cfi_offset 7, -4
 1381 0002 83B0     		sub	sp, sp, #12
 1382              	.LCFI61:
 1383              		.cfi_def_cfa_offset 16
 1384 0004 00AF     		add	r7, sp, #0
 1385              	.LCFI62:
 1386              		.cfi_def_cfa_register 7
 1387 0006 7860     		str	r0, [r7, #4]
 340:Src/w25qxx.c  **** 	return ((SectorAddress*w25qxx.SectorSize)/w25qxx.BlockSize);
 1388              		.loc 1 340 31
 1389 0008 064B     		ldr	r3, .L83
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 31


 1390 000a 1B69     		ldr	r3, [r3, #16]
 1391              		.loc 1 340 24
 1392 000c 7A68     		ldr	r2, [r7, #4]
 1393 000e 02FB03F2 		mul	r2, r2, r3
 1394              		.loc 1 340 50
 1395 0012 044B     		ldr	r3, .L83
 1396 0014 9B69     		ldr	r3, [r3, #24]
 1397              		.loc 1 340 43
 1398 0016 B2FBF3F3 		udiv	r3, r2, r3
 341:Src/w25qxx.c  **** }
 1399              		.loc 1 341 1
 1400 001a 1846     		mov	r0, r3
 1401 001c 0C37     		adds	r7, r7, #12
 1402              	.LCFI63:
 1403              		.cfi_def_cfa_offset 4
 1404 001e BD46     		mov	sp, r7
 1405              	.LCFI64:
 1406              		.cfi_def_cfa_register 13
 1407              		@ sp needed
 1408 0020 80BC     		pop	{r7}
 1409              	.LCFI65:
 1410              		.cfi_restore 7
 1411              		.cfi_def_cfa_offset 0
 1412 0022 7047     		bx	lr
 1413              	.L84:
 1414              		.align	2
 1415              	.L83:
 1416 0024 00000000 		.word	w25qxx
 1417              		.cfi_endproc
 1418              	.LFE79:
 1420              		.section	.text.W25qxx_SectorToPage,"ax",%progbits
 1421              		.align	1
 1422              		.global	W25qxx_SectorToPage
 1423              		.syntax unified
 1424              		.thumb
 1425              		.thumb_func
 1426              		.fpu softvfp
 1428              	W25qxx_SectorToPage:
 1429              	.LFB80:
 342:Src/w25qxx.c  **** //#################################################################################################
 343:Src/w25qxx.c  **** uint32_t	W25qxx_SectorToPage(uint32_t	SectorAddress)
 344:Src/w25qxx.c  **** {
 1430              		.loc 1 344 1
 1431              		.cfi_startproc
 1432              		@ args = 0, pretend = 0, frame = 8
 1433              		@ frame_needed = 1, uses_anonymous_args = 0
 1434              		@ link register save eliminated.
 1435 0000 80B4     		push	{r7}
 1436              	.LCFI66:
 1437              		.cfi_def_cfa_offset 4
 1438              		.cfi_offset 7, -4
 1439 0002 83B0     		sub	sp, sp, #12
 1440              	.LCFI67:
 1441              		.cfi_def_cfa_offset 16
 1442 0004 00AF     		add	r7, sp, #0
 1443              	.LCFI68:
 1444              		.cfi_def_cfa_register 7
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 32


 1445 0006 7860     		str	r0, [r7, #4]
 345:Src/w25qxx.c  **** 	return (SectorAddress*w25qxx.SectorSize)/w25qxx.PageSize;
 1446              		.loc 1 345 30
 1447 0008 064B     		ldr	r3, .L87
 1448 000a 1B69     		ldr	r3, [r3, #16]
 1449              		.loc 1 345 23
 1450 000c 7A68     		ldr	r2, [r7, #4]
 1451 000e 02FB03F3 		mul	r3, r2, r3
 1452              		.loc 1 345 49
 1453 0012 044A     		ldr	r2, .L87
 1454 0014 5289     		ldrh	r2, [r2, #10]
 1455              		.loc 1 345 42
 1456 0016 B3FBF2F3 		udiv	r3, r3, r2
 346:Src/w25qxx.c  **** }
 1457              		.loc 1 346 1
 1458 001a 1846     		mov	r0, r3
 1459 001c 0C37     		adds	r7, r7, #12
 1460              	.LCFI69:
 1461              		.cfi_def_cfa_offset 4
 1462 001e BD46     		mov	sp, r7
 1463              	.LCFI70:
 1464              		.cfi_def_cfa_register 13
 1465              		@ sp needed
 1466 0020 80BC     		pop	{r7}
 1467              	.LCFI71:
 1468              		.cfi_restore 7
 1469              		.cfi_def_cfa_offset 0
 1470 0022 7047     		bx	lr
 1471              	.L88:
 1472              		.align	2
 1473              	.L87:
 1474 0024 00000000 		.word	w25qxx
 1475              		.cfi_endproc
 1476              	.LFE80:
 1478              		.section	.text.W25qxx_BlockToPage,"ax",%progbits
 1479              		.align	1
 1480              		.global	W25qxx_BlockToPage
 1481              		.syntax unified
 1482              		.thumb
 1483              		.thumb_func
 1484              		.fpu softvfp
 1486              	W25qxx_BlockToPage:
 1487              	.LFB81:
 347:Src/w25qxx.c  **** //#################################################################################################
 348:Src/w25qxx.c  **** uint32_t	W25qxx_BlockToPage(uint32_t	BlockAddress)
 349:Src/w25qxx.c  **** {
 1488              		.loc 1 349 1
 1489              		.cfi_startproc
 1490              		@ args = 0, pretend = 0, frame = 8
 1491              		@ frame_needed = 1, uses_anonymous_args = 0
 1492              		@ link register save eliminated.
 1493 0000 80B4     		push	{r7}
 1494              	.LCFI72:
 1495              		.cfi_def_cfa_offset 4
 1496              		.cfi_offset 7, -4
 1497 0002 83B0     		sub	sp, sp, #12
 1498              	.LCFI73:
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 33


 1499              		.cfi_def_cfa_offset 16
 1500 0004 00AF     		add	r7, sp, #0
 1501              	.LCFI74:
 1502              		.cfi_def_cfa_register 7
 1503 0006 7860     		str	r0, [r7, #4]
 350:Src/w25qxx.c  **** 	return (BlockAddress*w25qxx.BlockSize)/w25qxx.PageSize;
 1504              		.loc 1 350 29
 1505 0008 064B     		ldr	r3, .L91
 1506 000a 9B69     		ldr	r3, [r3, #24]
 1507              		.loc 1 350 22
 1508 000c 7A68     		ldr	r2, [r7, #4]
 1509 000e 02FB03F3 		mul	r3, r2, r3
 1510              		.loc 1 350 47
 1511 0012 044A     		ldr	r2, .L91
 1512 0014 5289     		ldrh	r2, [r2, #10]
 1513              		.loc 1 350 40
 1514 0016 B3FBF2F3 		udiv	r3, r3, r2
 351:Src/w25qxx.c  **** }
 1515              		.loc 1 351 1
 1516 001a 1846     		mov	r0, r3
 1517 001c 0C37     		adds	r7, r7, #12
 1518              	.LCFI75:
 1519              		.cfi_def_cfa_offset 4
 1520 001e BD46     		mov	sp, r7
 1521              	.LCFI76:
 1522              		.cfi_def_cfa_register 13
 1523              		@ sp needed
 1524 0020 80BC     		pop	{r7}
 1525              	.LCFI77:
 1526              		.cfi_restore 7
 1527              		.cfi_def_cfa_offset 0
 1528 0022 7047     		bx	lr
 1529              	.L92:
 1530              		.align	2
 1531              	.L91:
 1532 0024 00000000 		.word	w25qxx
 1533              		.cfi_endproc
 1534              	.LFE81:
 1536              		.section	.text.W25qxx_IsEmptyPage,"ax",%progbits
 1537              		.align	1
 1538              		.global	W25qxx_IsEmptyPage
 1539              		.syntax unified
 1540              		.thumb
 1541              		.thumb_func
 1542              		.fpu softvfp
 1544              	W25qxx_IsEmptyPage:
 1545              	.LFB82:
 352:Src/w25qxx.c  **** //#################################################################################################
 353:Src/w25qxx.c  **** bool 	W25qxx_IsEmptyPage(uint32_t Page_Address,uint32_t OffsetInByte,uint32_t NumByteToCheck_up_to_
 354:Src/w25qxx.c  **** {
 1546              		.loc 1 354 1
 1547              		.cfi_startproc
 1548              		@ args = 0, pretend = 0, frame = 64
 1549              		@ frame_needed = 1, uses_anonymous_args = 0
 1550 0000 80B5     		push	{r7, lr}
 1551              	.LCFI78:
 1552              		.cfi_def_cfa_offset 8
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 34


 1553              		.cfi_offset 7, -8
 1554              		.cfi_offset 14, -4
 1555 0002 90B0     		sub	sp, sp, #64
 1556              	.LCFI79:
 1557              		.cfi_def_cfa_offset 72
 1558 0004 00AF     		add	r7, sp, #0
 1559              	.LCFI80:
 1560              		.cfi_def_cfa_register 7
 1561 0006 F860     		str	r0, [r7, #12]
 1562 0008 B960     		str	r1, [r7, #8]
 1563 000a 7A60     		str	r2, [r7, #4]
 355:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 1564              		.loc 1 355 7
 1565 000c 02E0     		b	.L94
 1566              	.L95:
 356:Src/w25qxx.c  **** 	W25qxx_Delay(1);
 1567              		.loc 1 356 2
 1568 000e 0120     		movs	r0, #1
 1569 0010 FFF7FEFF 		bl	HAL_Delay
 1570              	.L94:
 355:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 1571              		.loc 1 355 14
 1572 0014 6D4B     		ldr	r3, .L114
 1573 0016 93F82730 		ldrb	r3, [r3, #39]	@ zero_extendqisi2
 355:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 1574              		.loc 1 355 7
 1575 001a 012B     		cmp	r3, #1
 1576 001c F7D0     		beq	.L95
 357:Src/w25qxx.c  **** 	w25qxx.Lock=1;	
 1577              		.loc 1 357 13
 1578 001e 6B4B     		ldr	r3, .L114
 1579 0020 0122     		movs	r2, #1
 1580 0022 83F82720 		strb	r2, [r3, #39]
 358:Src/w25qxx.c  **** 	if(((NumByteToCheck_up_to_PageSize+OffsetInByte)>w25qxx.PageSize)||(NumByteToCheck_up_to_PageSize=
 1581              		.loc 1 358 36
 1582 0026 7A68     		ldr	r2, [r7, #4]
 1583 0028 BB68     		ldr	r3, [r7, #8]
 1584 002a 1344     		add	r3, r3, r2
 1585              		.loc 1 358 57
 1586 002c 674A     		ldr	r2, .L114
 1587 002e 5289     		ldrh	r2, [r2, #10]
 1588              		.loc 1 358 4
 1589 0030 9342     		cmp	r3, r2
 1590 0032 02D8     		bhi	.L96
 1591              		.loc 1 358 67 discriminator 1
 1592 0034 7B68     		ldr	r3, [r7, #4]
 1593 0036 002B     		cmp	r3, #0
 1594 0038 05D1     		bne	.L97
 1595              	.L96:
 359:Src/w25qxx.c  **** 		NumByteToCheck_up_to_PageSize=w25qxx.PageSize-OffsetInByte;
 1596              		.loc 1 359 39
 1597 003a 644B     		ldr	r3, .L114
 1598 003c 5B89     		ldrh	r3, [r3, #10]
 1599 003e 1A46     		mov	r2, r3
 1600              		.loc 1 359 32
 1601 0040 BB68     		ldr	r3, [r7, #8]
 1602 0042 D31A     		subs	r3, r2, r3
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 35


 1603 0044 7B60     		str	r3, [r7, #4]
 1604              	.L97:
 360:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 361:Src/w25qxx.c  **** 	printf("w25qxx CheckPage:%d, Offset:%d, Bytes:%d begin...\r\n",Page_Address,OffsetInByte,NumByteTo
 362:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 363:Src/w25qxx.c  **** 	uint32_t	StartTime=HAL_GetTick();
 364:Src/w25qxx.c  **** 	#endif		
 365:Src/w25qxx.c  **** 	uint8_t	pBuffer[32];
 366:Src/w25qxx.c  **** 	uint32_t	WorkAddress;
 367:Src/w25qxx.c  **** 	uint32_t	i;
 368:Src/w25qxx.c  **** 	for(i=OffsetInByte; i<w25qxx.PageSize; i+=sizeof(pBuffer))
 1605              		.loc 1 368 7
 1606 0046 BB68     		ldr	r3, [r7, #8]
 1607 0048 FB63     		str	r3, [r7, #60]
 1608              		.loc 1 368 2
 1609 004a 53E0     		b	.L98
 1610              	.L104:
 369:Src/w25qxx.c  **** 	{
 370:Src/w25qxx.c  **** 		HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_RESET);
 1611              		.loc 1 370 3
 1612 004c 0022     		movs	r2, #0
 1613 004e 1021     		movs	r1, #16
 1614 0050 5F48     		ldr	r0, .L114+4
 1615 0052 FFF7FEFF 		bl	HAL_GPIO_WritePin
 371:Src/w25qxx.c  **** 		WorkAddress=(i+Page_Address*w25qxx.PageSize);
 1616              		.loc 1 371 37
 1617 0056 5D4B     		ldr	r3, .L114
 1618 0058 5B89     		ldrh	r3, [r3, #10]
 1619 005a 1A46     		mov	r2, r3
 1620              		.loc 1 371 30
 1621 005c FB68     		ldr	r3, [r7, #12]
 1622 005e 03FB02F3 		mul	r3, r3, r2
 1623              		.loc 1 371 14
 1624 0062 FA6B     		ldr	r2, [r7, #60]
 1625 0064 1344     		add	r3, r3, r2
 1626 0066 7B63     		str	r3, [r7, #52]
 372:Src/w25qxx.c  **** 		W25qxx_Spi(0x0B);
 1627              		.loc 1 372 3
 1628 0068 0B20     		movs	r0, #11
 1629 006a FFF7FEFF 		bl	W25qxx_Spi
 373:Src/w25qxx.c  **** 		if(w25qxx.ID>=W25Q256)
 1630              		.loc 1 373 12
 1631 006e 574B     		ldr	r3, .L114
 1632 0070 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1633              		.loc 1 373 5
 1634 0072 082B     		cmp	r3, #8
 1635 0074 05D9     		bls	.L99
 374:Src/w25qxx.c  **** 			W25qxx_Spi((WorkAddress & 0xFF000000) >> 24);
 1636              		.loc 1 374 42
 1637 0076 7B6B     		ldr	r3, [r7, #52]
 1638 0078 1B0E     		lsrs	r3, r3, #24
 1639              		.loc 1 374 4
 1640 007a DBB2     		uxtb	r3, r3
 1641 007c 1846     		mov	r0, r3
 1642 007e FFF7FEFF 		bl	W25qxx_Spi
 1643              	.L99:
 375:Src/w25qxx.c  **** 		W25qxx_Spi((WorkAddress & 0xFF0000) >> 16);
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 36


 1644              		.loc 1 375 39
 1645 0082 7B6B     		ldr	r3, [r7, #52]
 1646 0084 1B0C     		lsrs	r3, r3, #16
 1647              		.loc 1 375 3
 1648 0086 DBB2     		uxtb	r3, r3
 1649 0088 1846     		mov	r0, r3
 1650 008a FFF7FEFF 		bl	W25qxx_Spi
 376:Src/w25qxx.c  **** 		W25qxx_Spi((WorkAddress & 0xFF00) >> 8);
 1651              		.loc 1 376 37
 1652 008e 7B6B     		ldr	r3, [r7, #52]
 1653 0090 1B0A     		lsrs	r3, r3, #8
 1654              		.loc 1 376 3
 1655 0092 DBB2     		uxtb	r3, r3
 1656 0094 1846     		mov	r0, r3
 1657 0096 FFF7FEFF 		bl	W25qxx_Spi
 377:Src/w25qxx.c  **** 		W25qxx_Spi(WorkAddress & 0xFF);
 1658              		.loc 1 377 3
 1659 009a 7B6B     		ldr	r3, [r7, #52]
 1660 009c DBB2     		uxtb	r3, r3
 1661 009e 1846     		mov	r0, r3
 1662 00a0 FFF7FEFF 		bl	W25qxx_Spi
 378:Src/w25qxx.c  **** 		W25qxx_Spi(0);
 1663              		.loc 1 378 3
 1664 00a4 0020     		movs	r0, #0
 1665 00a6 FFF7FEFF 		bl	W25qxx_Spi
 379:Src/w25qxx.c  **** 		HAL_SPI_Receive(&_W25QXX_SPI,pBuffer,sizeof(pBuffer),100);	
 1666              		.loc 1 379 3
 1667 00aa 07F11401 		add	r1, r7, #20
 1668 00ae 6423     		movs	r3, #100
 1669 00b0 2022     		movs	r2, #32
 1670 00b2 4848     		ldr	r0, .L114+8
 1671 00b4 FFF7FEFF 		bl	HAL_SPI_Receive
 380:Src/w25qxx.c  **** 		HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_SET);	
 1672              		.loc 1 380 3
 1673 00b8 0122     		movs	r2, #1
 1674 00ba 1021     		movs	r1, #16
 1675 00bc 4448     		ldr	r0, .L114+4
 1676 00be FFF7FEFF 		bl	HAL_GPIO_WritePin
 1677              	.LBB4:
 381:Src/w25qxx.c  **** 		for(uint8_t x=0;x<sizeof(pBuffer);x++)
 1678              		.loc 1 381 15
 1679 00c2 0023     		movs	r3, #0
 1680 00c4 87F83B30 		strb	r3, [r7, #59]
 1681              		.loc 1 381 3
 1682 00c8 0DE0     		b	.L100
 1683              	.L103:
 382:Src/w25qxx.c  **** 		{
 383:Src/w25qxx.c  **** 			if(pBuffer[x]!=0xFF)
 1684              		.loc 1 383 14
 1685 00ca 97F83B30 		ldrb	r3, [r7, #59]	@ zero_extendqisi2
 1686 00ce 07F14002 		add	r2, r7, #64
 1687 00d2 1344     		add	r3, r3, r2
 1688 00d4 13F82C3C 		ldrb	r3, [r3, #-44]	@ zero_extendqisi2
 1689              		.loc 1 383 6
 1690 00d8 FF2B     		cmp	r3, #255
 1691 00da 6BD1     		bne	.L112
 381:Src/w25qxx.c  **** 		for(uint8_t x=0;x<sizeof(pBuffer);x++)
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 37


 1692              		.loc 1 381 38 discriminator 2
 1693 00dc 97F83B30 		ldrb	r3, [r7, #59]	@ zero_extendqisi2
 1694 00e0 0133     		adds	r3, r3, #1
 1695 00e2 87F83B30 		strb	r3, [r7, #59]
 1696              	.L100:
 381:Src/w25qxx.c  **** 		for(uint8_t x=0;x<sizeof(pBuffer);x++)
 1697              		.loc 1 381 3 discriminator 1
 1698 00e6 97F83B30 		ldrb	r3, [r7, #59]	@ zero_extendqisi2
 1699 00ea 1F2B     		cmp	r3, #31
 1700 00ec EDD9     		bls	.L103
 1701              	.LBE4:
 368:Src/w25qxx.c  **** 	{
 1702              		.loc 1 368 42 discriminator 2
 1703 00ee FB6B     		ldr	r3, [r7, #60]
 1704 00f0 2033     		adds	r3, r3, #32
 1705 00f2 FB63     		str	r3, [r7, #60]
 1706              	.L98:
 368:Src/w25qxx.c  **** 	{
 1707              		.loc 1 368 30 discriminator 1
 1708 00f4 354B     		ldr	r3, .L114
 1709 00f6 5B89     		ldrh	r3, [r3, #10]
 1710 00f8 1A46     		mov	r2, r3
 368:Src/w25qxx.c  **** 	{
 1711              		.loc 1 368 2 discriminator 1
 1712 00fa FB6B     		ldr	r3, [r7, #60]
 1713 00fc 9342     		cmp	r3, r2
 1714 00fe A5D3     		bcc	.L104
 384:Src/w25qxx.c  **** 				goto NOT_EMPTY;		
 385:Src/w25qxx.c  **** 		}			
 386:Src/w25qxx.c  **** 	}	
 387:Src/w25qxx.c  **** 	if((w25qxx.PageSize+OffsetInByte)%sizeof(pBuffer)!=0)
 1715              		.loc 1 387 12
 1716 0100 324B     		ldr	r3, .L114
 1717 0102 5B89     		ldrh	r3, [r3, #10]
 1718 0104 1A46     		mov	r2, r3
 1719              		.loc 1 387 21
 1720 0106 BB68     		ldr	r3, [r7, #8]
 1721 0108 1344     		add	r3, r3, r2
 1722              		.loc 1 387 35
 1723 010a 03F01F03 		and	r3, r3, #31
 1724              		.loc 1 387 4
 1725 010e 002B     		cmp	r3, #0
 1726 0110 4AD0     		beq	.L105
 388:Src/w25qxx.c  **** 	{
 389:Src/w25qxx.c  **** 		i-=sizeof(pBuffer);
 1727              		.loc 1 389 4
 1728 0112 FB6B     		ldr	r3, [r7, #60]
 1729 0114 203B     		subs	r3, r3, #32
 1730 0116 FB63     		str	r3, [r7, #60]
 390:Src/w25qxx.c  **** 		for( ; i<w25qxx.PageSize; i++)
 1731              		.loc 1 390 3
 1732 0118 40E0     		b	.L106
 1733              	.L109:
 391:Src/w25qxx.c  **** 		{
 392:Src/w25qxx.c  **** 			HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_RESET);
 1734              		.loc 1 392 4
 1735 011a 0022     		movs	r2, #0
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 38


 1736 011c 1021     		movs	r1, #16
 1737 011e 2C48     		ldr	r0, .L114+4
 1738 0120 FFF7FEFF 		bl	HAL_GPIO_WritePin
 393:Src/w25qxx.c  **** 			WorkAddress=(i+Page_Address*w25qxx.PageSize);
 1739              		.loc 1 393 38
 1740 0124 294B     		ldr	r3, .L114
 1741 0126 5B89     		ldrh	r3, [r3, #10]
 1742 0128 1A46     		mov	r2, r3
 1743              		.loc 1 393 31
 1744 012a FB68     		ldr	r3, [r7, #12]
 1745 012c 03FB02F3 		mul	r3, r3, r2
 1746              		.loc 1 393 15
 1747 0130 FA6B     		ldr	r2, [r7, #60]
 1748 0132 1344     		add	r3, r3, r2
 1749 0134 7B63     		str	r3, [r7, #52]
 394:Src/w25qxx.c  **** 			W25qxx_Spi(0x0B);
 1750              		.loc 1 394 4
 1751 0136 0B20     		movs	r0, #11
 1752 0138 FFF7FEFF 		bl	W25qxx_Spi
 395:Src/w25qxx.c  **** 			if(w25qxx.ID>=W25Q256)
 1753              		.loc 1 395 13
 1754 013c 234B     		ldr	r3, .L114
 1755 013e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1756              		.loc 1 395 6
 1757 0140 082B     		cmp	r3, #8
 1758 0142 05D9     		bls	.L107
 396:Src/w25qxx.c  **** 				W25qxx_Spi((WorkAddress & 0xFF000000) >> 24);
 1759              		.loc 1 396 43
 1760 0144 7B6B     		ldr	r3, [r7, #52]
 1761 0146 1B0E     		lsrs	r3, r3, #24
 1762              		.loc 1 396 5
 1763 0148 DBB2     		uxtb	r3, r3
 1764 014a 1846     		mov	r0, r3
 1765 014c FFF7FEFF 		bl	W25qxx_Spi
 1766              	.L107:
 397:Src/w25qxx.c  **** 			W25qxx_Spi((WorkAddress & 0xFF0000) >> 16);
 1767              		.loc 1 397 40
 1768 0150 7B6B     		ldr	r3, [r7, #52]
 1769 0152 1B0C     		lsrs	r3, r3, #16
 1770              		.loc 1 397 4
 1771 0154 DBB2     		uxtb	r3, r3
 1772 0156 1846     		mov	r0, r3
 1773 0158 FFF7FEFF 		bl	W25qxx_Spi
 398:Src/w25qxx.c  **** 			W25qxx_Spi((WorkAddress & 0xFF00) >> 8);
 1774              		.loc 1 398 38
 1775 015c 7B6B     		ldr	r3, [r7, #52]
 1776 015e 1B0A     		lsrs	r3, r3, #8
 1777              		.loc 1 398 4
 1778 0160 DBB2     		uxtb	r3, r3
 1779 0162 1846     		mov	r0, r3
 1780 0164 FFF7FEFF 		bl	W25qxx_Spi
 399:Src/w25qxx.c  **** 			W25qxx_Spi(WorkAddress & 0xFF);
 1781              		.loc 1 399 4
 1782 0168 7B6B     		ldr	r3, [r7, #52]
 1783 016a DBB2     		uxtb	r3, r3
 1784 016c 1846     		mov	r0, r3
 1785 016e FFF7FEFF 		bl	W25qxx_Spi
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 39


 400:Src/w25qxx.c  **** 			W25qxx_Spi(0);
 1786              		.loc 1 400 4
 1787 0172 0020     		movs	r0, #0
 1788 0174 FFF7FEFF 		bl	W25qxx_Spi
 401:Src/w25qxx.c  **** 			HAL_SPI_Receive(&_W25QXX_SPI,pBuffer,1,100);	
 1789              		.loc 1 401 4
 1790 0178 07F11401 		add	r1, r7, #20
 1791 017c 6423     		movs	r3, #100
 1792 017e 0122     		movs	r2, #1
 1793 0180 1448     		ldr	r0, .L114+8
 1794 0182 FFF7FEFF 		bl	HAL_SPI_Receive
 402:Src/w25qxx.c  **** 			HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_SET);	
 1795              		.loc 1 402 4
 1796 0186 0122     		movs	r2, #1
 1797 0188 1021     		movs	r1, #16
 1798 018a 1148     		ldr	r0, .L114+4
 1799 018c FFF7FEFF 		bl	HAL_GPIO_WritePin
 403:Src/w25qxx.c  **** 			if(pBuffer[0]!=0xFF)
 1800              		.loc 1 403 14
 1801 0190 3B7D     		ldrb	r3, [r7, #20]	@ zero_extendqisi2
 1802              		.loc 1 403 6
 1803 0192 FF2B     		cmp	r3, #255
 1804 0194 10D1     		bne	.L113
 390:Src/w25qxx.c  **** 		{
 1805              		.loc 1 390 30
 1806 0196 FB6B     		ldr	r3, [r7, #60]
 1807 0198 0133     		adds	r3, r3, #1
 1808 019a FB63     		str	r3, [r7, #60]
 1809              	.L106:
 390:Src/w25qxx.c  **** 		{
 1810              		.loc 1 390 18 discriminator 1
 1811 019c 0B4B     		ldr	r3, .L114
 1812 019e 5B89     		ldrh	r3, [r3, #10]
 1813 01a0 1A46     		mov	r2, r3
 390:Src/w25qxx.c  **** 		{
 1814              		.loc 1 390 3 discriminator 1
 1815 01a2 FB6B     		ldr	r3, [r7, #60]
 1816 01a4 9342     		cmp	r3, r2
 1817 01a6 B8D3     		bcc	.L109
 1818              	.L105:
 404:Src/w25qxx.c  **** 				goto NOT_EMPTY;
 405:Src/w25qxx.c  **** 		}
 406:Src/w25qxx.c  **** 	}	
 407:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 408:Src/w25qxx.c  **** 	printf("w25qxx CheckPage is Empty in %d ms\r\n",HAL_GetTick()-StartTime);
 409:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 410:Src/w25qxx.c  **** 	#endif	
 411:Src/w25qxx.c  **** 	w25qxx.Lock=0;
 1819              		.loc 1 411 13
 1820 01a8 084B     		ldr	r3, .L114
 1821 01aa 0022     		movs	r2, #0
 1822 01ac 83F82720 		strb	r2, [r3, #39]
 412:Src/w25qxx.c  **** 	return true;	
 1823              		.loc 1 412 9
 1824 01b0 0123     		movs	r3, #1
 1825 01b2 07E0     		b	.L111
 1826              	.L112:
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 40


 1827              	.LBB5:
 384:Src/w25qxx.c  **** 		}			
 1828              		.loc 1 384 5
 1829 01b4 00BF     		nop
 1830 01b6 00E0     		b	.L102
 1831              	.L113:
 1832              	.LBE5:
 404:Src/w25qxx.c  **** 				goto NOT_EMPTY;
 1833              		.loc 1 404 5
 1834 01b8 00BF     		nop
 1835              	.L102:
 413:Src/w25qxx.c  **** 	NOT_EMPTY:
 414:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 415:Src/w25qxx.c  **** 	printf("w25qxx CheckPage is Not Empty in %d ms\r\n",HAL_GetTick()-StartTime);
 416:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 417:Src/w25qxx.c  **** 	#endif	
 418:Src/w25qxx.c  **** 	w25qxx.Lock=0;
 1836              		.loc 1 418 13
 1837 01ba 044B     		ldr	r3, .L114
 1838 01bc 0022     		movs	r2, #0
 1839 01be 83F82720 		strb	r2, [r3, #39]
 419:Src/w25qxx.c  **** 	return false;
 1840              		.loc 1 419 9
 1841 01c2 0023     		movs	r3, #0
 1842              	.L111:
 420:Src/w25qxx.c  **** }
 1843              		.loc 1 420 1 discriminator 1
 1844 01c4 1846     		mov	r0, r3
 1845 01c6 4037     		adds	r7, r7, #64
 1846              	.LCFI81:
 1847              		.cfi_def_cfa_offset 8
 1848 01c8 BD46     		mov	sp, r7
 1849              	.LCFI82:
 1850              		.cfi_def_cfa_register 13
 1851              		@ sp needed
 1852 01ca 80BD     		pop	{r7, pc}
 1853              	.L115:
 1854              		.align	2
 1855              	.L114:
 1856 01cc 00000000 		.word	w25qxx
 1857 01d0 00080140 		.word	1073809408
 1858 01d4 00000000 		.word	hspi1
 1859              		.cfi_endproc
 1860              	.LFE82:
 1862              		.section	.text.W25qxx_IsEmptySector,"ax",%progbits
 1863              		.align	1
 1864              		.global	W25qxx_IsEmptySector
 1865              		.syntax unified
 1866              		.thumb
 1867              		.thumb_func
 1868              		.fpu softvfp
 1870              	W25qxx_IsEmptySector:
 1871              	.LFB83:
 421:Src/w25qxx.c  **** //#################################################################################################
 422:Src/w25qxx.c  **** bool 	W25qxx_IsEmptySector(uint32_t Sector_Address,uint32_t OffsetInByte,uint32_t NumByteToCheck_up
 423:Src/w25qxx.c  **** {
 1872              		.loc 1 423 1
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 41


 1873              		.cfi_startproc
 1874              		@ args = 0, pretend = 0, frame = 64
 1875              		@ frame_needed = 1, uses_anonymous_args = 0
 1876 0000 80B5     		push	{r7, lr}
 1877              	.LCFI83:
 1878              		.cfi_def_cfa_offset 8
 1879              		.cfi_offset 7, -8
 1880              		.cfi_offset 14, -4
 1881 0002 90B0     		sub	sp, sp, #64
 1882              	.LCFI84:
 1883              		.cfi_def_cfa_offset 72
 1884 0004 00AF     		add	r7, sp, #0
 1885              	.LCFI85:
 1886              		.cfi_def_cfa_register 7
 1887 0006 F860     		str	r0, [r7, #12]
 1888 0008 B960     		str	r1, [r7, #8]
 1889 000a 7A60     		str	r2, [r7, #4]
 424:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 1890              		.loc 1 424 7
 1891 000c 02E0     		b	.L117
 1892              	.L118:
 425:Src/w25qxx.c  **** 	W25qxx_Delay(1);
 1893              		.loc 1 425 2
 1894 000e 0120     		movs	r0, #1
 1895 0010 FFF7FEFF 		bl	HAL_Delay
 1896              	.L117:
 424:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 1897              		.loc 1 424 14
 1898 0014 684B     		ldr	r3, .L137
 1899 0016 93F82730 		ldrb	r3, [r3, #39]	@ zero_extendqisi2
 424:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 1900              		.loc 1 424 7
 1901 001a 012B     		cmp	r3, #1
 1902 001c F7D0     		beq	.L118
 426:Src/w25qxx.c  **** 	w25qxx.Lock=1;	
 1903              		.loc 1 426 13
 1904 001e 664B     		ldr	r3, .L137
 1905 0020 0122     		movs	r2, #1
 1906 0022 83F82720 		strb	r2, [r3, #39]
 427:Src/w25qxx.c  **** 	if((NumByteToCheck_up_to_SectorSize>w25qxx.SectorSize)||(NumByteToCheck_up_to_SectorSize==0))
 1907              		.loc 1 427 44
 1908 0026 644B     		ldr	r3, .L137
 1909 0028 1B69     		ldr	r3, [r3, #16]
 1910              		.loc 1 427 4
 1911 002a 7A68     		ldr	r2, [r7, #4]
 1912 002c 9A42     		cmp	r2, r3
 1913 002e 02D8     		bhi	.L119
 1914              		.loc 1 427 56 discriminator 1
 1915 0030 7B68     		ldr	r3, [r7, #4]
 1916 0032 002B     		cmp	r3, #0
 1917 0034 02D1     		bne	.L120
 1918              	.L119:
 428:Src/w25qxx.c  **** 		NumByteToCheck_up_to_SectorSize=w25qxx.SectorSize;
 1919              		.loc 1 428 34
 1920 0036 604B     		ldr	r3, .L137
 1921 0038 1B69     		ldr	r3, [r3, #16]
 1922 003a 7B60     		str	r3, [r7, #4]
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 42


 1923              	.L120:
 429:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 430:Src/w25qxx.c  **** 	printf("w25qxx CheckSector:%d, Offset:%d, Bytes:%d begin...\r\n",Sector_Address,OffsetInByte,NumBy
 431:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 432:Src/w25qxx.c  **** 	uint32_t	StartTime=HAL_GetTick();
 433:Src/w25qxx.c  **** 	#endif		
 434:Src/w25qxx.c  **** 	uint8_t	pBuffer[32];
 435:Src/w25qxx.c  **** 	uint32_t	WorkAddress;
 436:Src/w25qxx.c  **** 	uint32_t	i;
 437:Src/w25qxx.c  **** 	for(i=OffsetInByte; i<w25qxx.SectorSize; i+=sizeof(pBuffer))
 1924              		.loc 1 437 7
 1925 003c BB68     		ldr	r3, [r7, #8]
 1926 003e FB63     		str	r3, [r7, #60]
 1927              		.loc 1 437 2
 1928 0040 52E0     		b	.L121
 1929              	.L127:
 438:Src/w25qxx.c  **** 	{
 439:Src/w25qxx.c  **** 		HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_RESET);
 1930              		.loc 1 439 3
 1931 0042 0022     		movs	r2, #0
 1932 0044 1021     		movs	r1, #16
 1933 0046 5D48     		ldr	r0, .L137+4
 1934 0048 FFF7FEFF 		bl	HAL_GPIO_WritePin
 440:Src/w25qxx.c  **** 		WorkAddress=(i+Sector_Address*w25qxx.SectorSize);
 1935              		.loc 1 440 39
 1936 004c 5A4B     		ldr	r3, .L137
 1937 004e 1B69     		ldr	r3, [r3, #16]
 1938              		.loc 1 440 32
 1939 0050 FA68     		ldr	r2, [r7, #12]
 1940 0052 02FB03F3 		mul	r3, r2, r3
 1941              		.loc 1 440 14
 1942 0056 FA6B     		ldr	r2, [r7, #60]
 1943 0058 1344     		add	r3, r3, r2
 1944 005a 7B63     		str	r3, [r7, #52]
 441:Src/w25qxx.c  **** 		W25qxx_Spi(0x0B);
 1945              		.loc 1 441 3
 1946 005c 0B20     		movs	r0, #11
 1947 005e FFF7FEFF 		bl	W25qxx_Spi
 442:Src/w25qxx.c  **** 		if(w25qxx.ID>=W25Q256)
 1948              		.loc 1 442 12
 1949 0062 554B     		ldr	r3, .L137
 1950 0064 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1951              		.loc 1 442 5
 1952 0066 082B     		cmp	r3, #8
 1953 0068 05D9     		bls	.L122
 443:Src/w25qxx.c  **** 			W25qxx_Spi((WorkAddress & 0xFF000000) >> 24);
 1954              		.loc 1 443 42
 1955 006a 7B6B     		ldr	r3, [r7, #52]
 1956 006c 1B0E     		lsrs	r3, r3, #24
 1957              		.loc 1 443 4
 1958 006e DBB2     		uxtb	r3, r3
 1959 0070 1846     		mov	r0, r3
 1960 0072 FFF7FEFF 		bl	W25qxx_Spi
 1961              	.L122:
 444:Src/w25qxx.c  **** 		W25qxx_Spi((WorkAddress & 0xFF0000) >> 16);
 1962              		.loc 1 444 39
 1963 0076 7B6B     		ldr	r3, [r7, #52]
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 43


 1964 0078 1B0C     		lsrs	r3, r3, #16
 1965              		.loc 1 444 3
 1966 007a DBB2     		uxtb	r3, r3
 1967 007c 1846     		mov	r0, r3
 1968 007e FFF7FEFF 		bl	W25qxx_Spi
 445:Src/w25qxx.c  **** 		W25qxx_Spi((WorkAddress & 0xFF00) >> 8);
 1969              		.loc 1 445 37
 1970 0082 7B6B     		ldr	r3, [r7, #52]
 1971 0084 1B0A     		lsrs	r3, r3, #8
 1972              		.loc 1 445 3
 1973 0086 DBB2     		uxtb	r3, r3
 1974 0088 1846     		mov	r0, r3
 1975 008a FFF7FEFF 		bl	W25qxx_Spi
 446:Src/w25qxx.c  **** 		W25qxx_Spi(WorkAddress & 0xFF);
 1976              		.loc 1 446 3
 1977 008e 7B6B     		ldr	r3, [r7, #52]
 1978 0090 DBB2     		uxtb	r3, r3
 1979 0092 1846     		mov	r0, r3
 1980 0094 FFF7FEFF 		bl	W25qxx_Spi
 447:Src/w25qxx.c  **** 		W25qxx_Spi(0);
 1981              		.loc 1 447 3
 1982 0098 0020     		movs	r0, #0
 1983 009a FFF7FEFF 		bl	W25qxx_Spi
 448:Src/w25qxx.c  **** 		HAL_SPI_Receive(&_W25QXX_SPI,pBuffer,sizeof(pBuffer),100);	
 1984              		.loc 1 448 3
 1985 009e 07F11401 		add	r1, r7, #20
 1986 00a2 6423     		movs	r3, #100
 1987 00a4 2022     		movs	r2, #32
 1988 00a6 4648     		ldr	r0, .L137+8
 1989 00a8 FFF7FEFF 		bl	HAL_SPI_Receive
 449:Src/w25qxx.c  **** 		HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_SET);	
 1990              		.loc 1 449 3
 1991 00ac 0122     		movs	r2, #1
 1992 00ae 1021     		movs	r1, #16
 1993 00b0 4248     		ldr	r0, .L137+4
 1994 00b2 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1995              	.LBB6:
 450:Src/w25qxx.c  **** 		for(uint8_t x=0;x<sizeof(pBuffer);x++)
 1996              		.loc 1 450 15
 1997 00b6 0023     		movs	r3, #0
 1998 00b8 87F83B30 		strb	r3, [r7, #59]
 1999              		.loc 1 450 3
 2000 00bc 0DE0     		b	.L123
 2001              	.L126:
 451:Src/w25qxx.c  **** 		{
 452:Src/w25qxx.c  **** 			if(pBuffer[x]!=0xFF)
 2002              		.loc 1 452 14
 2003 00be 97F83B30 		ldrb	r3, [r7, #59]	@ zero_extendqisi2
 2004 00c2 07F14002 		add	r2, r7, #64
 2005 00c6 1344     		add	r3, r3, r2
 2006 00c8 13F82C3C 		ldrb	r3, [r3, #-44]	@ zero_extendqisi2
 2007              		.loc 1 452 6
 2008 00cc FF2B     		cmp	r3, #255
 2009 00ce 67D1     		bne	.L135
 450:Src/w25qxx.c  **** 		for(uint8_t x=0;x<sizeof(pBuffer);x++)
 2010              		.loc 1 450 38 discriminator 2
 2011 00d0 97F83B30 		ldrb	r3, [r7, #59]	@ zero_extendqisi2
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 44


 2012 00d4 0133     		adds	r3, r3, #1
 2013 00d6 87F83B30 		strb	r3, [r7, #59]
 2014              	.L123:
 450:Src/w25qxx.c  **** 		for(uint8_t x=0;x<sizeof(pBuffer);x++)
 2015              		.loc 1 450 3 discriminator 1
 2016 00da 97F83B30 		ldrb	r3, [r7, #59]	@ zero_extendqisi2
 2017 00de 1F2B     		cmp	r3, #31
 2018 00e0 EDD9     		bls	.L126
 2019              	.LBE6:
 437:Src/w25qxx.c  **** 	{
 2020              		.loc 1 437 44 discriminator 2
 2021 00e2 FB6B     		ldr	r3, [r7, #60]
 2022 00e4 2033     		adds	r3, r3, #32
 2023 00e6 FB63     		str	r3, [r7, #60]
 2024              	.L121:
 437:Src/w25qxx.c  **** 	{
 2025              		.loc 1 437 30 discriminator 1
 2026 00e8 334B     		ldr	r3, .L137
 2027 00ea 1B69     		ldr	r3, [r3, #16]
 437:Src/w25qxx.c  **** 	{
 2028              		.loc 1 437 2 discriminator 1
 2029 00ec FA6B     		ldr	r2, [r7, #60]
 2030 00ee 9A42     		cmp	r2, r3
 2031 00f0 A7D3     		bcc	.L127
 453:Src/w25qxx.c  **** 				goto NOT_EMPTY;		
 454:Src/w25qxx.c  **** 		}			
 455:Src/w25qxx.c  **** 	}	
 456:Src/w25qxx.c  **** 	if((w25qxx.SectorSize+OffsetInByte)%sizeof(pBuffer)!=0)
 2032              		.loc 1 456 12
 2033 00f2 314B     		ldr	r3, .L137
 2034 00f4 1A69     		ldr	r2, [r3, #16]
 2035              		.loc 1 456 23
 2036 00f6 BB68     		ldr	r3, [r7, #8]
 2037 00f8 1344     		add	r3, r3, r2
 2038              		.loc 1 456 37
 2039 00fa 03F01F03 		and	r3, r3, #31
 2040              		.loc 1 456 4
 2041 00fe 002B     		cmp	r3, #0
 2042 0100 48D0     		beq	.L128
 457:Src/w25qxx.c  **** 	{
 458:Src/w25qxx.c  **** 		i-=sizeof(pBuffer);
 2043              		.loc 1 458 4
 2044 0102 FB6B     		ldr	r3, [r7, #60]
 2045 0104 203B     		subs	r3, r3, #32
 2046 0106 FB63     		str	r3, [r7, #60]
 459:Src/w25qxx.c  **** 		for( ; i<w25qxx.SectorSize; i++)
 2047              		.loc 1 459 3
 2048 0108 3FE0     		b	.L129
 2049              	.L132:
 460:Src/w25qxx.c  **** 		{
 461:Src/w25qxx.c  **** 			HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_RESET);
 2050              		.loc 1 461 4
 2051 010a 0022     		movs	r2, #0
 2052 010c 1021     		movs	r1, #16
 2053 010e 2B48     		ldr	r0, .L137+4
 2054 0110 FFF7FEFF 		bl	HAL_GPIO_WritePin
 462:Src/w25qxx.c  **** 			WorkAddress=(i+Sector_Address*w25qxx.SectorSize);
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 45


 2055              		.loc 1 462 40
 2056 0114 284B     		ldr	r3, .L137
 2057 0116 1B69     		ldr	r3, [r3, #16]
 2058              		.loc 1 462 33
 2059 0118 FA68     		ldr	r2, [r7, #12]
 2060 011a 02FB03F3 		mul	r3, r2, r3
 2061              		.loc 1 462 15
 2062 011e FA6B     		ldr	r2, [r7, #60]
 2063 0120 1344     		add	r3, r3, r2
 2064 0122 7B63     		str	r3, [r7, #52]
 463:Src/w25qxx.c  **** 			W25qxx_Spi(0x0B);
 2065              		.loc 1 463 4
 2066 0124 0B20     		movs	r0, #11
 2067 0126 FFF7FEFF 		bl	W25qxx_Spi
 464:Src/w25qxx.c  **** 			if(w25qxx.ID>=W25Q256)
 2068              		.loc 1 464 13
 2069 012a 234B     		ldr	r3, .L137
 2070 012c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2071              		.loc 1 464 6
 2072 012e 082B     		cmp	r3, #8
 2073 0130 05D9     		bls	.L130
 465:Src/w25qxx.c  **** 				W25qxx_Spi((WorkAddress & 0xFF000000) >> 24);
 2074              		.loc 1 465 43
 2075 0132 7B6B     		ldr	r3, [r7, #52]
 2076 0134 1B0E     		lsrs	r3, r3, #24
 2077              		.loc 1 465 5
 2078 0136 DBB2     		uxtb	r3, r3
 2079 0138 1846     		mov	r0, r3
 2080 013a FFF7FEFF 		bl	W25qxx_Spi
 2081              	.L130:
 466:Src/w25qxx.c  **** 			W25qxx_Spi((WorkAddress & 0xFF0000) >> 16);
 2082              		.loc 1 466 40
 2083 013e 7B6B     		ldr	r3, [r7, #52]
 2084 0140 1B0C     		lsrs	r3, r3, #16
 2085              		.loc 1 466 4
 2086 0142 DBB2     		uxtb	r3, r3
 2087 0144 1846     		mov	r0, r3
 2088 0146 FFF7FEFF 		bl	W25qxx_Spi
 467:Src/w25qxx.c  **** 			W25qxx_Spi((WorkAddress & 0xFF00) >> 8);
 2089              		.loc 1 467 38
 2090 014a 7B6B     		ldr	r3, [r7, #52]
 2091 014c 1B0A     		lsrs	r3, r3, #8
 2092              		.loc 1 467 4
 2093 014e DBB2     		uxtb	r3, r3
 2094 0150 1846     		mov	r0, r3
 2095 0152 FFF7FEFF 		bl	W25qxx_Spi
 468:Src/w25qxx.c  **** 			W25qxx_Spi(WorkAddress & 0xFF);
 2096              		.loc 1 468 4
 2097 0156 7B6B     		ldr	r3, [r7, #52]
 2098 0158 DBB2     		uxtb	r3, r3
 2099 015a 1846     		mov	r0, r3
 2100 015c FFF7FEFF 		bl	W25qxx_Spi
 469:Src/w25qxx.c  **** 			W25qxx_Spi(0);
 2101              		.loc 1 469 4
 2102 0160 0020     		movs	r0, #0
 2103 0162 FFF7FEFF 		bl	W25qxx_Spi
 470:Src/w25qxx.c  **** 			HAL_SPI_Receive(&_W25QXX_SPI,pBuffer,1,100);	
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 46


 2104              		.loc 1 470 4
 2105 0166 07F11401 		add	r1, r7, #20
 2106 016a 6423     		movs	r3, #100
 2107 016c 0122     		movs	r2, #1
 2108 016e 1448     		ldr	r0, .L137+8
 2109 0170 FFF7FEFF 		bl	HAL_SPI_Receive
 471:Src/w25qxx.c  **** 			HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_SET);	
 2110              		.loc 1 471 4
 2111 0174 0122     		movs	r2, #1
 2112 0176 1021     		movs	r1, #16
 2113 0178 1048     		ldr	r0, .L137+4
 2114 017a FFF7FEFF 		bl	HAL_GPIO_WritePin
 472:Src/w25qxx.c  **** 			if(pBuffer[0]!=0xFF)
 2115              		.loc 1 472 14
 2116 017e 3B7D     		ldrb	r3, [r7, #20]	@ zero_extendqisi2
 2117              		.loc 1 472 6
 2118 0180 FF2B     		cmp	r3, #255
 2119 0182 0FD1     		bne	.L136
 459:Src/w25qxx.c  **** 		{
 2120              		.loc 1 459 32
 2121 0184 FB6B     		ldr	r3, [r7, #60]
 2122 0186 0133     		adds	r3, r3, #1
 2123 0188 FB63     		str	r3, [r7, #60]
 2124              	.L129:
 459:Src/w25qxx.c  **** 		{
 2125              		.loc 1 459 18 discriminator 1
 2126 018a 0B4B     		ldr	r3, .L137
 2127 018c 1B69     		ldr	r3, [r3, #16]
 459:Src/w25qxx.c  **** 		{
 2128              		.loc 1 459 3 discriminator 1
 2129 018e FA6B     		ldr	r2, [r7, #60]
 2130 0190 9A42     		cmp	r2, r3
 2131 0192 BAD3     		bcc	.L132
 2132              	.L128:
 473:Src/w25qxx.c  **** 				goto NOT_EMPTY;
 474:Src/w25qxx.c  **** 		}
 475:Src/w25qxx.c  **** 	}	
 476:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 477:Src/w25qxx.c  **** 	printf("w25qxx CheckSector is Empty in %d ms\r\n",HAL_GetTick()-StartTime);
 478:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 479:Src/w25qxx.c  **** 	#endif	
 480:Src/w25qxx.c  **** 	w25qxx.Lock=0;
 2133              		.loc 1 480 13
 2134 0194 084B     		ldr	r3, .L137
 2135 0196 0022     		movs	r2, #0
 2136 0198 83F82720 		strb	r2, [r3, #39]
 481:Src/w25qxx.c  **** 	return true;	
 2137              		.loc 1 481 9
 2138 019c 0123     		movs	r3, #1
 2139 019e 07E0     		b	.L134
 2140              	.L135:
 2141              	.LBB7:
 453:Src/w25qxx.c  **** 		}			
 2142              		.loc 1 453 5
 2143 01a0 00BF     		nop
 2144 01a2 00E0     		b	.L125
 2145              	.L136:
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 47


 2146              	.LBE7:
 473:Src/w25qxx.c  **** 				goto NOT_EMPTY;
 2147              		.loc 1 473 5
 2148 01a4 00BF     		nop
 2149              	.L125:
 482:Src/w25qxx.c  **** 	NOT_EMPTY:
 483:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 484:Src/w25qxx.c  **** 	printf("w25qxx CheckSector is Not Empty in %d ms\r\n",HAL_GetTick()-StartTime);
 485:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 486:Src/w25qxx.c  **** 	#endif	
 487:Src/w25qxx.c  **** 	w25qxx.Lock=0;
 2150              		.loc 1 487 13
 2151 01a6 044B     		ldr	r3, .L137
 2152 01a8 0022     		movs	r2, #0
 2153 01aa 83F82720 		strb	r2, [r3, #39]
 488:Src/w25qxx.c  **** 	return false;
 2154              		.loc 1 488 9
 2155 01ae 0023     		movs	r3, #0
 2156              	.L134:
 489:Src/w25qxx.c  **** }
 2157              		.loc 1 489 1 discriminator 1
 2158 01b0 1846     		mov	r0, r3
 2159 01b2 4037     		adds	r7, r7, #64
 2160              	.LCFI86:
 2161              		.cfi_def_cfa_offset 8
 2162 01b4 BD46     		mov	sp, r7
 2163              	.LCFI87:
 2164              		.cfi_def_cfa_register 13
 2165              		@ sp needed
 2166 01b6 80BD     		pop	{r7, pc}
 2167              	.L138:
 2168              		.align	2
 2169              	.L137:
 2170 01b8 00000000 		.word	w25qxx
 2171 01bc 00080140 		.word	1073809408
 2172 01c0 00000000 		.word	hspi1
 2173              		.cfi_endproc
 2174              	.LFE83:
 2176              		.section	.text.W25qxx_IsEmptyBlock,"ax",%progbits
 2177              		.align	1
 2178              		.global	W25qxx_IsEmptyBlock
 2179              		.syntax unified
 2180              		.thumb
 2181              		.thumb_func
 2182              		.fpu softvfp
 2184              	W25qxx_IsEmptyBlock:
 2185              	.LFB84:
 490:Src/w25qxx.c  **** //#################################################################################################
 491:Src/w25qxx.c  **** bool 	W25qxx_IsEmptyBlock(uint32_t Block_Address,uint32_t OffsetInByte,uint32_t NumByteToCheck_up_t
 492:Src/w25qxx.c  **** {
 2186              		.loc 1 492 1
 2187              		.cfi_startproc
 2188              		@ args = 0, pretend = 0, frame = 64
 2189              		@ frame_needed = 1, uses_anonymous_args = 0
 2190 0000 80B5     		push	{r7, lr}
 2191              	.LCFI88:
 2192              		.cfi_def_cfa_offset 8
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 48


 2193              		.cfi_offset 7, -8
 2194              		.cfi_offset 14, -4
 2195 0002 90B0     		sub	sp, sp, #64
 2196              	.LCFI89:
 2197              		.cfi_def_cfa_offset 72
 2198 0004 00AF     		add	r7, sp, #0
 2199              	.LCFI90:
 2200              		.cfi_def_cfa_register 7
 2201 0006 F860     		str	r0, [r7, #12]
 2202 0008 B960     		str	r1, [r7, #8]
 2203 000a 7A60     		str	r2, [r7, #4]
 493:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 2204              		.loc 1 493 7
 2205 000c 02E0     		b	.L140
 2206              	.L141:
 494:Src/w25qxx.c  **** 	W25qxx_Delay(1);
 2207              		.loc 1 494 2
 2208 000e 0120     		movs	r0, #1
 2209 0010 FFF7FEFF 		bl	HAL_Delay
 2210              	.L140:
 493:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 2211              		.loc 1 493 14
 2212 0014 684B     		ldr	r3, .L160
 2213 0016 93F82730 		ldrb	r3, [r3, #39]	@ zero_extendqisi2
 493:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 2214              		.loc 1 493 7
 2215 001a 012B     		cmp	r3, #1
 2216 001c F7D0     		beq	.L141
 495:Src/w25qxx.c  **** 	w25qxx.Lock=1;	
 2217              		.loc 1 495 13
 2218 001e 664B     		ldr	r3, .L160
 2219 0020 0122     		movs	r2, #1
 2220 0022 83F82720 		strb	r2, [r3, #39]
 496:Src/w25qxx.c  **** 	if((NumByteToCheck_up_to_BlockSize>w25qxx.BlockSize)||(NumByteToCheck_up_to_BlockSize==0))
 2221              		.loc 1 496 43
 2222 0026 644B     		ldr	r3, .L160
 2223 0028 9B69     		ldr	r3, [r3, #24]
 2224              		.loc 1 496 4
 2225 002a 7A68     		ldr	r2, [r7, #4]
 2226 002c 9A42     		cmp	r2, r3
 2227 002e 02D8     		bhi	.L142
 2228              		.loc 1 496 54 discriminator 1
 2229 0030 7B68     		ldr	r3, [r7, #4]
 2230 0032 002B     		cmp	r3, #0
 2231 0034 02D1     		bne	.L143
 2232              	.L142:
 497:Src/w25qxx.c  **** 		NumByteToCheck_up_to_BlockSize=w25qxx.BlockSize;
 2233              		.loc 1 497 33
 2234 0036 604B     		ldr	r3, .L160
 2235 0038 9B69     		ldr	r3, [r3, #24]
 2236 003a 7B60     		str	r3, [r7, #4]
 2237              	.L143:
 498:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 499:Src/w25qxx.c  **** 	printf("w25qxx CheckBlock:%d, Offset:%d, Bytes:%d begin...\r\n",Block_Address,OffsetInByte,NumByte
 500:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 501:Src/w25qxx.c  **** 	uint32_t	StartTime=HAL_GetTick();
 502:Src/w25qxx.c  **** 	#endif		
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 49


 503:Src/w25qxx.c  **** 	uint8_t	pBuffer[32];
 504:Src/w25qxx.c  **** 	uint32_t	WorkAddress;
 505:Src/w25qxx.c  **** 	uint32_t	i;
 506:Src/w25qxx.c  **** 	for(i=OffsetInByte; i<w25qxx.BlockSize; i+=sizeof(pBuffer))
 2238              		.loc 1 506 7
 2239 003c BB68     		ldr	r3, [r7, #8]
 2240 003e FB63     		str	r3, [r7, #60]
 2241              		.loc 1 506 2
 2242 0040 52E0     		b	.L144
 2243              	.L150:
 507:Src/w25qxx.c  **** 	{
 508:Src/w25qxx.c  **** 		HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_RESET);
 2244              		.loc 1 508 3
 2245 0042 0022     		movs	r2, #0
 2246 0044 1021     		movs	r1, #16
 2247 0046 5D48     		ldr	r0, .L160+4
 2248 0048 FFF7FEFF 		bl	HAL_GPIO_WritePin
 509:Src/w25qxx.c  **** 		WorkAddress=(i+Block_Address*w25qxx.BlockSize);
 2249              		.loc 1 509 38
 2250 004c 5A4B     		ldr	r3, .L160
 2251 004e 9B69     		ldr	r3, [r3, #24]
 2252              		.loc 1 509 31
 2253 0050 FA68     		ldr	r2, [r7, #12]
 2254 0052 02FB03F3 		mul	r3, r2, r3
 2255              		.loc 1 509 14
 2256 0056 FA6B     		ldr	r2, [r7, #60]
 2257 0058 1344     		add	r3, r3, r2
 2258 005a 7B63     		str	r3, [r7, #52]
 510:Src/w25qxx.c  **** 		W25qxx_Spi(0x0B);
 2259              		.loc 1 510 3
 2260 005c 0B20     		movs	r0, #11
 2261 005e FFF7FEFF 		bl	W25qxx_Spi
 511:Src/w25qxx.c  **** 		if(w25qxx.ID>=W25Q256)
 2262              		.loc 1 511 12
 2263 0062 554B     		ldr	r3, .L160
 2264 0064 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2265              		.loc 1 511 5
 2266 0066 082B     		cmp	r3, #8
 2267 0068 05D9     		bls	.L145
 512:Src/w25qxx.c  **** 			W25qxx_Spi((WorkAddress & 0xFF000000) >> 24);
 2268              		.loc 1 512 42
 2269 006a 7B6B     		ldr	r3, [r7, #52]
 2270 006c 1B0E     		lsrs	r3, r3, #24
 2271              		.loc 1 512 4
 2272 006e DBB2     		uxtb	r3, r3
 2273 0070 1846     		mov	r0, r3
 2274 0072 FFF7FEFF 		bl	W25qxx_Spi
 2275              	.L145:
 513:Src/w25qxx.c  **** 		W25qxx_Spi((WorkAddress & 0xFF0000) >> 16);
 2276              		.loc 1 513 39
 2277 0076 7B6B     		ldr	r3, [r7, #52]
 2278 0078 1B0C     		lsrs	r3, r3, #16
 2279              		.loc 1 513 3
 2280 007a DBB2     		uxtb	r3, r3
 2281 007c 1846     		mov	r0, r3
 2282 007e FFF7FEFF 		bl	W25qxx_Spi
 514:Src/w25qxx.c  **** 		W25qxx_Spi((WorkAddress & 0xFF00) >> 8);
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 50


 2283              		.loc 1 514 37
 2284 0082 7B6B     		ldr	r3, [r7, #52]
 2285 0084 1B0A     		lsrs	r3, r3, #8
 2286              		.loc 1 514 3
 2287 0086 DBB2     		uxtb	r3, r3
 2288 0088 1846     		mov	r0, r3
 2289 008a FFF7FEFF 		bl	W25qxx_Spi
 515:Src/w25qxx.c  **** 		W25qxx_Spi(WorkAddress & 0xFF);
 2290              		.loc 1 515 3
 2291 008e 7B6B     		ldr	r3, [r7, #52]
 2292 0090 DBB2     		uxtb	r3, r3
 2293 0092 1846     		mov	r0, r3
 2294 0094 FFF7FEFF 		bl	W25qxx_Spi
 516:Src/w25qxx.c  **** 		W25qxx_Spi(0);
 2295              		.loc 1 516 3
 2296 0098 0020     		movs	r0, #0
 2297 009a FFF7FEFF 		bl	W25qxx_Spi
 517:Src/w25qxx.c  **** 		HAL_SPI_Receive(&_W25QXX_SPI,pBuffer,sizeof(pBuffer),100);	
 2298              		.loc 1 517 3
 2299 009e 07F11401 		add	r1, r7, #20
 2300 00a2 6423     		movs	r3, #100
 2301 00a4 2022     		movs	r2, #32
 2302 00a6 4648     		ldr	r0, .L160+8
 2303 00a8 FFF7FEFF 		bl	HAL_SPI_Receive
 518:Src/w25qxx.c  **** 		HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_SET);	
 2304              		.loc 1 518 3
 2305 00ac 0122     		movs	r2, #1
 2306 00ae 1021     		movs	r1, #16
 2307 00b0 4248     		ldr	r0, .L160+4
 2308 00b2 FFF7FEFF 		bl	HAL_GPIO_WritePin
 2309              	.LBB8:
 519:Src/w25qxx.c  **** 		for(uint8_t x=0;x<sizeof(pBuffer);x++)
 2310              		.loc 1 519 15
 2311 00b6 0023     		movs	r3, #0
 2312 00b8 87F83B30 		strb	r3, [r7, #59]
 2313              		.loc 1 519 3
 2314 00bc 0DE0     		b	.L146
 2315              	.L149:
 520:Src/w25qxx.c  **** 		{
 521:Src/w25qxx.c  **** 			if(pBuffer[x]!=0xFF)
 2316              		.loc 1 521 14
 2317 00be 97F83B30 		ldrb	r3, [r7, #59]	@ zero_extendqisi2
 2318 00c2 07F14002 		add	r2, r7, #64
 2319 00c6 1344     		add	r3, r3, r2
 2320 00c8 13F82C3C 		ldrb	r3, [r3, #-44]	@ zero_extendqisi2
 2321              		.loc 1 521 6
 2322 00cc FF2B     		cmp	r3, #255
 2323 00ce 67D1     		bne	.L158
 519:Src/w25qxx.c  **** 		for(uint8_t x=0;x<sizeof(pBuffer);x++)
 2324              		.loc 1 519 38 discriminator 2
 2325 00d0 97F83B30 		ldrb	r3, [r7, #59]	@ zero_extendqisi2
 2326 00d4 0133     		adds	r3, r3, #1
 2327 00d6 87F83B30 		strb	r3, [r7, #59]
 2328              	.L146:
 519:Src/w25qxx.c  **** 		for(uint8_t x=0;x<sizeof(pBuffer);x++)
 2329              		.loc 1 519 3 discriminator 1
 2330 00da 97F83B30 		ldrb	r3, [r7, #59]	@ zero_extendqisi2
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 51


 2331 00de 1F2B     		cmp	r3, #31
 2332 00e0 EDD9     		bls	.L149
 2333              	.LBE8:
 506:Src/w25qxx.c  **** 	{
 2334              		.loc 1 506 43 discriminator 2
 2335 00e2 FB6B     		ldr	r3, [r7, #60]
 2336 00e4 2033     		adds	r3, r3, #32
 2337 00e6 FB63     		str	r3, [r7, #60]
 2338              	.L144:
 506:Src/w25qxx.c  **** 	{
 2339              		.loc 1 506 30 discriminator 1
 2340 00e8 334B     		ldr	r3, .L160
 2341 00ea 9B69     		ldr	r3, [r3, #24]
 506:Src/w25qxx.c  **** 	{
 2342              		.loc 1 506 2 discriminator 1
 2343 00ec FA6B     		ldr	r2, [r7, #60]
 2344 00ee 9A42     		cmp	r2, r3
 2345 00f0 A7D3     		bcc	.L150
 522:Src/w25qxx.c  **** 				goto NOT_EMPTY;		
 523:Src/w25qxx.c  **** 		}			
 524:Src/w25qxx.c  **** 	}	
 525:Src/w25qxx.c  **** 	if((w25qxx.BlockSize+OffsetInByte)%sizeof(pBuffer)!=0)
 2346              		.loc 1 525 12
 2347 00f2 314B     		ldr	r3, .L160
 2348 00f4 9A69     		ldr	r2, [r3, #24]
 2349              		.loc 1 525 22
 2350 00f6 BB68     		ldr	r3, [r7, #8]
 2351 00f8 1344     		add	r3, r3, r2
 2352              		.loc 1 525 36
 2353 00fa 03F01F03 		and	r3, r3, #31
 2354              		.loc 1 525 4
 2355 00fe 002B     		cmp	r3, #0
 2356 0100 48D0     		beq	.L151
 526:Src/w25qxx.c  **** 	{
 527:Src/w25qxx.c  **** 		i-=sizeof(pBuffer);
 2357              		.loc 1 527 4
 2358 0102 FB6B     		ldr	r3, [r7, #60]
 2359 0104 203B     		subs	r3, r3, #32
 2360 0106 FB63     		str	r3, [r7, #60]
 528:Src/w25qxx.c  **** 		for( ; i<w25qxx.BlockSize; i++)
 2361              		.loc 1 528 3
 2362 0108 3FE0     		b	.L152
 2363              	.L155:
 529:Src/w25qxx.c  **** 		{
 530:Src/w25qxx.c  **** 			HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_RESET);
 2364              		.loc 1 530 4
 2365 010a 0022     		movs	r2, #0
 2366 010c 1021     		movs	r1, #16
 2367 010e 2B48     		ldr	r0, .L160+4
 2368 0110 FFF7FEFF 		bl	HAL_GPIO_WritePin
 531:Src/w25qxx.c  **** 			WorkAddress=(i+Block_Address*w25qxx.BlockSize);
 2369              		.loc 1 531 39
 2370 0114 284B     		ldr	r3, .L160
 2371 0116 9B69     		ldr	r3, [r3, #24]
 2372              		.loc 1 531 32
 2373 0118 FA68     		ldr	r2, [r7, #12]
 2374 011a 02FB03F3 		mul	r3, r2, r3
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 52


 2375              		.loc 1 531 15
 2376 011e FA6B     		ldr	r2, [r7, #60]
 2377 0120 1344     		add	r3, r3, r2
 2378 0122 7B63     		str	r3, [r7, #52]
 532:Src/w25qxx.c  **** 			W25qxx_Spi(0x0B);
 2379              		.loc 1 532 4
 2380 0124 0B20     		movs	r0, #11
 2381 0126 FFF7FEFF 		bl	W25qxx_Spi
 533:Src/w25qxx.c  **** 			if(w25qxx.ID>=W25Q256)
 2382              		.loc 1 533 13
 2383 012a 234B     		ldr	r3, .L160
 2384 012c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2385              		.loc 1 533 6
 2386 012e 082B     		cmp	r3, #8
 2387 0130 05D9     		bls	.L153
 534:Src/w25qxx.c  **** 				W25qxx_Spi((WorkAddress & 0xFF000000) >> 24);
 2388              		.loc 1 534 43
 2389 0132 7B6B     		ldr	r3, [r7, #52]
 2390 0134 1B0E     		lsrs	r3, r3, #24
 2391              		.loc 1 534 5
 2392 0136 DBB2     		uxtb	r3, r3
 2393 0138 1846     		mov	r0, r3
 2394 013a FFF7FEFF 		bl	W25qxx_Spi
 2395              	.L153:
 535:Src/w25qxx.c  **** 			W25qxx_Spi((WorkAddress & 0xFF0000) >> 16);
 2396              		.loc 1 535 40
 2397 013e 7B6B     		ldr	r3, [r7, #52]
 2398 0140 1B0C     		lsrs	r3, r3, #16
 2399              		.loc 1 535 4
 2400 0142 DBB2     		uxtb	r3, r3
 2401 0144 1846     		mov	r0, r3
 2402 0146 FFF7FEFF 		bl	W25qxx_Spi
 536:Src/w25qxx.c  **** 			W25qxx_Spi((WorkAddress & 0xFF00) >> 8);
 2403              		.loc 1 536 38
 2404 014a 7B6B     		ldr	r3, [r7, #52]
 2405 014c 1B0A     		lsrs	r3, r3, #8
 2406              		.loc 1 536 4
 2407 014e DBB2     		uxtb	r3, r3
 2408 0150 1846     		mov	r0, r3
 2409 0152 FFF7FEFF 		bl	W25qxx_Spi
 537:Src/w25qxx.c  **** 			W25qxx_Spi(WorkAddress & 0xFF);
 2410              		.loc 1 537 4
 2411 0156 7B6B     		ldr	r3, [r7, #52]
 2412 0158 DBB2     		uxtb	r3, r3
 2413 015a 1846     		mov	r0, r3
 2414 015c FFF7FEFF 		bl	W25qxx_Spi
 538:Src/w25qxx.c  **** 			W25qxx_Spi(0);
 2415              		.loc 1 538 4
 2416 0160 0020     		movs	r0, #0
 2417 0162 FFF7FEFF 		bl	W25qxx_Spi
 539:Src/w25qxx.c  **** 			HAL_SPI_Receive(&_W25QXX_SPI,pBuffer,1,100);	
 2418              		.loc 1 539 4
 2419 0166 07F11401 		add	r1, r7, #20
 2420 016a 6423     		movs	r3, #100
 2421 016c 0122     		movs	r2, #1
 2422 016e 1448     		ldr	r0, .L160+8
 2423 0170 FFF7FEFF 		bl	HAL_SPI_Receive
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 53


 540:Src/w25qxx.c  **** 			HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_SET);	
 2424              		.loc 1 540 4
 2425 0174 0122     		movs	r2, #1
 2426 0176 1021     		movs	r1, #16
 2427 0178 1048     		ldr	r0, .L160+4
 2428 017a FFF7FEFF 		bl	HAL_GPIO_WritePin
 541:Src/w25qxx.c  **** 			if(pBuffer[0]!=0xFF)
 2429              		.loc 1 541 14
 2430 017e 3B7D     		ldrb	r3, [r7, #20]	@ zero_extendqisi2
 2431              		.loc 1 541 6
 2432 0180 FF2B     		cmp	r3, #255
 2433 0182 0FD1     		bne	.L159
 528:Src/w25qxx.c  **** 		{
 2434              		.loc 1 528 31
 2435 0184 FB6B     		ldr	r3, [r7, #60]
 2436 0186 0133     		adds	r3, r3, #1
 2437 0188 FB63     		str	r3, [r7, #60]
 2438              	.L152:
 528:Src/w25qxx.c  **** 		{
 2439              		.loc 1 528 18 discriminator 1
 2440 018a 0B4B     		ldr	r3, .L160
 2441 018c 9B69     		ldr	r3, [r3, #24]
 528:Src/w25qxx.c  **** 		{
 2442              		.loc 1 528 3 discriminator 1
 2443 018e FA6B     		ldr	r2, [r7, #60]
 2444 0190 9A42     		cmp	r2, r3
 2445 0192 BAD3     		bcc	.L155
 2446              	.L151:
 542:Src/w25qxx.c  **** 				goto NOT_EMPTY;
 543:Src/w25qxx.c  **** 		}
 544:Src/w25qxx.c  **** 	}	
 545:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 546:Src/w25qxx.c  **** 	printf("w25qxx CheckBlock is Empty in %d ms\r\n",HAL_GetTick()-StartTime);
 547:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 548:Src/w25qxx.c  **** 	#endif	
 549:Src/w25qxx.c  **** 	w25qxx.Lock=0;
 2447              		.loc 1 549 13
 2448 0194 084B     		ldr	r3, .L160
 2449 0196 0022     		movs	r2, #0
 2450 0198 83F82720 		strb	r2, [r3, #39]
 550:Src/w25qxx.c  **** 	return true;	
 2451              		.loc 1 550 9
 2452 019c 0123     		movs	r3, #1
 2453 019e 07E0     		b	.L157
 2454              	.L158:
 2455              	.LBB9:
 522:Src/w25qxx.c  **** 		}			
 2456              		.loc 1 522 5
 2457 01a0 00BF     		nop
 2458 01a2 00E0     		b	.L148
 2459              	.L159:
 2460              	.LBE9:
 542:Src/w25qxx.c  **** 				goto NOT_EMPTY;
 2461              		.loc 1 542 5
 2462 01a4 00BF     		nop
 2463              	.L148:
 551:Src/w25qxx.c  **** 	NOT_EMPTY:
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 54


 552:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 553:Src/w25qxx.c  **** 	printf("w25qxx CheckBlock is Not Empty in %d ms\r\n",HAL_GetTick()-StartTime);
 554:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 555:Src/w25qxx.c  **** 	#endif	
 556:Src/w25qxx.c  **** 	w25qxx.Lock=0;
 2464              		.loc 1 556 13
 2465 01a6 044B     		ldr	r3, .L160
 2466 01a8 0022     		movs	r2, #0
 2467 01aa 83F82720 		strb	r2, [r3, #39]
 557:Src/w25qxx.c  **** 	return false;
 2468              		.loc 1 557 9
 2469 01ae 0023     		movs	r3, #0
 2470              	.L157:
 558:Src/w25qxx.c  **** }
 2471              		.loc 1 558 1 discriminator 1
 2472 01b0 1846     		mov	r0, r3
 2473 01b2 4037     		adds	r7, r7, #64
 2474              	.LCFI91:
 2475              		.cfi_def_cfa_offset 8
 2476 01b4 BD46     		mov	sp, r7
 2477              	.LCFI92:
 2478              		.cfi_def_cfa_register 13
 2479              		@ sp needed
 2480 01b6 80BD     		pop	{r7, pc}
 2481              	.L161:
 2482              		.align	2
 2483              	.L160:
 2484 01b8 00000000 		.word	w25qxx
 2485 01bc 00080140 		.word	1073809408
 2486 01c0 00000000 		.word	hspi1
 2487              		.cfi_endproc
 2488              	.LFE84:
 2490              		.section	.text.W25qxx_WriteByte,"ax",%progbits
 2491              		.align	1
 2492              		.global	W25qxx_WriteByte
 2493              		.syntax unified
 2494              		.thumb
 2495              		.thumb_func
 2496              		.fpu softvfp
 2498              	W25qxx_WriteByte:
 2499              	.LFB85:
 559:Src/w25qxx.c  **** //#################################################################################################
 560:Src/w25qxx.c  **** void W25qxx_WriteByte(uint8_t pBuffer, uint32_t WriteAddr_inBytes)
 561:Src/w25qxx.c  **** {
 2500              		.loc 1 561 1
 2501              		.cfi_startproc
 2502              		@ args = 0, pretend = 0, frame = 8
 2503              		@ frame_needed = 1, uses_anonymous_args = 0
 2504 0000 80B5     		push	{r7, lr}
 2505              	.LCFI93:
 2506              		.cfi_def_cfa_offset 8
 2507              		.cfi_offset 7, -8
 2508              		.cfi_offset 14, -4
 2509 0002 82B0     		sub	sp, sp, #8
 2510              	.LCFI94:
 2511              		.cfi_def_cfa_offset 16
 2512 0004 00AF     		add	r7, sp, #0
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 55


 2513              	.LCFI95:
 2514              		.cfi_def_cfa_register 7
 2515 0006 0346     		mov	r3, r0
 2516 0008 3960     		str	r1, [r7]
 2517 000a FB71     		strb	r3, [r7, #7]
 562:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 2518              		.loc 1 562 7
 2519 000c 02E0     		b	.L163
 2520              	.L164:
 563:Src/w25qxx.c  **** 		W25qxx_Delay(1);
 2521              		.loc 1 563 3
 2522 000e 0120     		movs	r0, #1
 2523 0010 FFF7FEFF 		bl	HAL_Delay
 2524              	.L163:
 562:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 2525              		.loc 1 562 14
 2526 0014 214B     		ldr	r3, .L166
 2527 0016 93F82730 		ldrb	r3, [r3, #39]	@ zero_extendqisi2
 562:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 2528              		.loc 1 562 7
 2529 001a 012B     		cmp	r3, #1
 2530 001c F7D0     		beq	.L164
 564:Src/w25qxx.c  **** 	w25qxx.Lock=1;
 2531              		.loc 1 564 13
 2532 001e 1F4B     		ldr	r3, .L166
 2533 0020 0122     		movs	r2, #1
 2534 0022 83F82720 		strb	r2, [r3, #39]
 565:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 566:Src/w25qxx.c  **** 	uint32_t	StartTime=HAL_GetTick();
 567:Src/w25qxx.c  **** 	printf("w25qxx WriteByte 0x%02X at address %d begin...",pBuffer,WriteAddr_inBytes);
 568:Src/w25qxx.c  **** 	#endif
 569:Src/w25qxx.c  **** 	W25qxx_WaitForWriteEnd();
 2535              		.loc 1 569 2
 2536 0026 FFF7FEFF 		bl	W25qxx_WaitForWriteEnd
 570:Src/w25qxx.c  ****   W25qxx_WriteEnable();
 2537              		.loc 1 570 3
 2538 002a FFF7FEFF 		bl	W25qxx_WriteEnable
 571:Src/w25qxx.c  ****   HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_RESET);
 2539              		.loc 1 571 3
 2540 002e 0022     		movs	r2, #0
 2541 0030 1021     		movs	r1, #16
 2542 0032 1B48     		ldr	r0, .L166+4
 2543 0034 FFF7FEFF 		bl	HAL_GPIO_WritePin
 572:Src/w25qxx.c  ****   W25qxx_Spi(0x02);
 2544              		.loc 1 572 3
 2545 0038 0220     		movs	r0, #2
 2546 003a FFF7FEFF 		bl	W25qxx_Spi
 573:Src/w25qxx.c  **** 	if(w25qxx.ID>=W25Q256)
 2547              		.loc 1 573 11
 2548 003e 174B     		ldr	r3, .L166
 2549 0040 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2550              		.loc 1 573 4
 2551 0042 082B     		cmp	r3, #8
 2552 0044 05D9     		bls	.L165
 574:Src/w25qxx.c  **** 		W25qxx_Spi((WriteAddr_inBytes & 0xFF000000) >> 24);
 2553              		.loc 1 574 47
 2554 0046 3B68     		ldr	r3, [r7]
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 56


 2555 0048 1B0E     		lsrs	r3, r3, #24
 2556              		.loc 1 574 3
 2557 004a DBB2     		uxtb	r3, r3
 2558 004c 1846     		mov	r0, r3
 2559 004e FFF7FEFF 		bl	W25qxx_Spi
 2560              	.L165:
 575:Src/w25qxx.c  ****   W25qxx_Spi((WriteAddr_inBytes & 0xFF0000) >> 16);
 2561              		.loc 1 575 45
 2562 0052 3B68     		ldr	r3, [r7]
 2563 0054 1B0C     		lsrs	r3, r3, #16
 2564              		.loc 1 575 3
 2565 0056 DBB2     		uxtb	r3, r3
 2566 0058 1846     		mov	r0, r3
 2567 005a FFF7FEFF 		bl	W25qxx_Spi
 576:Src/w25qxx.c  ****   W25qxx_Spi((WriteAddr_inBytes & 0xFF00) >> 8);
 2568              		.loc 1 576 43
 2569 005e 3B68     		ldr	r3, [r7]
 2570 0060 1B0A     		lsrs	r3, r3, #8
 2571              		.loc 1 576 3
 2572 0062 DBB2     		uxtb	r3, r3
 2573 0064 1846     		mov	r0, r3
 2574 0066 FFF7FEFF 		bl	W25qxx_Spi
 577:Src/w25qxx.c  ****   W25qxx_Spi(WriteAddr_inBytes & 0xFF);
 2575              		.loc 1 577 3
 2576 006a 3B68     		ldr	r3, [r7]
 2577 006c DBB2     		uxtb	r3, r3
 2578 006e 1846     		mov	r0, r3
 2579 0070 FFF7FEFF 		bl	W25qxx_Spi
 578:Src/w25qxx.c  ****   W25qxx_Spi(pBuffer);
 2580              		.loc 1 578 3
 2581 0074 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 2582 0076 1846     		mov	r0, r3
 2583 0078 FFF7FEFF 		bl	W25qxx_Spi
 579:Src/w25qxx.c  **** 	HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_SET);
 2584              		.loc 1 579 2
 2585 007c 0122     		movs	r2, #1
 2586 007e 1021     		movs	r1, #16
 2587 0080 0748     		ldr	r0, .L166+4
 2588 0082 FFF7FEFF 		bl	HAL_GPIO_WritePin
 580:Src/w25qxx.c  ****   W25qxx_WaitForWriteEnd();
 2589              		.loc 1 580 3
 2590 0086 FFF7FEFF 		bl	W25qxx_WaitForWriteEnd
 581:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 582:Src/w25qxx.c  **** 	printf("w25qxx WriteByte done after %d ms\r\n",HAL_GetTick()-StartTime);
 583:Src/w25qxx.c  **** 	#endif
 584:Src/w25qxx.c  **** 	w25qxx.Lock=0;
 2591              		.loc 1 584 13
 2592 008a 044B     		ldr	r3, .L166
 2593 008c 0022     		movs	r2, #0
 2594 008e 83F82720 		strb	r2, [r3, #39]
 585:Src/w25qxx.c  **** }
 2595              		.loc 1 585 1
 2596 0092 00BF     		nop
 2597 0094 0837     		adds	r7, r7, #8
 2598              	.LCFI96:
 2599              		.cfi_def_cfa_offset 8
 2600 0096 BD46     		mov	sp, r7
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 57


 2601              	.LCFI97:
 2602              		.cfi_def_cfa_register 13
 2603              		@ sp needed
 2604 0098 80BD     		pop	{r7, pc}
 2605              	.L167:
 2606 009a 00BF     		.align	2
 2607              	.L166:
 2608 009c 00000000 		.word	w25qxx
 2609 00a0 00080140 		.word	1073809408
 2610              		.cfi_endproc
 2611              	.LFE85:
 2613              		.section	.text.W25qxx_WritePage,"ax",%progbits
 2614              		.align	1
 2615              		.global	W25qxx_WritePage
 2616              		.syntax unified
 2617              		.thumb
 2618              		.thumb_func
 2619              		.fpu softvfp
 2621              	W25qxx_WritePage:
 2622              	.LFB86:
 586:Src/w25qxx.c  **** //#################################################################################################
 587:Src/w25qxx.c  **** void 	W25qxx_WritePage(uint8_t *pBuffer	,uint32_t Page_Address,uint32_t OffsetInByte,uint32_t NumBy
 588:Src/w25qxx.c  **** {
 2623              		.loc 1 588 1
 2624              		.cfi_startproc
 2625              		@ args = 0, pretend = 0, frame = 16
 2626              		@ frame_needed = 1, uses_anonymous_args = 0
 2627 0000 80B5     		push	{r7, lr}
 2628              	.LCFI98:
 2629              		.cfi_def_cfa_offset 8
 2630              		.cfi_offset 7, -8
 2631              		.cfi_offset 14, -4
 2632 0002 84B0     		sub	sp, sp, #16
 2633              	.LCFI99:
 2634              		.cfi_def_cfa_offset 24
 2635 0004 00AF     		add	r7, sp, #0
 2636              	.LCFI100:
 2637              		.cfi_def_cfa_register 7
 2638 0006 F860     		str	r0, [r7, #12]
 2639 0008 B960     		str	r1, [r7, #8]
 2640 000a 7A60     		str	r2, [r7, #4]
 2641 000c 3B60     		str	r3, [r7]
 589:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 2642              		.loc 1 589 7
 2643 000e 02E0     		b	.L169
 2644              	.L170:
 590:Src/w25qxx.c  **** 		W25qxx_Delay(1);
 2645              		.loc 1 590 3
 2646 0010 0120     		movs	r0, #1
 2647 0012 FFF7FEFF 		bl	HAL_Delay
 2648              	.L169:
 589:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 2649              		.loc 1 589 14
 2650 0016 374B     		ldr	r3, .L175
 2651 0018 93F82730 		ldrb	r3, [r3, #39]	@ zero_extendqisi2
 589:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 2652              		.loc 1 589 7
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 58


 2653 001c 012B     		cmp	r3, #1
 2654 001e F7D0     		beq	.L170
 591:Src/w25qxx.c  **** 	w25qxx.Lock=1;
 2655              		.loc 1 591 13
 2656 0020 344B     		ldr	r3, .L175
 2657 0022 0122     		movs	r2, #1
 2658 0024 83F82720 		strb	r2, [r3, #39]
 592:Src/w25qxx.c  **** 	if(((NumByteToWrite_up_to_PageSize+OffsetInByte)>w25qxx.PageSize)||(NumByteToWrite_up_to_PageSize=
 2659              		.loc 1 592 36
 2660 0028 3A68     		ldr	r2, [r7]
 2661 002a 7B68     		ldr	r3, [r7, #4]
 2662 002c 1344     		add	r3, r3, r2
 2663              		.loc 1 592 57
 2664 002e 314A     		ldr	r2, .L175
 2665 0030 5289     		ldrh	r2, [r2, #10]
 2666              		.loc 1 592 4
 2667 0032 9342     		cmp	r3, r2
 2668 0034 02D8     		bhi	.L171
 2669              		.loc 1 592 67 discriminator 1
 2670 0036 3B68     		ldr	r3, [r7]
 2671 0038 002B     		cmp	r3, #0
 2672 003a 05D1     		bne	.L172
 2673              	.L171:
 593:Src/w25qxx.c  **** 		NumByteToWrite_up_to_PageSize=w25qxx.PageSize-OffsetInByte;
 2674              		.loc 1 593 39
 2675 003c 2D4B     		ldr	r3, .L175
 2676 003e 5B89     		ldrh	r3, [r3, #10]
 2677 0040 1A46     		mov	r2, r3
 2678              		.loc 1 593 32
 2679 0042 7B68     		ldr	r3, [r7, #4]
 2680 0044 D31A     		subs	r3, r2, r3
 2681 0046 3B60     		str	r3, [r7]
 2682              	.L172:
 594:Src/w25qxx.c  **** 	if((OffsetInByte+NumByteToWrite_up_to_PageSize) > w25qxx.PageSize)
 2683              		.loc 1 594 18
 2684 0048 7A68     		ldr	r2, [r7, #4]
 2685 004a 3B68     		ldr	r3, [r7]
 2686 004c 1344     		add	r3, r3, r2
 2687              		.loc 1 594 58
 2688 004e 294A     		ldr	r2, .L175
 2689 0050 5289     		ldrh	r2, [r2, #10]
 2690              		.loc 1 594 4
 2691 0052 9342     		cmp	r3, r2
 2692 0054 05D9     		bls	.L173
 595:Src/w25qxx.c  **** 		NumByteToWrite_up_to_PageSize = w25qxx.PageSize-OffsetInByte;
 2693              		.loc 1 595 41
 2694 0056 274B     		ldr	r3, .L175
 2695 0058 5B89     		ldrh	r3, [r3, #10]
 2696 005a 1A46     		mov	r2, r3
 2697              		.loc 1 595 33
 2698 005c 7B68     		ldr	r3, [r7, #4]
 2699 005e D31A     		subs	r3, r2, r3
 2700 0060 3B60     		str	r3, [r7]
 2701              	.L173:
 596:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 597:Src/w25qxx.c  **** 	printf("w25qxx WritePage:%d, Offset:%d ,Writes %d Bytes, begin...\r\n",Page_Address,OffsetInByte,N
 598:Src/w25qxx.c  **** 	W25qxx_Delay(100);
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 59


 599:Src/w25qxx.c  **** 	uint32_t	StartTime=HAL_GetTick();
 600:Src/w25qxx.c  **** 	#endif	
 601:Src/w25qxx.c  **** 	W25qxx_WaitForWriteEnd();
 2702              		.loc 1 601 2
 2703 0062 FFF7FEFF 		bl	W25qxx_WaitForWriteEnd
 602:Src/w25qxx.c  ****   W25qxx_WriteEnable();
 2704              		.loc 1 602 3
 2705 0066 FFF7FEFF 		bl	W25qxx_WriteEnable
 603:Src/w25qxx.c  ****   HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_RESET);
 2706              		.loc 1 603 3
 2707 006a 0022     		movs	r2, #0
 2708 006c 1021     		movs	r1, #16
 2709 006e 2248     		ldr	r0, .L175+4
 2710 0070 FFF7FEFF 		bl	HAL_GPIO_WritePin
 604:Src/w25qxx.c  ****   W25qxx_Spi(0x02);
 2711              		.loc 1 604 3
 2712 0074 0220     		movs	r0, #2
 2713 0076 FFF7FEFF 		bl	W25qxx_Spi
 605:Src/w25qxx.c  **** 	Page_Address = (Page_Address*w25qxx.PageSize)+OffsetInByte;	
 2714              		.loc 1 605 37
 2715 007a 1E4B     		ldr	r3, .L175
 2716 007c 5B89     		ldrh	r3, [r3, #10]
 2717 007e 1A46     		mov	r2, r3
 2718              		.loc 1 605 30
 2719 0080 BB68     		ldr	r3, [r7, #8]
 2720 0082 03FB02F3 		mul	r3, r3, r2
 2721              		.loc 1 605 15
 2722 0086 7A68     		ldr	r2, [r7, #4]
 2723 0088 1344     		add	r3, r3, r2
 2724 008a BB60     		str	r3, [r7, #8]
 606:Src/w25qxx.c  **** 	if(w25qxx.ID>=W25Q256)
 2725              		.loc 1 606 11
 2726 008c 194B     		ldr	r3, .L175
 2727 008e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2728              		.loc 1 606 4
 2729 0090 082B     		cmp	r3, #8
 2730 0092 05D9     		bls	.L174
 607:Src/w25qxx.c  **** 		W25qxx_Spi((Page_Address & 0xFF000000) >> 24);
 2731              		.loc 1 607 42
 2732 0094 BB68     		ldr	r3, [r7, #8]
 2733 0096 1B0E     		lsrs	r3, r3, #24
 2734              		.loc 1 607 3
 2735 0098 DBB2     		uxtb	r3, r3
 2736 009a 1846     		mov	r0, r3
 2737 009c FFF7FEFF 		bl	W25qxx_Spi
 2738              	.L174:
 608:Src/w25qxx.c  ****   W25qxx_Spi((Page_Address & 0xFF0000) >> 16);
 2739              		.loc 1 608 40
 2740 00a0 BB68     		ldr	r3, [r7, #8]
 2741 00a2 1B0C     		lsrs	r3, r3, #16
 2742              		.loc 1 608 3
 2743 00a4 DBB2     		uxtb	r3, r3
 2744 00a6 1846     		mov	r0, r3
 2745 00a8 FFF7FEFF 		bl	W25qxx_Spi
 609:Src/w25qxx.c  ****   W25qxx_Spi((Page_Address & 0xFF00) >> 8);
 2746              		.loc 1 609 38
 2747 00ac BB68     		ldr	r3, [r7, #8]
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 60


 2748 00ae 1B0A     		lsrs	r3, r3, #8
 2749              		.loc 1 609 3
 2750 00b0 DBB2     		uxtb	r3, r3
 2751 00b2 1846     		mov	r0, r3
 2752 00b4 FFF7FEFF 		bl	W25qxx_Spi
 610:Src/w25qxx.c  ****   W25qxx_Spi(Page_Address&0xFF);
 2753              		.loc 1 610 3
 2754 00b8 BB68     		ldr	r3, [r7, #8]
 2755 00ba DBB2     		uxtb	r3, r3
 2756 00bc 1846     		mov	r0, r3
 2757 00be FFF7FEFF 		bl	W25qxx_Spi
 611:Src/w25qxx.c  **** 	HAL_SPI_Transmit(&_W25QXX_SPI,pBuffer,NumByteToWrite_up_to_PageSize,100);	
 2758              		.loc 1 611 2
 2759 00c2 3B68     		ldr	r3, [r7]
 2760 00c4 9AB2     		uxth	r2, r3
 2761 00c6 6423     		movs	r3, #100
 2762 00c8 F968     		ldr	r1, [r7, #12]
 2763 00ca 0C48     		ldr	r0, .L175+8
 2764 00cc FFF7FEFF 		bl	HAL_SPI_Transmit
 612:Src/w25qxx.c  **** 	HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_SET);
 2765              		.loc 1 612 2
 2766 00d0 0122     		movs	r2, #1
 2767 00d2 1021     		movs	r1, #16
 2768 00d4 0848     		ldr	r0, .L175+4
 2769 00d6 FFF7FEFF 		bl	HAL_GPIO_WritePin
 613:Src/w25qxx.c  ****   W25qxx_WaitForWriteEnd();
 2770              		.loc 1 613 3
 2771 00da FFF7FEFF 		bl	W25qxx_WaitForWriteEnd
 614:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 615:Src/w25qxx.c  **** 	StartTime = HAL_GetTick()-StartTime; 
 616:Src/w25qxx.c  **** 	for(uint32_t i=0;i<NumByteToWrite_up_to_PageSize ; i++)
 617:Src/w25qxx.c  **** 	{
 618:Src/w25qxx.c  **** 		if((i%8==0)&&(i>2))
 619:Src/w25qxx.c  **** 		{
 620:Src/w25qxx.c  **** 			printf("\r\n");
 621:Src/w25qxx.c  **** 			W25qxx_Delay(10);			
 622:Src/w25qxx.c  **** 		}
 623:Src/w25qxx.c  **** 		printf("0x%02X,",pBuffer[i]);		
 624:Src/w25qxx.c  **** 	}	
 625:Src/w25qxx.c  **** 	printf("\r\n");
 626:Src/w25qxx.c  **** 	printf("w25qxx WritePage done after %d ms\r\n",StartTime);
 627:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 628:Src/w25qxx.c  **** 	#endif	
 629:Src/w25qxx.c  **** 	W25qxx_Delay(1);
 2772              		.loc 1 629 2
 2773 00de 0120     		movs	r0, #1
 2774 00e0 FFF7FEFF 		bl	HAL_Delay
 630:Src/w25qxx.c  **** 	w25qxx.Lock=0;
 2775              		.loc 1 630 13
 2776 00e4 034B     		ldr	r3, .L175
 2777 00e6 0022     		movs	r2, #0
 2778 00e8 83F82720 		strb	r2, [r3, #39]
 631:Src/w25qxx.c  **** }
 2779              		.loc 1 631 1
 2780 00ec 00BF     		nop
 2781 00ee 1037     		adds	r7, r7, #16
 2782              	.LCFI101:
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 61


 2783              		.cfi_def_cfa_offset 8
 2784 00f0 BD46     		mov	sp, r7
 2785              	.LCFI102:
 2786              		.cfi_def_cfa_register 13
 2787              		@ sp needed
 2788 00f2 80BD     		pop	{r7, pc}
 2789              	.L176:
 2790              		.align	2
 2791              	.L175:
 2792 00f4 00000000 		.word	w25qxx
 2793 00f8 00080140 		.word	1073809408
 2794 00fc 00000000 		.word	hspi1
 2795              		.cfi_endproc
 2796              	.LFE86:
 2798              		.section	.text.W25qxx_WriteSector,"ax",%progbits
 2799              		.align	1
 2800              		.global	W25qxx_WriteSector
 2801              		.syntax unified
 2802              		.thumb
 2803              		.thumb_func
 2804              		.fpu softvfp
 2806              	W25qxx_WriteSector:
 2807              	.LFB87:
 632:Src/w25qxx.c  **** //#################################################################################################
 633:Src/w25qxx.c  **** void 	W25qxx_WriteSector(uint8_t *pBuffer	,uint32_t Sector_Address,uint32_t OffsetInByte	,uint32_t 
 634:Src/w25qxx.c  **** {
 2808              		.loc 1 634 1
 2809              		.cfi_startproc
 2810              		@ args = 0, pretend = 0, frame = 32
 2811              		@ frame_needed = 1, uses_anonymous_args = 0
 2812 0000 80B5     		push	{r7, lr}
 2813              	.LCFI103:
 2814              		.cfi_def_cfa_offset 8
 2815              		.cfi_offset 7, -8
 2816              		.cfi_offset 14, -4
 2817 0002 88B0     		sub	sp, sp, #32
 2818              	.LCFI104:
 2819              		.cfi_def_cfa_offset 40
 2820 0004 00AF     		add	r7, sp, #0
 2821              	.LCFI105:
 2822              		.cfi_def_cfa_register 7
 2823 0006 F860     		str	r0, [r7, #12]
 2824 0008 B960     		str	r1, [r7, #8]
 2825 000a 7A60     		str	r2, [r7, #4]
 2826 000c 3B60     		str	r3, [r7]
 635:Src/w25qxx.c  **** 	if((NumByteToWrite_up_to_SectorSize>w25qxx.SectorSize)||(NumByteToWrite_up_to_SectorSize==0))
 2827              		.loc 1 635 44
 2828 000e 2B4B     		ldr	r3, .L186
 2829 0010 1B69     		ldr	r3, [r3, #16]
 2830              		.loc 1 635 4
 2831 0012 3A68     		ldr	r2, [r7]
 2832 0014 9A42     		cmp	r2, r3
 2833 0016 02D8     		bhi	.L178
 2834              		.loc 1 635 56 discriminator 1
 2835 0018 3B68     		ldr	r3, [r7]
 2836 001a 002B     		cmp	r3, #0
 2837 001c 02D1     		bne	.L179
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 62


 2838              	.L178:
 636:Src/w25qxx.c  **** 		NumByteToWrite_up_to_SectorSize=w25qxx.SectorSize;
 2839              		.loc 1 636 34
 2840 001e 274B     		ldr	r3, .L186
 2841 0020 1B69     		ldr	r3, [r3, #16]
 2842 0022 3B60     		str	r3, [r7]
 2843              	.L179:
 637:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 638:Src/w25qxx.c  **** 	printf("+++w25qxx WriteSector:%d, Offset:%d ,Write %d Bytes, begin...\r\n",Sector_Address,OffsetIn
 639:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 640:Src/w25qxx.c  **** 	#endif	
 641:Src/w25qxx.c  **** 	if(OffsetInByte>=w25qxx.SectorSize)
 2844              		.loc 1 641 25
 2845 0024 254B     		ldr	r3, .L186
 2846 0026 1B69     		ldr	r3, [r3, #16]
 2847              		.loc 1 641 4
 2848 0028 7A68     		ldr	r2, [r7, #4]
 2849 002a 9A42     		cmp	r2, r3
 2850 002c 41D2     		bcs	.L185
 642:Src/w25qxx.c  **** 	{
 643:Src/w25qxx.c  **** 		#if (_W25QXX_DEBUG==1)
 644:Src/w25qxx.c  **** 		printf("---w25qxx WriteSector Faild!\r\n");
 645:Src/w25qxx.c  **** 		W25qxx_Delay(100);
 646:Src/w25qxx.c  **** 		#endif	
 647:Src/w25qxx.c  **** 		return;
 648:Src/w25qxx.c  **** 	}	
 649:Src/w25qxx.c  **** 	uint32_t	StartPage;
 650:Src/w25qxx.c  **** 	int32_t		BytesToWrite;
 651:Src/w25qxx.c  **** 	uint32_t	LocalOffset;	
 652:Src/w25qxx.c  **** 	if((OffsetInByte+NumByteToWrite_up_to_SectorSize) > w25qxx.SectorSize)
 2851              		.loc 1 652 18
 2852 002e 7A68     		ldr	r2, [r7, #4]
 2853 0030 3B68     		ldr	r3, [r7]
 2854 0032 1A44     		add	r2, r2, r3
 2855              		.loc 1 652 60
 2856 0034 214B     		ldr	r3, .L186
 2857 0036 1B69     		ldr	r3, [r3, #16]
 2858              		.loc 1 652 4
 2859 0038 9A42     		cmp	r2, r3
 2860 003a 05D9     		bls	.L182
 653:Src/w25qxx.c  **** 		BytesToWrite = w25qxx.SectorSize-OffsetInByte;
 2861              		.loc 1 653 24
 2862 003c 1F4B     		ldr	r3, .L186
 2863 003e 1A69     		ldr	r2, [r3, #16]
 2864              		.loc 1 653 35
 2865 0040 7B68     		ldr	r3, [r7, #4]
 2866 0042 D31A     		subs	r3, r2, r3
 2867              		.loc 1 653 16
 2868 0044 BB61     		str	r3, [r7, #24]
 2869 0046 01E0     		b	.L183
 2870              	.L182:
 654:Src/w25qxx.c  **** 	else
 655:Src/w25qxx.c  **** 		BytesToWrite = NumByteToWrite_up_to_SectorSize;	
 2871              		.loc 1 655 16
 2872 0048 3B68     		ldr	r3, [r7]
 2873 004a BB61     		str	r3, [r7, #24]
 2874              	.L183:
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 63


 656:Src/w25qxx.c  **** 	StartPage = W25qxx_SectorToPage(Sector_Address)+(OffsetInByte/w25qxx.PageSize);
 2875              		.loc 1 656 14
 2876 004c B868     		ldr	r0, [r7, #8]
 2877 004e FFF7FEFF 		bl	W25qxx_SectorToPage
 2878 0052 0246     		mov	r2, r0
 2879              		.loc 1 656 70
 2880 0054 194B     		ldr	r3, .L186
 2881 0056 5B89     		ldrh	r3, [r3, #10]
 2882 0058 1946     		mov	r1, r3
 2883              		.loc 1 656 63
 2884 005a 7B68     		ldr	r3, [r7, #4]
 2885 005c B3FBF1F3 		udiv	r3, r3, r1
 2886              		.loc 1 656 12
 2887 0060 1344     		add	r3, r3, r2
 2888 0062 FB61     		str	r3, [r7, #28]
 657:Src/w25qxx.c  **** 	LocalOffset = OffsetInByte%w25qxx.PageSize;	
 2889              		.loc 1 657 35
 2890 0064 154B     		ldr	r3, .L186
 2891 0066 5B89     		ldrh	r3, [r3, #10]
 2892 0068 1A46     		mov	r2, r3
 2893              		.loc 1 657 14
 2894 006a 7B68     		ldr	r3, [r7, #4]
 2895 006c B3FBF2F1 		udiv	r1, r3, r2
 2896 0070 02FB01F2 		mul	r2, r2, r1
 2897 0074 9B1A     		subs	r3, r3, r2
 2898 0076 7B61     		str	r3, [r7, #20]
 2899              	.L184:
 658:Src/w25qxx.c  **** 	do
 659:Src/w25qxx.c  **** 	{		
 660:Src/w25qxx.c  **** 		W25qxx_WritePage(pBuffer,StartPage,LocalOffset,BytesToWrite);
 2900              		.loc 1 660 3 discriminator 1
 2901 0078 BB69     		ldr	r3, [r7, #24]
 2902 007a 7A69     		ldr	r2, [r7, #20]
 2903 007c F969     		ldr	r1, [r7, #28]
 2904 007e F868     		ldr	r0, [r7, #12]
 2905 0080 FFF7FEFF 		bl	W25qxx_WritePage
 661:Src/w25qxx.c  **** 		StartPage++;
 2906              		.loc 1 661 12 discriminator 1
 2907 0084 FB69     		ldr	r3, [r7, #28]
 2908 0086 0133     		adds	r3, r3, #1
 2909 0088 FB61     		str	r3, [r7, #28]
 662:Src/w25qxx.c  **** 		BytesToWrite-=w25qxx.PageSize-LocalOffset;
 2910              		.loc 1 662 23 discriminator 1
 2911 008a 0C4B     		ldr	r3, .L186
 2912 008c 5B89     		ldrh	r3, [r3, #10]
 2913 008e 1A46     		mov	r2, r3
 2914              		.loc 1 662 15 discriminator 1
 2915 0090 7B69     		ldr	r3, [r7, #20]
 2916 0092 9A1A     		subs	r2, r3, r2
 2917 0094 BB69     		ldr	r3, [r7, #24]
 2918 0096 1344     		add	r3, r3, r2
 2919 0098 BB61     		str	r3, [r7, #24]
 663:Src/w25qxx.c  **** 		pBuffer+=w25qxx.PageSize;	
 2920              		.loc 1 663 18 discriminator 1
 2921 009a 084B     		ldr	r3, .L186
 2922 009c 5B89     		ldrh	r3, [r3, #10]
 2923 009e 1A46     		mov	r2, r3
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 64


 2924              		.loc 1 663 10 discriminator 1
 2925 00a0 FB68     		ldr	r3, [r7, #12]
 2926 00a2 1344     		add	r3, r3, r2
 2927 00a4 FB60     		str	r3, [r7, #12]
 664:Src/w25qxx.c  **** 		LocalOffset=0;
 2928              		.loc 1 664 14 discriminator 1
 2929 00a6 0023     		movs	r3, #0
 2930 00a8 7B61     		str	r3, [r7, #20]
 665:Src/w25qxx.c  **** 	}while(BytesToWrite>0);		
 2931              		.loc 1 665 2 discriminator 1
 2932 00aa BB69     		ldr	r3, [r7, #24]
 2933 00ac 002B     		cmp	r3, #0
 2934 00ae E3DC     		bgt	.L184
 2935 00b0 00E0     		b	.L177
 2936              	.L185:
 647:Src/w25qxx.c  **** 	}	
 2937              		.loc 1 647 3
 2938 00b2 00BF     		nop
 2939              	.L177:
 666:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 667:Src/w25qxx.c  **** 	printf("---w25qxx WriteSector Done\r\n");
 668:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 669:Src/w25qxx.c  **** 	#endif	
 670:Src/w25qxx.c  **** }
 2940              		.loc 1 670 1
 2941 00b4 2037     		adds	r7, r7, #32
 2942              	.LCFI106:
 2943              		.cfi_def_cfa_offset 8
 2944 00b6 BD46     		mov	sp, r7
 2945              	.LCFI107:
 2946              		.cfi_def_cfa_register 13
 2947              		@ sp needed
 2948 00b8 80BD     		pop	{r7, pc}
 2949              	.L187:
 2950 00ba 00BF     		.align	2
 2951              	.L186:
 2952 00bc 00000000 		.word	w25qxx
 2953              		.cfi_endproc
 2954              	.LFE87:
 2956              		.section	.text.W25qxx_WriteBlock,"ax",%progbits
 2957              		.align	1
 2958              		.global	W25qxx_WriteBlock
 2959              		.syntax unified
 2960              		.thumb
 2961              		.thumb_func
 2962              		.fpu softvfp
 2964              	W25qxx_WriteBlock:
 2965              	.LFB88:
 671:Src/w25qxx.c  **** //#################################################################################################
 672:Src/w25qxx.c  **** void 	W25qxx_WriteBlock	(uint8_t* pBuffer ,uint32_t Block_Address	,uint32_t OffsetInByte	,uint32_t	
 673:Src/w25qxx.c  **** {
 2966              		.loc 1 673 1
 2967              		.cfi_startproc
 2968              		@ args = 0, pretend = 0, frame = 32
 2969              		@ frame_needed = 1, uses_anonymous_args = 0
 2970 0000 80B5     		push	{r7, lr}
 2971              	.LCFI108:
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 65


 2972              		.cfi_def_cfa_offset 8
 2973              		.cfi_offset 7, -8
 2974              		.cfi_offset 14, -4
 2975 0002 88B0     		sub	sp, sp, #32
 2976              	.LCFI109:
 2977              		.cfi_def_cfa_offset 40
 2978 0004 00AF     		add	r7, sp, #0
 2979              	.LCFI110:
 2980              		.cfi_def_cfa_register 7
 2981 0006 F860     		str	r0, [r7, #12]
 2982 0008 B960     		str	r1, [r7, #8]
 2983 000a 7A60     		str	r2, [r7, #4]
 2984 000c 3B60     		str	r3, [r7]
 674:Src/w25qxx.c  **** 	if((NumByteToWrite_up_to_BlockSize>w25qxx.BlockSize)||(NumByteToWrite_up_to_BlockSize==0))
 2985              		.loc 1 674 43
 2986 000e 2B4B     		ldr	r3, .L197
 2987 0010 9B69     		ldr	r3, [r3, #24]
 2988              		.loc 1 674 4
 2989 0012 3A68     		ldr	r2, [r7]
 2990 0014 9A42     		cmp	r2, r3
 2991 0016 02D8     		bhi	.L189
 2992              		.loc 1 674 54 discriminator 1
 2993 0018 3B68     		ldr	r3, [r7]
 2994 001a 002B     		cmp	r3, #0
 2995 001c 02D1     		bne	.L190
 2996              	.L189:
 675:Src/w25qxx.c  **** 		NumByteToWrite_up_to_BlockSize=w25qxx.BlockSize;
 2997              		.loc 1 675 33
 2998 001e 274B     		ldr	r3, .L197
 2999 0020 9B69     		ldr	r3, [r3, #24]
 3000 0022 3B60     		str	r3, [r7]
 3001              	.L190:
 676:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 677:Src/w25qxx.c  **** 	printf("+++w25qxx WriteBlock:%d, Offset:%d ,Write %d Bytes, begin...\r\n",Block_Address,OffsetInBy
 678:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 679:Src/w25qxx.c  **** 	#endif	
 680:Src/w25qxx.c  **** 	if(OffsetInByte>=w25qxx.BlockSize)
 3002              		.loc 1 680 25
 3003 0024 254B     		ldr	r3, .L197
 3004 0026 9B69     		ldr	r3, [r3, #24]
 3005              		.loc 1 680 4
 3006 0028 7A68     		ldr	r2, [r7, #4]
 3007 002a 9A42     		cmp	r2, r3
 3008 002c 41D2     		bcs	.L196
 681:Src/w25qxx.c  **** 	{
 682:Src/w25qxx.c  **** 		#if (_W25QXX_DEBUG==1)
 683:Src/w25qxx.c  **** 		printf("---w25qxx WriteBlock Faild!\r\n");
 684:Src/w25qxx.c  **** 		W25qxx_Delay(100);
 685:Src/w25qxx.c  **** 		#endif	
 686:Src/w25qxx.c  **** 		return;
 687:Src/w25qxx.c  **** 	}	
 688:Src/w25qxx.c  **** 	uint32_t	StartPage;
 689:Src/w25qxx.c  **** 	int32_t		BytesToWrite;
 690:Src/w25qxx.c  **** 	uint32_t	LocalOffset;	
 691:Src/w25qxx.c  **** 	if((OffsetInByte+NumByteToWrite_up_to_BlockSize) > w25qxx.BlockSize)
 3009              		.loc 1 691 18
 3010 002e 7A68     		ldr	r2, [r7, #4]
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 66


 3011 0030 3B68     		ldr	r3, [r7]
 3012 0032 1A44     		add	r2, r2, r3
 3013              		.loc 1 691 59
 3014 0034 214B     		ldr	r3, .L197
 3015 0036 9B69     		ldr	r3, [r3, #24]
 3016              		.loc 1 691 4
 3017 0038 9A42     		cmp	r2, r3
 3018 003a 05D9     		bls	.L193
 692:Src/w25qxx.c  **** 		BytesToWrite = w25qxx.BlockSize-OffsetInByte;
 3019              		.loc 1 692 24
 3020 003c 1F4B     		ldr	r3, .L197
 3021 003e 9A69     		ldr	r2, [r3, #24]
 3022              		.loc 1 692 34
 3023 0040 7B68     		ldr	r3, [r7, #4]
 3024 0042 D31A     		subs	r3, r2, r3
 3025              		.loc 1 692 16
 3026 0044 BB61     		str	r3, [r7, #24]
 3027 0046 01E0     		b	.L194
 3028              	.L193:
 693:Src/w25qxx.c  **** 	else
 694:Src/w25qxx.c  **** 		BytesToWrite = NumByteToWrite_up_to_BlockSize;	
 3029              		.loc 1 694 16
 3030 0048 3B68     		ldr	r3, [r7]
 3031 004a BB61     		str	r3, [r7, #24]
 3032              	.L194:
 695:Src/w25qxx.c  **** 	StartPage = W25qxx_BlockToPage(Block_Address)+(OffsetInByte/w25qxx.PageSize);
 3033              		.loc 1 695 14
 3034 004c B868     		ldr	r0, [r7, #8]
 3035 004e FFF7FEFF 		bl	W25qxx_BlockToPage
 3036 0052 0246     		mov	r2, r0
 3037              		.loc 1 695 68
 3038 0054 194B     		ldr	r3, .L197
 3039 0056 5B89     		ldrh	r3, [r3, #10]
 3040 0058 1946     		mov	r1, r3
 3041              		.loc 1 695 61
 3042 005a 7B68     		ldr	r3, [r7, #4]
 3043 005c B3FBF1F3 		udiv	r3, r3, r1
 3044              		.loc 1 695 12
 3045 0060 1344     		add	r3, r3, r2
 3046 0062 FB61     		str	r3, [r7, #28]
 696:Src/w25qxx.c  **** 	LocalOffset = OffsetInByte%w25qxx.PageSize;	
 3047              		.loc 1 696 35
 3048 0064 154B     		ldr	r3, .L197
 3049 0066 5B89     		ldrh	r3, [r3, #10]
 3050 0068 1A46     		mov	r2, r3
 3051              		.loc 1 696 14
 3052 006a 7B68     		ldr	r3, [r7, #4]
 3053 006c B3FBF2F1 		udiv	r1, r3, r2
 3054 0070 02FB01F2 		mul	r2, r2, r1
 3055 0074 9B1A     		subs	r3, r3, r2
 3056 0076 7B61     		str	r3, [r7, #20]
 3057              	.L195:
 697:Src/w25qxx.c  **** 	do
 698:Src/w25qxx.c  **** 	{		
 699:Src/w25qxx.c  **** 		W25qxx_WritePage(pBuffer,StartPage,LocalOffset,BytesToWrite);
 3058              		.loc 1 699 3 discriminator 1
 3059 0078 BB69     		ldr	r3, [r7, #24]
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 67


 3060 007a 7A69     		ldr	r2, [r7, #20]
 3061 007c F969     		ldr	r1, [r7, #28]
 3062 007e F868     		ldr	r0, [r7, #12]
 3063 0080 FFF7FEFF 		bl	W25qxx_WritePage
 700:Src/w25qxx.c  **** 		StartPage++;
 3064              		.loc 1 700 12 discriminator 1
 3065 0084 FB69     		ldr	r3, [r7, #28]
 3066 0086 0133     		adds	r3, r3, #1
 3067 0088 FB61     		str	r3, [r7, #28]
 701:Src/w25qxx.c  **** 		BytesToWrite-=w25qxx.PageSize-LocalOffset;
 3068              		.loc 1 701 23 discriminator 1
 3069 008a 0C4B     		ldr	r3, .L197
 3070 008c 5B89     		ldrh	r3, [r3, #10]
 3071 008e 1A46     		mov	r2, r3
 3072              		.loc 1 701 15 discriminator 1
 3073 0090 7B69     		ldr	r3, [r7, #20]
 3074 0092 9A1A     		subs	r2, r3, r2
 3075 0094 BB69     		ldr	r3, [r7, #24]
 3076 0096 1344     		add	r3, r3, r2
 3077 0098 BB61     		str	r3, [r7, #24]
 702:Src/w25qxx.c  **** 		pBuffer+=w25qxx.PageSize;	
 3078              		.loc 1 702 18 discriminator 1
 3079 009a 084B     		ldr	r3, .L197
 3080 009c 5B89     		ldrh	r3, [r3, #10]
 3081 009e 1A46     		mov	r2, r3
 3082              		.loc 1 702 10 discriminator 1
 3083 00a0 FB68     		ldr	r3, [r7, #12]
 3084 00a2 1344     		add	r3, r3, r2
 3085 00a4 FB60     		str	r3, [r7, #12]
 703:Src/w25qxx.c  **** 		LocalOffset=0;
 3086              		.loc 1 703 14 discriminator 1
 3087 00a6 0023     		movs	r3, #0
 3088 00a8 7B61     		str	r3, [r7, #20]
 704:Src/w25qxx.c  **** 	}while(BytesToWrite>0);		
 3089              		.loc 1 704 2 discriminator 1
 3090 00aa BB69     		ldr	r3, [r7, #24]
 3091 00ac 002B     		cmp	r3, #0
 3092 00ae E3DC     		bgt	.L195
 3093 00b0 00E0     		b	.L188
 3094              	.L196:
 686:Src/w25qxx.c  **** 	}	
 3095              		.loc 1 686 3
 3096 00b2 00BF     		nop
 3097              	.L188:
 705:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 706:Src/w25qxx.c  **** 	printf("---w25qxx WriteBlock Done\r\n");
 707:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 708:Src/w25qxx.c  **** 	#endif	
 709:Src/w25qxx.c  **** }
 3098              		.loc 1 709 1
 3099 00b4 2037     		adds	r7, r7, #32
 3100              	.LCFI111:
 3101              		.cfi_def_cfa_offset 8
 3102 00b6 BD46     		mov	sp, r7
 3103              	.LCFI112:
 3104              		.cfi_def_cfa_register 13
 3105              		@ sp needed
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 68


 3106 00b8 80BD     		pop	{r7, pc}
 3107              	.L198:
 3108 00ba 00BF     		.align	2
 3109              	.L197:
 3110 00bc 00000000 		.word	w25qxx
 3111              		.cfi_endproc
 3112              	.LFE88:
 3114              		.section	.text.W25qxx_ReadByte,"ax",%progbits
 3115              		.align	1
 3116              		.global	W25qxx_ReadByte
 3117              		.syntax unified
 3118              		.thumb
 3119              		.thumb_func
 3120              		.fpu softvfp
 3122              	W25qxx_ReadByte:
 3123              	.LFB89:
 710:Src/w25qxx.c  **** //#################################################################################################
 711:Src/w25qxx.c  **** void 	W25qxx_ReadByte(uint8_t *pBuffer,uint32_t Bytes_Address)
 712:Src/w25qxx.c  **** {
 3124              		.loc 1 712 1
 3125              		.cfi_startproc
 3126              		@ args = 0, pretend = 0, frame = 8
 3127              		@ frame_needed = 1, uses_anonymous_args = 0
 3128 0000 80B5     		push	{r7, lr}
 3129              	.LCFI113:
 3130              		.cfi_def_cfa_offset 8
 3131              		.cfi_offset 7, -8
 3132              		.cfi_offset 14, -4
 3133 0002 82B0     		sub	sp, sp, #8
 3134              	.LCFI114:
 3135              		.cfi_def_cfa_offset 16
 3136 0004 00AF     		add	r7, sp, #0
 3137              	.LCFI115:
 3138              		.cfi_def_cfa_register 7
 3139 0006 7860     		str	r0, [r7, #4]
 3140 0008 3960     		str	r1, [r7]
 713:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 3141              		.loc 1 713 7
 3142 000a 02E0     		b	.L200
 3143              	.L201:
 714:Src/w25qxx.c  **** 		W25qxx_Delay(1);
 3144              		.loc 1 714 3
 3145 000c 0120     		movs	r0, #1
 3146 000e FFF7FEFF 		bl	HAL_Delay
 3147              	.L200:
 713:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 3148              		.loc 1 713 14
 3149 0012 214B     		ldr	r3, .L203
 3150 0014 93F82730 		ldrb	r3, [r3, #39]	@ zero_extendqisi2
 713:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 3151              		.loc 1 713 7
 3152 0018 012B     		cmp	r3, #1
 3153 001a F7D0     		beq	.L201
 715:Src/w25qxx.c  **** 	w25qxx.Lock=1;
 3154              		.loc 1 715 13
 3155 001c 1E4B     		ldr	r3, .L203
 3156 001e 0122     		movs	r2, #1
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 69


 3157 0020 83F82720 		strb	r2, [r3, #39]
 716:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 717:Src/w25qxx.c  **** 	uint32_t	StartTime=HAL_GetTick();
 718:Src/w25qxx.c  **** 	printf("w25qxx ReadByte at address %d begin...\r\n",Bytes_Address);
 719:Src/w25qxx.c  **** 	#endif
 720:Src/w25qxx.c  **** 	HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_RESET);
 3158              		.loc 1 720 2
 3159 0024 0022     		movs	r2, #0
 3160 0026 1021     		movs	r1, #16
 3161 0028 1C48     		ldr	r0, .L203+4
 3162 002a FFF7FEFF 		bl	HAL_GPIO_WritePin
 721:Src/w25qxx.c  ****   W25qxx_Spi(0x0B);
 3163              		.loc 1 721 3
 3164 002e 0B20     		movs	r0, #11
 3165 0030 FFF7FEFF 		bl	W25qxx_Spi
 722:Src/w25qxx.c  **** 	if(w25qxx.ID>=W25Q256)
 3166              		.loc 1 722 11
 3167 0034 184B     		ldr	r3, .L203
 3168 0036 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3169              		.loc 1 722 4
 3170 0038 082B     		cmp	r3, #8
 3171 003a 05D9     		bls	.L202
 723:Src/w25qxx.c  **** 		W25qxx_Spi((Bytes_Address & 0xFF000000) >> 24);
 3172              		.loc 1 723 43
 3173 003c 3B68     		ldr	r3, [r7]
 3174 003e 1B0E     		lsrs	r3, r3, #24
 3175              		.loc 1 723 3
 3176 0040 DBB2     		uxtb	r3, r3
 3177 0042 1846     		mov	r0, r3
 3178 0044 FFF7FEFF 		bl	W25qxx_Spi
 3179              	.L202:
 724:Src/w25qxx.c  ****   W25qxx_Spi((Bytes_Address & 0xFF0000) >> 16);
 3180              		.loc 1 724 41
 3181 0048 3B68     		ldr	r3, [r7]
 3182 004a 1B0C     		lsrs	r3, r3, #16
 3183              		.loc 1 724 3
 3184 004c DBB2     		uxtb	r3, r3
 3185 004e 1846     		mov	r0, r3
 3186 0050 FFF7FEFF 		bl	W25qxx_Spi
 725:Src/w25qxx.c  ****   W25qxx_Spi((Bytes_Address& 0xFF00) >> 8);
 3187              		.loc 1 725 38
 3188 0054 3B68     		ldr	r3, [r7]
 3189 0056 1B0A     		lsrs	r3, r3, #8
 3190              		.loc 1 725 3
 3191 0058 DBB2     		uxtb	r3, r3
 3192 005a 1846     		mov	r0, r3
 3193 005c FFF7FEFF 		bl	W25qxx_Spi
 726:Src/w25qxx.c  ****   W25qxx_Spi(Bytes_Address & 0xFF);
 3194              		.loc 1 726 3
 3195 0060 3B68     		ldr	r3, [r7]
 3196 0062 DBB2     		uxtb	r3, r3
 3197 0064 1846     		mov	r0, r3
 3198 0066 FFF7FEFF 		bl	W25qxx_Spi
 727:Src/w25qxx.c  **** 	W25qxx_Spi(0);
 3199              		.loc 1 727 2
 3200 006a 0020     		movs	r0, #0
 3201 006c FFF7FEFF 		bl	W25qxx_Spi
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 70


 728:Src/w25qxx.c  **** 	*pBuffer = W25qxx_Spi(W25QXX_DUMMY_BYTE);
 3202              		.loc 1 728 13
 3203 0070 A520     		movs	r0, #165
 3204 0072 FFF7FEFF 		bl	W25qxx_Spi
 3205 0076 0346     		mov	r3, r0
 3206 0078 1A46     		mov	r2, r3
 3207              		.loc 1 728 11
 3208 007a 7B68     		ldr	r3, [r7, #4]
 3209 007c 1A70     		strb	r2, [r3]
 729:Src/w25qxx.c  **** 	HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_SET);	
 3210              		.loc 1 729 2
 3211 007e 0122     		movs	r2, #1
 3212 0080 1021     		movs	r1, #16
 3213 0082 0648     		ldr	r0, .L203+4
 3214 0084 FFF7FEFF 		bl	HAL_GPIO_WritePin
 730:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 731:Src/w25qxx.c  **** 	printf("w25qxx ReadByte 0x%02X done after %d ms\r\n",*pBuffer,HAL_GetTick()-StartTime);
 732:Src/w25qxx.c  **** 	#endif
 733:Src/w25qxx.c  **** 	w25qxx.Lock=0;
 3215              		.loc 1 733 13
 3216 0088 034B     		ldr	r3, .L203
 3217 008a 0022     		movs	r2, #0
 3218 008c 83F82720 		strb	r2, [r3, #39]
 734:Src/w25qxx.c  **** }
 3219              		.loc 1 734 1
 3220 0090 00BF     		nop
 3221 0092 0837     		adds	r7, r7, #8
 3222              	.LCFI116:
 3223              		.cfi_def_cfa_offset 8
 3224 0094 BD46     		mov	sp, r7
 3225              	.LCFI117:
 3226              		.cfi_def_cfa_register 13
 3227              		@ sp needed
 3228 0096 80BD     		pop	{r7, pc}
 3229              	.L204:
 3230              		.align	2
 3231              	.L203:
 3232 0098 00000000 		.word	w25qxx
 3233 009c 00080140 		.word	1073809408
 3234              		.cfi_endproc
 3235              	.LFE89:
 3237              		.section	.text.W25qxx_ReadBytes,"ax",%progbits
 3238              		.align	1
 3239              		.global	W25qxx_ReadBytes
 3240              		.syntax unified
 3241              		.thumb
 3242              		.thumb_func
 3243              		.fpu softvfp
 3245              	W25qxx_ReadBytes:
 3246              	.LFB90:
 735:Src/w25qxx.c  **** //#################################################################################################
 736:Src/w25qxx.c  **** void W25qxx_ReadBytes(uint8_t* pBuffer, uint32_t ReadAddr, uint32_t NumByteToRead)
 737:Src/w25qxx.c  **** {
 3247              		.loc 1 737 1
 3248              		.cfi_startproc
 3249              		@ args = 0, pretend = 0, frame = 16
 3250              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 71


 3251 0000 80B5     		push	{r7, lr}
 3252              	.LCFI118:
 3253              		.cfi_def_cfa_offset 8
 3254              		.cfi_offset 7, -8
 3255              		.cfi_offset 14, -4
 3256 0002 84B0     		sub	sp, sp, #16
 3257              	.LCFI119:
 3258              		.cfi_def_cfa_offset 24
 3259 0004 00AF     		add	r7, sp, #0
 3260              	.LCFI120:
 3261              		.cfi_def_cfa_register 7
 3262 0006 F860     		str	r0, [r7, #12]
 3263 0008 B960     		str	r1, [r7, #8]
 3264 000a 7A60     		str	r2, [r7, #4]
 738:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 3265              		.loc 1 738 7
 3266 000c 02E0     		b	.L206
 3267              	.L207:
 739:Src/w25qxx.c  **** 		W25qxx_Delay(1);
 3268              		.loc 1 739 3
 3269 000e 0120     		movs	r0, #1
 3270 0010 FFF7FEFF 		bl	HAL_Delay
 3271              	.L206:
 738:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 3272              		.loc 1 738 14
 3273 0014 234B     		ldr	r3, .L209
 3274 0016 93F82730 		ldrb	r3, [r3, #39]	@ zero_extendqisi2
 738:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 3275              		.loc 1 738 7
 3276 001a 012B     		cmp	r3, #1
 3277 001c F7D0     		beq	.L207
 740:Src/w25qxx.c  **** 	w25qxx.Lock=1;
 3278              		.loc 1 740 13
 3279 001e 214B     		ldr	r3, .L209
 3280 0020 0122     		movs	r2, #1
 3281 0022 83F82720 		strb	r2, [r3, #39]
 741:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 742:Src/w25qxx.c  **** 	uint32_t	StartTime=HAL_GetTick();
 743:Src/w25qxx.c  **** 	printf("w25qxx ReadBytes at Address:%d, %d Bytes  begin...\r\n",ReadAddr,NumByteToRead);
 744:Src/w25qxx.c  **** 	#endif	
 745:Src/w25qxx.c  **** 	HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_RESET);
 3282              		.loc 1 745 2
 3283 0026 0022     		movs	r2, #0
 3284 0028 1021     		movs	r1, #16
 3285 002a 1F48     		ldr	r0, .L209+4
 3286 002c FFF7FEFF 		bl	HAL_GPIO_WritePin
 746:Src/w25qxx.c  **** 	W25qxx_Spi(0x0B);
 3287              		.loc 1 746 2
 3288 0030 0B20     		movs	r0, #11
 3289 0032 FFF7FEFF 		bl	W25qxx_Spi
 747:Src/w25qxx.c  **** 	if(w25qxx.ID>=W25Q256)
 3290              		.loc 1 747 11
 3291 0036 1B4B     		ldr	r3, .L209
 3292 0038 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3293              		.loc 1 747 4
 3294 003a 082B     		cmp	r3, #8
 3295 003c 05D9     		bls	.L208
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 72


 748:Src/w25qxx.c  **** 		W25qxx_Spi((ReadAddr & 0xFF000000) >> 24);
 3296              		.loc 1 748 38
 3297 003e BB68     		ldr	r3, [r7, #8]
 3298 0040 1B0E     		lsrs	r3, r3, #24
 3299              		.loc 1 748 3
 3300 0042 DBB2     		uxtb	r3, r3
 3301 0044 1846     		mov	r0, r3
 3302 0046 FFF7FEFF 		bl	W25qxx_Spi
 3303              	.L208:
 749:Src/w25qxx.c  ****   W25qxx_Spi((ReadAddr & 0xFF0000) >> 16);
 3304              		.loc 1 749 36
 3305 004a BB68     		ldr	r3, [r7, #8]
 3306 004c 1B0C     		lsrs	r3, r3, #16
 3307              		.loc 1 749 3
 3308 004e DBB2     		uxtb	r3, r3
 3309 0050 1846     		mov	r0, r3
 3310 0052 FFF7FEFF 		bl	W25qxx_Spi
 750:Src/w25qxx.c  ****   W25qxx_Spi((ReadAddr& 0xFF00) >> 8);
 3311              		.loc 1 750 33
 3312 0056 BB68     		ldr	r3, [r7, #8]
 3313 0058 1B0A     		lsrs	r3, r3, #8
 3314              		.loc 1 750 3
 3315 005a DBB2     		uxtb	r3, r3
 3316 005c 1846     		mov	r0, r3
 3317 005e FFF7FEFF 		bl	W25qxx_Spi
 751:Src/w25qxx.c  ****   W25qxx_Spi(ReadAddr & 0xFF);
 3318              		.loc 1 751 3
 3319 0062 BB68     		ldr	r3, [r7, #8]
 3320 0064 DBB2     		uxtb	r3, r3
 3321 0066 1846     		mov	r0, r3
 3322 0068 FFF7FEFF 		bl	W25qxx_Spi
 752:Src/w25qxx.c  **** 	W25qxx_Spi(0);
 3323              		.loc 1 752 2
 3324 006c 0020     		movs	r0, #0
 3325 006e FFF7FEFF 		bl	W25qxx_Spi
 753:Src/w25qxx.c  **** 	HAL_SPI_Receive(&_W25QXX_SPI,pBuffer,NumByteToRead,2000);	
 3326              		.loc 1 753 2
 3327 0072 7B68     		ldr	r3, [r7, #4]
 3328 0074 9AB2     		uxth	r2, r3
 3329 0076 4FF4FA63 		mov	r3, #2000
 3330 007a F968     		ldr	r1, [r7, #12]
 3331 007c 0B48     		ldr	r0, .L209+8
 3332 007e FFF7FEFF 		bl	HAL_SPI_Receive
 754:Src/w25qxx.c  **** 	HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_SET);
 3333              		.loc 1 754 2
 3334 0082 0122     		movs	r2, #1
 3335 0084 1021     		movs	r1, #16
 3336 0086 0848     		ldr	r0, .L209+4
 3337 0088 FFF7FEFF 		bl	HAL_GPIO_WritePin
 755:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 756:Src/w25qxx.c  **** 	StartTime = HAL_GetTick()-StartTime; 
 757:Src/w25qxx.c  **** 	for(uint32_t i=0;i<NumByteToRead ; i++)
 758:Src/w25qxx.c  **** 	{
 759:Src/w25qxx.c  **** 		if((i%8==0)&&(i>2))
 760:Src/w25qxx.c  **** 		{
 761:Src/w25qxx.c  **** 			printf("\r\n");
 762:Src/w25qxx.c  **** 			W25qxx_Delay(10);
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 73


 763:Src/w25qxx.c  **** 		}
 764:Src/w25qxx.c  **** 		printf("0x%02X,",pBuffer[i]);		
 765:Src/w25qxx.c  **** 	}
 766:Src/w25qxx.c  **** 	printf("\r\n");
 767:Src/w25qxx.c  **** 	printf("w25qxx ReadBytes done after %d ms\r\n",StartTime);
 768:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 769:Src/w25qxx.c  **** 	#endif	
 770:Src/w25qxx.c  **** 	W25qxx_Delay(1);
 3338              		.loc 1 770 2
 3339 008c 0120     		movs	r0, #1
 3340 008e FFF7FEFF 		bl	HAL_Delay
 771:Src/w25qxx.c  **** 	w25qxx.Lock=0;
 3341              		.loc 1 771 13
 3342 0092 044B     		ldr	r3, .L209
 3343 0094 0022     		movs	r2, #0
 3344 0096 83F82720 		strb	r2, [r3, #39]
 772:Src/w25qxx.c  **** }
 3345              		.loc 1 772 1
 3346 009a 00BF     		nop
 3347 009c 1037     		adds	r7, r7, #16
 3348              	.LCFI121:
 3349              		.cfi_def_cfa_offset 8
 3350 009e BD46     		mov	sp, r7
 3351              	.LCFI122:
 3352              		.cfi_def_cfa_register 13
 3353              		@ sp needed
 3354 00a0 80BD     		pop	{r7, pc}
 3355              	.L210:
 3356 00a2 00BF     		.align	2
 3357              	.L209:
 3358 00a4 00000000 		.word	w25qxx
 3359 00a8 00080140 		.word	1073809408
 3360 00ac 00000000 		.word	hspi1
 3361              		.cfi_endproc
 3362              	.LFE90:
 3364              		.section	.text.W25qxx_ReadPage,"ax",%progbits
 3365              		.align	1
 3366              		.global	W25qxx_ReadPage
 3367              		.syntax unified
 3368              		.thumb
 3369              		.thumb_func
 3370              		.fpu softvfp
 3372              	W25qxx_ReadPage:
 3373              	.LFB91:
 773:Src/w25qxx.c  **** //#################################################################################################
 774:Src/w25qxx.c  **** void 	W25qxx_ReadPage(uint8_t *pBuffer,uint32_t Page_Address,uint32_t OffsetInByte,uint32_t NumByte
 775:Src/w25qxx.c  **** {
 3374              		.loc 1 775 1
 3375              		.cfi_startproc
 3376              		@ args = 0, pretend = 0, frame = 16
 3377              		@ frame_needed = 1, uses_anonymous_args = 0
 3378 0000 80B5     		push	{r7, lr}
 3379              	.LCFI123:
 3380              		.cfi_def_cfa_offset 8
 3381              		.cfi_offset 7, -8
 3382              		.cfi_offset 14, -4
 3383 0002 84B0     		sub	sp, sp, #16
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 74


 3384              	.LCFI124:
 3385              		.cfi_def_cfa_offset 24
 3386 0004 00AF     		add	r7, sp, #0
 3387              	.LCFI125:
 3388              		.cfi_def_cfa_register 7
 3389 0006 F860     		str	r0, [r7, #12]
 3390 0008 B960     		str	r1, [r7, #8]
 3391 000a 7A60     		str	r2, [r7, #4]
 3392 000c 3B60     		str	r3, [r7]
 776:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 3393              		.loc 1 776 7
 3394 000e 02E0     		b	.L212
 3395              	.L213:
 777:Src/w25qxx.c  **** 		W25qxx_Delay(1);
 3396              		.loc 1 777 3
 3397 0010 0120     		movs	r0, #1
 3398 0012 FFF7FEFF 		bl	HAL_Delay
 3399              	.L212:
 776:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 3400              		.loc 1 776 14
 3401 0016 344B     		ldr	r3, .L218
 3402 0018 93F82730 		ldrb	r3, [r3, #39]	@ zero_extendqisi2
 776:Src/w25qxx.c  **** 	while(w25qxx.Lock==1)
 3403              		.loc 1 776 7
 3404 001c 012B     		cmp	r3, #1
 3405 001e F7D0     		beq	.L213
 778:Src/w25qxx.c  **** 	w25qxx.Lock=1;
 3406              		.loc 1 778 13
 3407 0020 314B     		ldr	r3, .L218
 3408 0022 0122     		movs	r2, #1
 3409 0024 83F82720 		strb	r2, [r3, #39]
 779:Src/w25qxx.c  **** 	if((NumByteToRead_up_to_PageSize>w25qxx.PageSize)||(NumByteToRead_up_to_PageSize==0))
 3410              		.loc 1 779 41
 3411 0028 2F4B     		ldr	r3, .L218
 3412 002a 5B89     		ldrh	r3, [r3, #10]
 3413 002c 1A46     		mov	r2, r3
 3414              		.loc 1 779 4
 3415 002e 3B68     		ldr	r3, [r7]
 3416 0030 9342     		cmp	r3, r2
 3417 0032 02D8     		bhi	.L214
 3418              		.loc 1 779 51 discriminator 1
 3419 0034 3B68     		ldr	r3, [r7]
 3420 0036 002B     		cmp	r3, #0
 3421 0038 02D1     		bne	.L215
 3422              	.L214:
 780:Src/w25qxx.c  **** 		NumByteToRead_up_to_PageSize=w25qxx.PageSize;
 3423              		.loc 1 780 38
 3424 003a 2B4B     		ldr	r3, .L218
 3425 003c 5B89     		ldrh	r3, [r3, #10]
 3426              		.loc 1 780 31
 3427 003e 3B60     		str	r3, [r7]
 3428              	.L215:
 781:Src/w25qxx.c  **** 	if((OffsetInByte+NumByteToRead_up_to_PageSize) > w25qxx.PageSize)
 3429              		.loc 1 781 18
 3430 0040 7A68     		ldr	r2, [r7, #4]
 3431 0042 3B68     		ldr	r3, [r7]
 3432 0044 1344     		add	r3, r3, r2
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 75


 3433              		.loc 1 781 57
 3434 0046 284A     		ldr	r2, .L218
 3435 0048 5289     		ldrh	r2, [r2, #10]
 3436              		.loc 1 781 4
 3437 004a 9342     		cmp	r3, r2
 3438 004c 05D9     		bls	.L216
 782:Src/w25qxx.c  **** 		NumByteToRead_up_to_PageSize = w25qxx.PageSize-OffsetInByte;
 3439              		.loc 1 782 40
 3440 004e 264B     		ldr	r3, .L218
 3441 0050 5B89     		ldrh	r3, [r3, #10]
 3442 0052 1A46     		mov	r2, r3
 3443              		.loc 1 782 32
 3444 0054 7B68     		ldr	r3, [r7, #4]
 3445 0056 D31A     		subs	r3, r2, r3
 3446 0058 3B60     		str	r3, [r7]
 3447              	.L216:
 783:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 784:Src/w25qxx.c  **** 	printf("w25qxx ReadPage:%d, Offset:%d ,Read %d Bytes, begin...\r\n",Page_Address,OffsetInByte,NumB
 785:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 786:Src/w25qxx.c  **** 	uint32_t	StartTime=HAL_GetTick();
 787:Src/w25qxx.c  **** 	#endif	
 788:Src/w25qxx.c  **** 	Page_Address = Page_Address*w25qxx.PageSize+OffsetInByte;
 3448              		.loc 1 788 36
 3449 005a 234B     		ldr	r3, .L218
 3450 005c 5B89     		ldrh	r3, [r3, #10]
 3451 005e 1A46     		mov	r2, r3
 3452              		.loc 1 788 29
 3453 0060 BB68     		ldr	r3, [r7, #8]
 3454 0062 03FB02F3 		mul	r3, r3, r2
 3455              		.loc 1 788 15
 3456 0066 7A68     		ldr	r2, [r7, #4]
 3457 0068 1344     		add	r3, r3, r2
 3458 006a BB60     		str	r3, [r7, #8]
 789:Src/w25qxx.c  **** 	HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_RESET);
 3459              		.loc 1 789 2
 3460 006c 0022     		movs	r2, #0
 3461 006e 1021     		movs	r1, #16
 3462 0070 1E48     		ldr	r0, .L218+4
 3463 0072 FFF7FEFF 		bl	HAL_GPIO_WritePin
 790:Src/w25qxx.c  **** 	W25qxx_Spi(0x0B);
 3464              		.loc 1 790 2
 3465 0076 0B20     		movs	r0, #11
 3466 0078 FFF7FEFF 		bl	W25qxx_Spi
 791:Src/w25qxx.c  **** 	if(w25qxx.ID>=W25Q256)
 3467              		.loc 1 791 11
 3468 007c 1A4B     		ldr	r3, .L218
 3469 007e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3470              		.loc 1 791 4
 3471 0080 082B     		cmp	r3, #8
 3472 0082 05D9     		bls	.L217
 792:Src/w25qxx.c  **** 		W25qxx_Spi((Page_Address & 0xFF000000) >> 24);
 3473              		.loc 1 792 42
 3474 0084 BB68     		ldr	r3, [r7, #8]
 3475 0086 1B0E     		lsrs	r3, r3, #24
 3476              		.loc 1 792 3
 3477 0088 DBB2     		uxtb	r3, r3
 3478 008a 1846     		mov	r0, r3
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 76


 3479 008c FFF7FEFF 		bl	W25qxx_Spi
 3480              	.L217:
 793:Src/w25qxx.c  ****   W25qxx_Spi((Page_Address & 0xFF0000) >> 16);
 3481              		.loc 1 793 40
 3482 0090 BB68     		ldr	r3, [r7, #8]
 3483 0092 1B0C     		lsrs	r3, r3, #16
 3484              		.loc 1 793 3
 3485 0094 DBB2     		uxtb	r3, r3
 3486 0096 1846     		mov	r0, r3
 3487 0098 FFF7FEFF 		bl	W25qxx_Spi
 794:Src/w25qxx.c  ****   W25qxx_Spi((Page_Address& 0xFF00) >> 8);
 3488              		.loc 1 794 37
 3489 009c BB68     		ldr	r3, [r7, #8]
 3490 009e 1B0A     		lsrs	r3, r3, #8
 3491              		.loc 1 794 3
 3492 00a0 DBB2     		uxtb	r3, r3
 3493 00a2 1846     		mov	r0, r3
 3494 00a4 FFF7FEFF 		bl	W25qxx_Spi
 795:Src/w25qxx.c  ****   W25qxx_Spi(Page_Address & 0xFF);
 3495              		.loc 1 795 3
 3496 00a8 BB68     		ldr	r3, [r7, #8]
 3497 00aa DBB2     		uxtb	r3, r3
 3498 00ac 1846     		mov	r0, r3
 3499 00ae FFF7FEFF 		bl	W25qxx_Spi
 796:Src/w25qxx.c  **** 	W25qxx_Spi(0);
 3500              		.loc 1 796 2
 3501 00b2 0020     		movs	r0, #0
 3502 00b4 FFF7FEFF 		bl	W25qxx_Spi
 797:Src/w25qxx.c  **** 	HAL_SPI_Receive(&_W25QXX_SPI,pBuffer,NumByteToRead_up_to_PageSize,100);	
 3503              		.loc 1 797 2
 3504 00b8 3B68     		ldr	r3, [r7]
 3505 00ba 9AB2     		uxth	r2, r3
 3506 00bc 6423     		movs	r3, #100
 3507 00be F968     		ldr	r1, [r7, #12]
 3508 00c0 0B48     		ldr	r0, .L218+8
 3509 00c2 FFF7FEFF 		bl	HAL_SPI_Receive
 798:Src/w25qxx.c  **** 	HAL_GPIO_WritePin(_W25QXX_CS_GPIO,_W25QXX_CS_PIN,GPIO_PIN_SET);
 3510              		.loc 1 798 2
 3511 00c6 0122     		movs	r2, #1
 3512 00c8 1021     		movs	r1, #16
 3513 00ca 0848     		ldr	r0, .L218+4
 3514 00cc FFF7FEFF 		bl	HAL_GPIO_WritePin
 799:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 800:Src/w25qxx.c  **** 	StartTime = HAL_GetTick()-StartTime; 
 801:Src/w25qxx.c  **** 	for(uint32_t i=0;i<NumByteToRead_up_to_PageSize ; i++)
 802:Src/w25qxx.c  **** 	{
 803:Src/w25qxx.c  **** 		if((i%8==0)&&(i>2))
 804:Src/w25qxx.c  **** 		{
 805:Src/w25qxx.c  **** 			printf("\r\n");
 806:Src/w25qxx.c  **** 			W25qxx_Delay(10);
 807:Src/w25qxx.c  **** 		}
 808:Src/w25qxx.c  **** 		printf("0x%02X,",pBuffer[i]);		
 809:Src/w25qxx.c  **** 	}	
 810:Src/w25qxx.c  **** 	printf("\r\n");
 811:Src/w25qxx.c  **** 	printf("w25qxx ReadPage done after %d ms\r\n",StartTime);
 812:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 813:Src/w25qxx.c  **** 	#endif	
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 77


 814:Src/w25qxx.c  **** 	W25qxx_Delay(1);
 3515              		.loc 1 814 2
 3516 00d0 0120     		movs	r0, #1
 3517 00d2 FFF7FEFF 		bl	HAL_Delay
 815:Src/w25qxx.c  **** 	w25qxx.Lock=0;
 3518              		.loc 1 815 13
 3519 00d6 044B     		ldr	r3, .L218
 3520 00d8 0022     		movs	r2, #0
 3521 00da 83F82720 		strb	r2, [r3, #39]
 816:Src/w25qxx.c  **** }
 3522              		.loc 1 816 1
 3523 00de 00BF     		nop
 3524 00e0 1037     		adds	r7, r7, #16
 3525              	.LCFI126:
 3526              		.cfi_def_cfa_offset 8
 3527 00e2 BD46     		mov	sp, r7
 3528              	.LCFI127:
 3529              		.cfi_def_cfa_register 13
 3530              		@ sp needed
 3531 00e4 80BD     		pop	{r7, pc}
 3532              	.L219:
 3533 00e6 00BF     		.align	2
 3534              	.L218:
 3535 00e8 00000000 		.word	w25qxx
 3536 00ec 00080140 		.word	1073809408
 3537 00f0 00000000 		.word	hspi1
 3538              		.cfi_endproc
 3539              	.LFE91:
 3541              		.section	.text.W25qxx_ReadSector,"ax",%progbits
 3542              		.align	1
 3543              		.global	W25qxx_ReadSector
 3544              		.syntax unified
 3545              		.thumb
 3546              		.thumb_func
 3547              		.fpu softvfp
 3549              	W25qxx_ReadSector:
 3550              	.LFB92:
 817:Src/w25qxx.c  **** //#################################################################################################
 818:Src/w25qxx.c  **** void 	W25qxx_ReadSector(uint8_t *pBuffer,uint32_t Sector_Address,uint32_t OffsetInByte,uint32_t Num
 819:Src/w25qxx.c  **** {	
 3551              		.loc 1 819 1
 3552              		.cfi_startproc
 3553              		@ args = 0, pretend = 0, frame = 32
 3554              		@ frame_needed = 1, uses_anonymous_args = 0
 3555 0000 80B5     		push	{r7, lr}
 3556              	.LCFI128:
 3557              		.cfi_def_cfa_offset 8
 3558              		.cfi_offset 7, -8
 3559              		.cfi_offset 14, -4
 3560 0002 88B0     		sub	sp, sp, #32
 3561              	.LCFI129:
 3562              		.cfi_def_cfa_offset 40
 3563 0004 00AF     		add	r7, sp, #0
 3564              	.LCFI130:
 3565              		.cfi_def_cfa_register 7
 3566 0006 F860     		str	r0, [r7, #12]
 3567 0008 B960     		str	r1, [r7, #8]
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 78


 3568 000a 7A60     		str	r2, [r7, #4]
 3569 000c 3B60     		str	r3, [r7]
 820:Src/w25qxx.c  **** 	if((NumByteToRead_up_to_SectorSize>w25qxx.SectorSize)||(NumByteToRead_up_to_SectorSize==0))
 3570              		.loc 1 820 43
 3571 000e 2B4B     		ldr	r3, .L229
 3572 0010 1B69     		ldr	r3, [r3, #16]
 3573              		.loc 1 820 4
 3574 0012 3A68     		ldr	r2, [r7]
 3575 0014 9A42     		cmp	r2, r3
 3576 0016 02D8     		bhi	.L221
 3577              		.loc 1 820 55 discriminator 1
 3578 0018 3B68     		ldr	r3, [r7]
 3579 001a 002B     		cmp	r3, #0
 3580 001c 02D1     		bne	.L222
 3581              	.L221:
 821:Src/w25qxx.c  **** 		NumByteToRead_up_to_SectorSize=w25qxx.SectorSize;
 3582              		.loc 1 821 33
 3583 001e 274B     		ldr	r3, .L229
 3584 0020 1B69     		ldr	r3, [r3, #16]
 3585 0022 3B60     		str	r3, [r7]
 3586              	.L222:
 822:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 823:Src/w25qxx.c  **** 	printf("+++w25qxx ReadSector:%d, Offset:%d ,Read %d Bytes, begin...\r\n",Sector_Address,OffsetInBy
 824:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 825:Src/w25qxx.c  **** 	#endif	
 826:Src/w25qxx.c  **** 	if(OffsetInByte>=w25qxx.SectorSize)
 3587              		.loc 1 826 25
 3588 0024 254B     		ldr	r3, .L229
 3589 0026 1B69     		ldr	r3, [r3, #16]
 3590              		.loc 1 826 4
 3591 0028 7A68     		ldr	r2, [r7, #4]
 3592 002a 9A42     		cmp	r2, r3
 3593 002c 41D2     		bcs	.L228
 827:Src/w25qxx.c  **** 	{
 828:Src/w25qxx.c  **** 		#if (_W25QXX_DEBUG==1)
 829:Src/w25qxx.c  **** 		printf("---w25qxx ReadSector Faild!\r\n");
 830:Src/w25qxx.c  **** 		W25qxx_Delay(100);
 831:Src/w25qxx.c  **** 		#endif	
 832:Src/w25qxx.c  **** 		return;
 833:Src/w25qxx.c  **** 	}	
 834:Src/w25qxx.c  **** 	uint32_t	StartPage;
 835:Src/w25qxx.c  **** 	int32_t		BytesToRead;
 836:Src/w25qxx.c  **** 	uint32_t	LocalOffset;	
 837:Src/w25qxx.c  **** 	if((OffsetInByte+NumByteToRead_up_to_SectorSize) > w25qxx.SectorSize)
 3594              		.loc 1 837 18
 3595 002e 7A68     		ldr	r2, [r7, #4]
 3596 0030 3B68     		ldr	r3, [r7]
 3597 0032 1A44     		add	r2, r2, r3
 3598              		.loc 1 837 59
 3599 0034 214B     		ldr	r3, .L229
 3600 0036 1B69     		ldr	r3, [r3, #16]
 3601              		.loc 1 837 4
 3602 0038 9A42     		cmp	r2, r3
 3603 003a 05D9     		bls	.L225
 838:Src/w25qxx.c  **** 		BytesToRead = w25qxx.SectorSize-OffsetInByte;
 3604              		.loc 1 838 23
 3605 003c 1F4B     		ldr	r3, .L229
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 79


 3606 003e 1A69     		ldr	r2, [r3, #16]
 3607              		.loc 1 838 34
 3608 0040 7B68     		ldr	r3, [r7, #4]
 3609 0042 D31A     		subs	r3, r2, r3
 3610              		.loc 1 838 15
 3611 0044 BB61     		str	r3, [r7, #24]
 3612 0046 01E0     		b	.L226
 3613              	.L225:
 839:Src/w25qxx.c  **** 	else
 840:Src/w25qxx.c  **** 		BytesToRead = NumByteToRead_up_to_SectorSize;	
 3614              		.loc 1 840 15
 3615 0048 3B68     		ldr	r3, [r7]
 3616 004a BB61     		str	r3, [r7, #24]
 3617              	.L226:
 841:Src/w25qxx.c  **** 	StartPage = W25qxx_SectorToPage(Sector_Address)+(OffsetInByte/w25qxx.PageSize);
 3618              		.loc 1 841 14
 3619 004c B868     		ldr	r0, [r7, #8]
 3620 004e FFF7FEFF 		bl	W25qxx_SectorToPage
 3621 0052 0246     		mov	r2, r0
 3622              		.loc 1 841 70
 3623 0054 194B     		ldr	r3, .L229
 3624 0056 5B89     		ldrh	r3, [r3, #10]
 3625 0058 1946     		mov	r1, r3
 3626              		.loc 1 841 63
 3627 005a 7B68     		ldr	r3, [r7, #4]
 3628 005c B3FBF1F3 		udiv	r3, r3, r1
 3629              		.loc 1 841 12
 3630 0060 1344     		add	r3, r3, r2
 3631 0062 FB61     		str	r3, [r7, #28]
 842:Src/w25qxx.c  **** 	LocalOffset = OffsetInByte%w25qxx.PageSize;	
 3632              		.loc 1 842 35
 3633 0064 154B     		ldr	r3, .L229
 3634 0066 5B89     		ldrh	r3, [r3, #10]
 3635 0068 1A46     		mov	r2, r3
 3636              		.loc 1 842 14
 3637 006a 7B68     		ldr	r3, [r7, #4]
 3638 006c B3FBF2F1 		udiv	r1, r3, r2
 3639 0070 02FB01F2 		mul	r2, r2, r1
 3640 0074 9B1A     		subs	r3, r3, r2
 3641 0076 7B61     		str	r3, [r7, #20]
 3642              	.L227:
 843:Src/w25qxx.c  **** 	do
 844:Src/w25qxx.c  **** 	{		
 845:Src/w25qxx.c  **** 		W25qxx_ReadPage(pBuffer,StartPage,LocalOffset,BytesToRead);
 3643              		.loc 1 845 3 discriminator 1
 3644 0078 BB69     		ldr	r3, [r7, #24]
 3645 007a 7A69     		ldr	r2, [r7, #20]
 3646 007c F969     		ldr	r1, [r7, #28]
 3647 007e F868     		ldr	r0, [r7, #12]
 3648 0080 FFF7FEFF 		bl	W25qxx_ReadPage
 846:Src/w25qxx.c  **** 		StartPage++;
 3649              		.loc 1 846 12 discriminator 1
 3650 0084 FB69     		ldr	r3, [r7, #28]
 3651 0086 0133     		adds	r3, r3, #1
 3652 0088 FB61     		str	r3, [r7, #28]
 847:Src/w25qxx.c  **** 		BytesToRead-=w25qxx.PageSize-LocalOffset;
 3653              		.loc 1 847 22 discriminator 1
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 80


 3654 008a 0C4B     		ldr	r3, .L229
 3655 008c 5B89     		ldrh	r3, [r3, #10]
 3656 008e 1A46     		mov	r2, r3
 3657              		.loc 1 847 14 discriminator 1
 3658 0090 7B69     		ldr	r3, [r7, #20]
 3659 0092 9A1A     		subs	r2, r3, r2
 3660 0094 BB69     		ldr	r3, [r7, #24]
 3661 0096 1344     		add	r3, r3, r2
 3662 0098 BB61     		str	r3, [r7, #24]
 848:Src/w25qxx.c  **** 		pBuffer+=w25qxx.PageSize;	
 3663              		.loc 1 848 18 discriminator 1
 3664 009a 084B     		ldr	r3, .L229
 3665 009c 5B89     		ldrh	r3, [r3, #10]
 3666 009e 1A46     		mov	r2, r3
 3667              		.loc 1 848 10 discriminator 1
 3668 00a0 FB68     		ldr	r3, [r7, #12]
 3669 00a2 1344     		add	r3, r3, r2
 3670 00a4 FB60     		str	r3, [r7, #12]
 849:Src/w25qxx.c  **** 		LocalOffset=0;
 3671              		.loc 1 849 14 discriminator 1
 3672 00a6 0023     		movs	r3, #0
 3673 00a8 7B61     		str	r3, [r7, #20]
 850:Src/w25qxx.c  **** 	}while(BytesToRead>0);		
 3674              		.loc 1 850 2 discriminator 1
 3675 00aa BB69     		ldr	r3, [r7, #24]
 3676 00ac 002B     		cmp	r3, #0
 3677 00ae E3DC     		bgt	.L227
 3678 00b0 00E0     		b	.L220
 3679              	.L228:
 832:Src/w25qxx.c  **** 	}	
 3680              		.loc 1 832 3
 3681 00b2 00BF     		nop
 3682              	.L220:
 851:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 852:Src/w25qxx.c  **** 	printf("---w25qxx ReadSector Done\r\n");
 853:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 854:Src/w25qxx.c  **** 	#endif	
 855:Src/w25qxx.c  **** }
 3683              		.loc 1 855 1
 3684 00b4 2037     		adds	r7, r7, #32
 3685              	.LCFI131:
 3686              		.cfi_def_cfa_offset 8
 3687 00b6 BD46     		mov	sp, r7
 3688              	.LCFI132:
 3689              		.cfi_def_cfa_register 13
 3690              		@ sp needed
 3691 00b8 80BD     		pop	{r7, pc}
 3692              	.L230:
 3693 00ba 00BF     		.align	2
 3694              	.L229:
 3695 00bc 00000000 		.word	w25qxx
 3696              		.cfi_endproc
 3697              	.LFE92:
 3699              		.section	.text.W25qxx_ReadBlock,"ax",%progbits
 3700              		.align	1
 3701              		.global	W25qxx_ReadBlock
 3702              		.syntax unified
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 81


 3703              		.thumb
 3704              		.thumb_func
 3705              		.fpu softvfp
 3707              	W25qxx_ReadBlock:
 3708              	.LFB93:
 856:Src/w25qxx.c  **** //#################################################################################################
 857:Src/w25qxx.c  **** void 	W25qxx_ReadBlock(uint8_t* pBuffer,uint32_t Block_Address,uint32_t OffsetInByte,uint32_t	NumBy
 858:Src/w25qxx.c  **** {
 3709              		.loc 1 858 1
 3710              		.cfi_startproc
 3711              		@ args = 0, pretend = 0, frame = 32
 3712              		@ frame_needed = 1, uses_anonymous_args = 0
 3713 0000 80B5     		push	{r7, lr}
 3714              	.LCFI133:
 3715              		.cfi_def_cfa_offset 8
 3716              		.cfi_offset 7, -8
 3717              		.cfi_offset 14, -4
 3718 0002 88B0     		sub	sp, sp, #32
 3719              	.LCFI134:
 3720              		.cfi_def_cfa_offset 40
 3721 0004 00AF     		add	r7, sp, #0
 3722              	.LCFI135:
 3723              		.cfi_def_cfa_register 7
 3724 0006 F860     		str	r0, [r7, #12]
 3725 0008 B960     		str	r1, [r7, #8]
 3726 000a 7A60     		str	r2, [r7, #4]
 3727 000c 3B60     		str	r3, [r7]
 859:Src/w25qxx.c  **** 	if((NumByteToRead_up_to_BlockSize>w25qxx.BlockSize)||(NumByteToRead_up_to_BlockSize==0))
 3728              		.loc 1 859 42
 3729 000e 2B4B     		ldr	r3, .L240
 3730 0010 9B69     		ldr	r3, [r3, #24]
 3731              		.loc 1 859 4
 3732 0012 3A68     		ldr	r2, [r7]
 3733 0014 9A42     		cmp	r2, r3
 3734 0016 02D8     		bhi	.L232
 3735              		.loc 1 859 53 discriminator 1
 3736 0018 3B68     		ldr	r3, [r7]
 3737 001a 002B     		cmp	r3, #0
 3738 001c 02D1     		bne	.L233
 3739              	.L232:
 860:Src/w25qxx.c  **** 		NumByteToRead_up_to_BlockSize=w25qxx.BlockSize;
 3740              		.loc 1 860 32
 3741 001e 274B     		ldr	r3, .L240
 3742 0020 9B69     		ldr	r3, [r3, #24]
 3743 0022 3B60     		str	r3, [r7]
 3744              	.L233:
 861:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 862:Src/w25qxx.c  **** 	printf("+++w25qxx ReadBlock:%d, Offset:%d ,Read %d Bytes, begin...\r\n",Block_Address,OffsetInByte
 863:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 864:Src/w25qxx.c  **** 	#endif	
 865:Src/w25qxx.c  **** 	if(OffsetInByte>=w25qxx.BlockSize)
 3745              		.loc 1 865 25
 3746 0024 254B     		ldr	r3, .L240
 3747 0026 9B69     		ldr	r3, [r3, #24]
 3748              		.loc 1 865 4
 3749 0028 7A68     		ldr	r2, [r7, #4]
 3750 002a 9A42     		cmp	r2, r3
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 82


 3751 002c 41D2     		bcs	.L239
 866:Src/w25qxx.c  **** 	{
 867:Src/w25qxx.c  **** 		#if (_W25QXX_DEBUG==1)
 868:Src/w25qxx.c  **** 		printf("w25qxx ReadBlock Faild!\r\n");
 869:Src/w25qxx.c  **** 		W25qxx_Delay(100);
 870:Src/w25qxx.c  **** 		#endif	
 871:Src/w25qxx.c  **** 		return;
 872:Src/w25qxx.c  **** 	}	
 873:Src/w25qxx.c  **** 	uint32_t	StartPage;
 874:Src/w25qxx.c  **** 	int32_t		BytesToRead;
 875:Src/w25qxx.c  **** 	uint32_t	LocalOffset;	
 876:Src/w25qxx.c  **** 	if((OffsetInByte+NumByteToRead_up_to_BlockSize) > w25qxx.BlockSize)
 3752              		.loc 1 876 18
 3753 002e 7A68     		ldr	r2, [r7, #4]
 3754 0030 3B68     		ldr	r3, [r7]
 3755 0032 1A44     		add	r2, r2, r3
 3756              		.loc 1 876 58
 3757 0034 214B     		ldr	r3, .L240
 3758 0036 9B69     		ldr	r3, [r3, #24]
 3759              		.loc 1 876 4
 3760 0038 9A42     		cmp	r2, r3
 3761 003a 05D9     		bls	.L236
 877:Src/w25qxx.c  **** 		BytesToRead = w25qxx.BlockSize-OffsetInByte;
 3762              		.loc 1 877 23
 3763 003c 1F4B     		ldr	r3, .L240
 3764 003e 9A69     		ldr	r2, [r3, #24]
 3765              		.loc 1 877 33
 3766 0040 7B68     		ldr	r3, [r7, #4]
 3767 0042 D31A     		subs	r3, r2, r3
 3768              		.loc 1 877 15
 3769 0044 BB61     		str	r3, [r7, #24]
 3770 0046 01E0     		b	.L237
 3771              	.L236:
 878:Src/w25qxx.c  **** 	else
 879:Src/w25qxx.c  **** 		BytesToRead = NumByteToRead_up_to_BlockSize;	
 3772              		.loc 1 879 15
 3773 0048 3B68     		ldr	r3, [r7]
 3774 004a BB61     		str	r3, [r7, #24]
 3775              	.L237:
 880:Src/w25qxx.c  **** 	StartPage = W25qxx_BlockToPage(Block_Address)+(OffsetInByte/w25qxx.PageSize);
 3776              		.loc 1 880 14
 3777 004c B868     		ldr	r0, [r7, #8]
 3778 004e FFF7FEFF 		bl	W25qxx_BlockToPage
 3779 0052 0246     		mov	r2, r0
 3780              		.loc 1 880 68
 3781 0054 194B     		ldr	r3, .L240
 3782 0056 5B89     		ldrh	r3, [r3, #10]
 3783 0058 1946     		mov	r1, r3
 3784              		.loc 1 880 61
 3785 005a 7B68     		ldr	r3, [r7, #4]
 3786 005c B3FBF1F3 		udiv	r3, r3, r1
 3787              		.loc 1 880 12
 3788 0060 1344     		add	r3, r3, r2
 3789 0062 FB61     		str	r3, [r7, #28]
 881:Src/w25qxx.c  **** 	LocalOffset = OffsetInByte%w25qxx.PageSize;	
 3790              		.loc 1 881 35
 3791 0064 154B     		ldr	r3, .L240
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 83


 3792 0066 5B89     		ldrh	r3, [r3, #10]
 3793 0068 1A46     		mov	r2, r3
 3794              		.loc 1 881 14
 3795 006a 7B68     		ldr	r3, [r7, #4]
 3796 006c B3FBF2F1 		udiv	r1, r3, r2
 3797 0070 02FB01F2 		mul	r2, r2, r1
 3798 0074 9B1A     		subs	r3, r3, r2
 3799 0076 7B61     		str	r3, [r7, #20]
 3800              	.L238:
 882:Src/w25qxx.c  **** 	do
 883:Src/w25qxx.c  **** 	{		
 884:Src/w25qxx.c  **** 		W25qxx_ReadPage(pBuffer,StartPage,LocalOffset,BytesToRead);
 3801              		.loc 1 884 3 discriminator 1
 3802 0078 BB69     		ldr	r3, [r7, #24]
 3803 007a 7A69     		ldr	r2, [r7, #20]
 3804 007c F969     		ldr	r1, [r7, #28]
 3805 007e F868     		ldr	r0, [r7, #12]
 3806 0080 FFF7FEFF 		bl	W25qxx_ReadPage
 885:Src/w25qxx.c  **** 		StartPage++;
 3807              		.loc 1 885 12 discriminator 1
 3808 0084 FB69     		ldr	r3, [r7, #28]
 3809 0086 0133     		adds	r3, r3, #1
 3810 0088 FB61     		str	r3, [r7, #28]
 886:Src/w25qxx.c  **** 		BytesToRead-=w25qxx.PageSize-LocalOffset;
 3811              		.loc 1 886 22 discriminator 1
 3812 008a 0C4B     		ldr	r3, .L240
 3813 008c 5B89     		ldrh	r3, [r3, #10]
 3814 008e 1A46     		mov	r2, r3
 3815              		.loc 1 886 14 discriminator 1
 3816 0090 7B69     		ldr	r3, [r7, #20]
 3817 0092 9A1A     		subs	r2, r3, r2
 3818 0094 BB69     		ldr	r3, [r7, #24]
 3819 0096 1344     		add	r3, r3, r2
 3820 0098 BB61     		str	r3, [r7, #24]
 887:Src/w25qxx.c  **** 		pBuffer+=w25qxx.PageSize;	
 3821              		.loc 1 887 18 discriminator 1
 3822 009a 084B     		ldr	r3, .L240
 3823 009c 5B89     		ldrh	r3, [r3, #10]
 3824 009e 1A46     		mov	r2, r3
 3825              		.loc 1 887 10 discriminator 1
 3826 00a0 FB68     		ldr	r3, [r7, #12]
 3827 00a2 1344     		add	r3, r3, r2
 3828 00a4 FB60     		str	r3, [r7, #12]
 888:Src/w25qxx.c  **** 		LocalOffset=0;
 3829              		.loc 1 888 14 discriminator 1
 3830 00a6 0023     		movs	r3, #0
 3831 00a8 7B61     		str	r3, [r7, #20]
 889:Src/w25qxx.c  **** 	}while(BytesToRead>0);		
 3832              		.loc 1 889 2 discriminator 1
 3833 00aa BB69     		ldr	r3, [r7, #24]
 3834 00ac 002B     		cmp	r3, #0
 3835 00ae E3DC     		bgt	.L238
 3836 00b0 00E0     		b	.L231
 3837              	.L239:
 871:Src/w25qxx.c  **** 	}	
 3838              		.loc 1 871 3
 3839 00b2 00BF     		nop
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 84


 3840              	.L231:
 890:Src/w25qxx.c  **** 	#if (_W25QXX_DEBUG==1)
 891:Src/w25qxx.c  **** 	printf("---w25qxx ReadBlock Done\r\n");
 892:Src/w25qxx.c  **** 	W25qxx_Delay(100);
 893:Src/w25qxx.c  **** 	#endif	
 894:Src/w25qxx.c  **** }
 3841              		.loc 1 894 1
 3842 00b4 2037     		adds	r7, r7, #32
 3843              	.LCFI136:
 3844              		.cfi_def_cfa_offset 8
 3845 00b6 BD46     		mov	sp, r7
 3846              	.LCFI137:
 3847              		.cfi_def_cfa_register 13
 3848              		@ sp needed
 3849 00b8 80BD     		pop	{r7, pc}
 3850              	.L241:
 3851 00ba 00BF     		.align	2
 3852              	.L240:
 3853 00bc 00000000 		.word	w25qxx
 3854              		.cfi_endproc
 3855              	.LFE93:
 3857              		.text
 3858              	.Letext0:
 3859              		.file 2 "c:\\program files\\gnu tools arm embedded patched 64\\8.2.1-1.2-20190119-1237\\arm-none-e
 3860              		.file 3 "c:\\program files\\gnu tools arm embedded patched 64\\8.2.1-1.2-20190119-1237\\arm-none-e
 3861              		.file 4 "Drivers/CMSIS/Include/core_cm3.h"
 3862              		.file 5 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 3863              		.file 6 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 3864              		.file 7 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 3865              		.file 8 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_gpio.h"
 3866              		.file 9 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 3867              		.file 10 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_spi.h"
 3868              		.file 11 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 3869              		.file 12 "Inc/spi.h"
 3870              		.file 13 "Inc/w25qxx.h"
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 85


DEFINED SYMBOLS
                            *ABS*:0000000000000000 w25qxx.c
                            *COM*:0000000000000028 w25qxx
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:17     .text.W25qxx_Spi:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:25     .text.W25qxx_Spi:0000000000000000 W25qxx_Spi
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:68     .text.W25qxx_Spi:0000000000000028 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:73     .text.W25qxx_ReadID:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:80     .text.W25qxx_ReadID:0000000000000000 W25qxx_ReadID
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:167    .text.W25qxx_ReadID:0000000000000068 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:172    .text.W25qxx_ReadUniqID:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:179    .text.W25qxx_ReadUniqID:0000000000000000 W25qxx_ReadUniqID
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:271    .text.W25qxx_ReadUniqID:0000000000000064 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:277    .text.W25qxx_WriteEnable:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:284    .text.W25qxx_WriteEnable:0000000000000000 W25qxx_WriteEnable
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:320    .text.W25qxx_WriteEnable:0000000000000028 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:325    .text.W25qxx_WriteDisable:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:332    .text.W25qxx_WriteDisable:0000000000000000 W25qxx_WriteDisable
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:368    .text.W25qxx_WriteDisable:0000000000000028 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:373    .text.W25qxx_ReadStatusRegister:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:380    .text.W25qxx_ReadStatusRegister:0000000000000000 W25qxx_ReadStatusRegister
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:476    .text.W25qxx_ReadStatusRegister:0000000000000084 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:482    .text.W25qxx_WriteStatusRegister:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:489    .text.W25qxx_WriteStatusRegister:0000000000000000 W25qxx_WriteStatusRegister
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:572    .text.W25qxx_WriteStatusRegister:0000000000000070 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:578    .text.W25qxx_WaitForWriteEnd:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:585    .text.W25qxx_WaitForWriteEnd:0000000000000000 W25qxx_WaitForWriteEnd
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:641    .text.W25qxx_WaitForWriteEnd:000000000000004c $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:647    .text.W25qxx_Init:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:654    .text.W25qxx_Init:0000000000000000 W25qxx_Init
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:695    .text.W25qxx_Init:0000000000000034 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:705    .text.W25qxx_Init:000000000000005c $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:909    .text.W25qxx_Init:0000000000000170 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:915    .text.W25qxx_EraseChip:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:922    .text.W25qxx_EraseChip:0000000000000000 W25qxx_EraseChip
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:983    .text.W25qxx_EraseChip:0000000000000054 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:989    .text.W25qxx_EraseSector:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:996    .text.W25qxx_EraseSector:0000000000000000 W25qxx_EraseSector
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1110   .text.W25qxx_EraseSector:00000000000000a0 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1116   .text.W25qxx_EraseBlock:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1123   .text.W25qxx_EraseBlock:0000000000000000 W25qxx_EraseBlock
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1239   .text.W25qxx_EraseBlock:00000000000000a4 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1245   .text.W25qxx_PageToSector:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1252   .text.W25qxx_PageToSector:0000000000000000 W25qxx_PageToSector
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1299   .text.W25qxx_PageToSector:0000000000000028 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1304   .text.W25qxx_PageToBlock:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1311   .text.W25qxx_PageToBlock:0000000000000000 W25qxx_PageToBlock
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1358   .text.W25qxx_PageToBlock:0000000000000028 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1363   .text.W25qxx_SectorToBlock:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1370   .text.W25qxx_SectorToBlock:0000000000000000 W25qxx_SectorToBlock
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1416   .text.W25qxx_SectorToBlock:0000000000000024 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1421   .text.W25qxx_SectorToPage:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1428   .text.W25qxx_SectorToPage:0000000000000000 W25qxx_SectorToPage
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1474   .text.W25qxx_SectorToPage:0000000000000024 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1479   .text.W25qxx_BlockToPage:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1486   .text.W25qxx_BlockToPage:0000000000000000 W25qxx_BlockToPage
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1532   .text.W25qxx_BlockToPage:0000000000000024 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1537   .text.W25qxx_IsEmptyPage:0000000000000000 $t
ARM GAS  C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s 			page 86


C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1544   .text.W25qxx_IsEmptyPage:0000000000000000 W25qxx_IsEmptyPage
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1856   .text.W25qxx_IsEmptyPage:00000000000001cc $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1863   .text.W25qxx_IsEmptySector:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:1870   .text.W25qxx_IsEmptySector:0000000000000000 W25qxx_IsEmptySector
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:2170   .text.W25qxx_IsEmptySector:00000000000001b8 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:2177   .text.W25qxx_IsEmptyBlock:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:2184   .text.W25qxx_IsEmptyBlock:0000000000000000 W25qxx_IsEmptyBlock
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:2484   .text.W25qxx_IsEmptyBlock:00000000000001b8 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:2491   .text.W25qxx_WriteByte:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:2498   .text.W25qxx_WriteByte:0000000000000000 W25qxx_WriteByte
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:2608   .text.W25qxx_WriteByte:000000000000009c $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:2614   .text.W25qxx_WritePage:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:2621   .text.W25qxx_WritePage:0000000000000000 W25qxx_WritePage
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:2792   .text.W25qxx_WritePage:00000000000000f4 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:2799   .text.W25qxx_WriteSector:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:2806   .text.W25qxx_WriteSector:0000000000000000 W25qxx_WriteSector
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:2952   .text.W25qxx_WriteSector:00000000000000bc $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:2957   .text.W25qxx_WriteBlock:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:2964   .text.W25qxx_WriteBlock:0000000000000000 W25qxx_WriteBlock
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:3110   .text.W25qxx_WriteBlock:00000000000000bc $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:3115   .text.W25qxx_ReadByte:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:3122   .text.W25qxx_ReadByte:0000000000000000 W25qxx_ReadByte
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:3232   .text.W25qxx_ReadByte:0000000000000098 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:3238   .text.W25qxx_ReadBytes:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:3245   .text.W25qxx_ReadBytes:0000000000000000 W25qxx_ReadBytes
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:3358   .text.W25qxx_ReadBytes:00000000000000a4 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:3365   .text.W25qxx_ReadPage:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:3372   .text.W25qxx_ReadPage:0000000000000000 W25qxx_ReadPage
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:3535   .text.W25qxx_ReadPage:00000000000000e8 $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:3542   .text.W25qxx_ReadSector:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:3549   .text.W25qxx_ReadSector:0000000000000000 W25qxx_ReadSector
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:3695   .text.W25qxx_ReadSector:00000000000000bc $d
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:3700   .text.W25qxx_ReadBlock:0000000000000000 $t
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:3707   .text.W25qxx_ReadBlock:0000000000000000 W25qxx_ReadBlock
C:\Users\Alex\AppData\Local\Temp\ccStAc0D.s:3853   .text.W25qxx_ReadBlock:00000000000000bc $d

UNDEFINED SYMBOLS
HAL_SPI_TransmitReceive
hspi1
HAL_GPIO_WritePin
HAL_Delay
HAL_SPI_Receive
HAL_SPI_Transmit
